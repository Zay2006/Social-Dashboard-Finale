exports.id=674,exports.ids=[674],exports.modules={85808:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.hkdf=void 0;let p=u(72863);function normalizeUint8Array(r,o){if("string"==typeof r)return new TextEncoder().encode(r);if(!(r instanceof Uint8Array))throw TypeError(`"${o}"" must be an instance of Uint8Array or a string`);return r}async function hkdf(r,o,u,E,A){return(0,p.default)(function(r){switch(r){case"sha256":case"sha384":case"sha512":case"sha1":return r;default:throw TypeError('unsupported "digest" value')}}(r),function(r){let o=normalizeUint8Array(r,"ikm");if(!o.byteLength)throw TypeError('"ikm" must be at least one byte in length');return o}(o),normalizeUint8Array(u,"salt"),function(r){let o=normalizeUint8Array(r,"info");if(o.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return o}(E),function(r,o){if("number"!=typeof r||!Number.isInteger(r)||r<1)throw TypeError('"keylen" must be a positive integer');let u=parseInt(o.substr(3),10)>>3||20;if(r>255*u)throw TypeError('"keylen" too large');return r}(A,r))}o.hkdf=hkdf,o.default=hkdf},78308:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113);o.default=(r,o,u,E,A)=>{let J=parseInt(r.substr(3),10)>>3||20,W=(0,p.createHmac)(r,u.byteLength?u:new Uint8Array(J)).update(o).digest(),R=Math.ceil(A/J),I=new Uint8Array(J*R+E.byteLength+1),K=0,U=0;for(let o=1;o<=R;o++)I.set(E,U),I[U+E.byteLength]=o,I.set((0,p.createHmac)(r,W).update(I.subarray(K,U+E.byteLength+1)).digest(),U),K=U,U+=J;return I.slice(0,A)}},72863:(r,o,u)=>{"use strict";let p;Object.defineProperty(o,"__esModule",{value:!0});let E=u(6113),A=u(78308);"function"!=typeof E.hkdf||process.versions.electron||(p=async(...r)=>new Promise((o,u)=>{E.hkdf(...r,(r,p)=>{r?u(r):o(new Uint8Array(p))})})),o.default=async(r,o,u,E,J)=>(p||A.default)(r,o,u,E,J)},95011:(r,o)=>{"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */o.parse=function(r,o){if("string"!=typeof r)throw TypeError("argument str must be a string");var u={},E=r.length;if(E<2)return u;var A=o&&o.decode||decode,J=0,W=0,R=0;do{if(-1===(W=r.indexOf("=",J)))break;if(-1===(R=r.indexOf(";",J)))R=E;else if(W>R){J=r.lastIndexOf(";",W-1)+1;continue}var I=startIndex(r,J,W),K=endIndex(r,W,I),U=r.slice(I,K);if(!p.call(u,U)){var D=startIndex(r,W+1,R),z=endIndex(r,R,D);34===r.charCodeAt(D)&&34===r.charCodeAt(z-1)&&(D++,z--);var G=r.slice(D,z);u[U]=function(r,o){try{return o(r)}catch(o){return r}}(G,A)}J=R+1}while(J<E);return u},o.serialize=function(r,o,p){var R=p&&p.encode||encodeURIComponent;if("function"!=typeof R)throw TypeError("option encode is invalid");if(!E.test(r))throw TypeError("argument name is invalid");var I=R(o);if(!A.test(I))throw TypeError("argument val is invalid");var K=r+"="+I;if(!p)return K;if(null!=p.maxAge){var U=Math.floor(p.maxAge);if(!isFinite(U))throw TypeError("option maxAge is invalid");K+="; Max-Age="+U}if(p.domain){if(!J.test(p.domain))throw TypeError("option domain is invalid");K+="; Domain="+p.domain}if(p.path){if(!W.test(p.path))throw TypeError("option path is invalid");K+="; Path="+p.path}if(p.expires){var D=p.expires;if("[object Date]"!==u.call(D)||isNaN(D.valueOf()))throw TypeError("option expires is invalid");K+="; Expires="+D.toUTCString()}if(p.httpOnly&&(K+="; HttpOnly"),p.secure&&(K+="; Secure"),p.partitioned&&(K+="; Partitioned"),p.priority)switch("string"==typeof p.priority?p.priority.toLowerCase():p.priority){case"low":K+="; Priority=Low";break;case"medium":K+="; Priority=Medium";break;case"high":K+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(p.sameSite)switch("string"==typeof p.sameSite?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":K+="; SameSite=Strict";break;case"lax":K+="; SameSite=Lax";break;case"none":K+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return K};var u=Object.prototype.toString,p=Object.prototype.hasOwnProperty,E=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,A=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,J=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,W=/^[\u0020-\u003A\u003D-\u007E]*$/;function startIndex(r,o,u){do{var p=r.charCodeAt(o);if(32!==p&&9!==p)return o}while(++o<u);return u}function endIndex(r,o,u){for(;o>u;){var p=r.charCodeAt(--o);if(32!==p&&9!==p)return o+1}return u}function decode(r){return -1!==r.indexOf("%")?decodeURIComponent(r):r}},92473:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.cryptoRuntime=o.base64url=o.generateSecret=o.generateKeyPair=o.errors=o.decodeJwt=o.decodeProtectedHeader=o.importJWK=o.importX509=o.importPKCS8=o.importSPKI=o.exportJWK=o.exportSPKI=o.exportPKCS8=o.UnsecuredJWT=o.createRemoteJWKSet=o.createLocalJWKSet=o.EmbeddedJWK=o.calculateJwkThumbprintUri=o.calculateJwkThumbprint=o.EncryptJWT=o.SignJWT=o.GeneralSign=o.FlattenedSign=o.CompactSign=o.FlattenedEncrypt=o.CompactEncrypt=o.jwtDecrypt=o.jwtVerify=o.generalVerify=o.flattenedVerify=o.compactVerify=o.GeneralEncrypt=o.generalDecrypt=o.flattenedDecrypt=o.compactDecrypt=void 0;var p=u(28648);Object.defineProperty(o,"compactDecrypt",{enumerable:!0,get:function(){return p.compactDecrypt}});var E=u(86504);Object.defineProperty(o,"flattenedDecrypt",{enumerable:!0,get:function(){return E.flattenedDecrypt}});var A=u(18032);Object.defineProperty(o,"generalDecrypt",{enumerable:!0,get:function(){return A.generalDecrypt}});var J=u(15706);Object.defineProperty(o,"GeneralEncrypt",{enumerable:!0,get:function(){return J.GeneralEncrypt}});var W=u(32392);Object.defineProperty(o,"compactVerify",{enumerable:!0,get:function(){return W.compactVerify}});var R=u(45663);Object.defineProperty(o,"flattenedVerify",{enumerable:!0,get:function(){return R.flattenedVerify}});var I=u(90245);Object.defineProperty(o,"generalVerify",{enumerable:!0,get:function(){return I.generalVerify}});var K=u(39876);Object.defineProperty(o,"jwtVerify",{enumerable:!0,get:function(){return K.jwtVerify}});var U=u(23180);Object.defineProperty(o,"jwtDecrypt",{enumerable:!0,get:function(){return U.jwtDecrypt}});var D=u(22e3);Object.defineProperty(o,"CompactEncrypt",{enumerable:!0,get:function(){return D.CompactEncrypt}});var z=u(1880);Object.defineProperty(o,"FlattenedEncrypt",{enumerable:!0,get:function(){return z.FlattenedEncrypt}});var G=u(39243);Object.defineProperty(o,"CompactSign",{enumerable:!0,get:function(){return G.CompactSign}});var Y=u(27618);Object.defineProperty(o,"FlattenedSign",{enumerable:!0,get:function(){return Y.FlattenedSign}});var X=u(92993);Object.defineProperty(o,"GeneralSign",{enumerable:!0,get:function(){return X.GeneralSign}});var Z=u(54388);Object.defineProperty(o,"SignJWT",{enumerable:!0,get:function(){return Z.SignJWT}});var Q=u(42173);Object.defineProperty(o,"EncryptJWT",{enumerable:!0,get:function(){return Q.EncryptJWT}});var ee=u(37598);Object.defineProperty(o,"calculateJwkThumbprint",{enumerable:!0,get:function(){return ee.calculateJwkThumbprint}}),Object.defineProperty(o,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return ee.calculateJwkThumbprintUri}});var et=u(21070);Object.defineProperty(o,"EmbeddedJWK",{enumerable:!0,get:function(){return et.EmbeddedJWK}});var er=u(6662);Object.defineProperty(o,"createLocalJWKSet",{enumerable:!0,get:function(){return er.createLocalJWKSet}});var en=u(37088);Object.defineProperty(o,"createRemoteJWKSet",{enumerable:!0,get:function(){return en.createRemoteJWKSet}});var ei=u(83287);Object.defineProperty(o,"UnsecuredJWT",{enumerable:!0,get:function(){return ei.UnsecuredJWT}});var eo=u(13227);Object.defineProperty(o,"exportPKCS8",{enumerable:!0,get:function(){return eo.exportPKCS8}}),Object.defineProperty(o,"exportSPKI",{enumerable:!0,get:function(){return eo.exportSPKI}}),Object.defineProperty(o,"exportJWK",{enumerable:!0,get:function(){return eo.exportJWK}});var ea=u(86194);Object.defineProperty(o,"importSPKI",{enumerable:!0,get:function(){return ea.importSPKI}}),Object.defineProperty(o,"importPKCS8",{enumerable:!0,get:function(){return ea.importPKCS8}}),Object.defineProperty(o,"importX509",{enumerable:!0,get:function(){return ea.importX509}}),Object.defineProperty(o,"importJWK",{enumerable:!0,get:function(){return ea.importJWK}});var es=u(81315);Object.defineProperty(o,"decodeProtectedHeader",{enumerable:!0,get:function(){return es.decodeProtectedHeader}});var ec=u(10070);Object.defineProperty(o,"decodeJwt",{enumerable:!0,get:function(){return ec.decodeJwt}}),o.errors=u(18662);var el=u(56562);Object.defineProperty(o,"generateKeyPair",{enumerable:!0,get:function(){return el.generateKeyPair}});var eu=u(45558);Object.defineProperty(o,"generateSecret",{enumerable:!0,get:function(){return eu.generateSecret}}),o.base64url=u(26673);var ed=u(16628);Object.defineProperty(o,"cryptoRuntime",{enumerable:!0,get:function(){return ed.default}})},28648:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.compactDecrypt=void 0;let p=u(86504),E=u(18662),A=u(9557);async function compactDecrypt(r,o,u){if(r instanceof Uint8Array&&(r=A.decoder.decode(r)),"string"!=typeof r)throw new E.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:J,1:W,2:R,3:I,4:K,length:U}=r.split(".");if(5!==U)throw new E.JWEInvalid("Invalid Compact JWE");let D=await (0,p.flattenedDecrypt)({ciphertext:I,iv:R||void 0,protected:J||void 0,tag:K||void 0,encrypted_key:W||void 0},o,u),z={plaintext:D.plaintext,protectedHeader:D.protectedHeader};return"function"==typeof o?{...z,key:D.key}:z}o.compactDecrypt=compactDecrypt},22e3:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.CompactEncrypt=void 0;let p=u(1880);o.CompactEncrypt=class{constructor(r){this._flattened=new p.FlattenedEncrypt(r)}setContentEncryptionKey(r){return this._flattened.setContentEncryptionKey(r),this}setInitializationVector(r){return this._flattened.setInitializationVector(r),this}setProtectedHeader(r){return this._flattened.setProtectedHeader(r),this}setKeyManagementParameters(r){return this._flattened.setKeyManagementParameters(r),this}async encrypt(r,o){let u=await this._flattened.encrypt(r,o);return[u.protected,u.encrypted_key,u.iv,u.ciphertext,u.tag].join(".")}}},86504:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.flattenedDecrypt=void 0;let p=u(28110),E=u(55197),A=u(49352),J=u(18662),W=u(44987),R=u(86935),I=u(57571),K=u(9557),U=u(65931),D=u(64580),z=u(79854);async function flattenedDecrypt(r,o,u){var G;let Y,X,Z,Q,ee,et,er;if(!(0,R.default)(r))throw new J.JWEInvalid("Flattened JWE must be an object");if(void 0===r.protected&&void 0===r.header&&void 0===r.unprotected)throw new J.JWEInvalid("JOSE Header missing");if("string"!=typeof r.iv)throw new J.JWEInvalid("JWE Initialization Vector missing or incorrect type");if("string"!=typeof r.ciphertext)throw new J.JWEInvalid("JWE Ciphertext missing or incorrect type");if("string"!=typeof r.tag)throw new J.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(void 0!==r.protected&&"string"!=typeof r.protected)throw new J.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==r.encrypted_key&&"string"!=typeof r.encrypted_key)throw new J.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==r.aad&&"string"!=typeof r.aad)throw new J.JWEInvalid("JWE AAD incorrect type");if(void 0!==r.header&&!(0,R.default)(r.header))throw new J.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==r.unprotected&&!(0,R.default)(r.unprotected))throw new J.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(r.protected)try{let o=(0,p.decode)(r.protected);Y=JSON.parse(K.decoder.decode(o))}catch{throw new J.JWEInvalid("JWE Protected Header is invalid")}if(!(0,W.default)(Y,r.header,r.unprotected))throw new J.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let en={...Y,...r.header,...r.unprotected};if((0,D.default)(J.JWEInvalid,new Map,null==u?void 0:u.crit,Y,en),void 0!==en.zip){if(!Y||!Y.zip)throw new J.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==en.zip)throw new J.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:ei,enc:eo}=en;if("string"!=typeof ei||!ei)throw new J.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof eo||!eo)throw new J.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let ea=u&&(0,z.default)("keyManagementAlgorithms",u.keyManagementAlgorithms),es=u&&(0,z.default)("contentEncryptionAlgorithms",u.contentEncryptionAlgorithms);if(ea&&!ea.has(ei))throw new J.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(es&&!es.has(eo))throw new J.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==r.encrypted_key)try{X=(0,p.decode)(r.encrypted_key)}catch{throw new J.JWEInvalid("Failed to base64url decode the encrypted_key")}let ec=!1;"function"==typeof o&&(o=await o(Y,r),ec=!0);try{Z=await (0,I.default)(ei,o,X,en,u)}catch(r){if(r instanceof TypeError||r instanceof J.JWEInvalid||r instanceof J.JOSENotSupported)throw r;Z=(0,U.default)(eo)}try{Q=(0,p.decode)(r.iv)}catch{throw new J.JWEInvalid("Failed to base64url decode the iv")}try{ee=(0,p.decode)(r.tag)}catch{throw new J.JWEInvalid("Failed to base64url decode the tag")}let el=K.encoder.encode(null!==(G=r.protected)&&void 0!==G?G:"");et=void 0!==r.aad?(0,K.concat)(el,K.encoder.encode("."),K.encoder.encode(r.aad)):el;try{er=(0,p.decode)(r.ciphertext)}catch{throw new J.JWEInvalid("Failed to base64url decode the ciphertext")}let eu=await (0,E.default)(eo,Z,er,Q,ee,et);"DEF"===en.zip&&(eu=await ((null==u?void 0:u.inflateRaw)||A.inflate)(eu));let ed={plaintext:eu};if(void 0!==r.protected&&(ed.protectedHeader=Y),void 0!==r.aad)try{ed.additionalAuthenticatedData=(0,p.decode)(r.aad)}catch{throw new J.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==r.unprotected&&(ed.sharedUnprotectedHeader=r.unprotected),void 0!==r.header&&(ed.unprotectedHeader=r.header),ec)?{...ed,key:o}:ed}o.flattenedDecrypt=flattenedDecrypt},1880:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.FlattenedEncrypt=o.unprotected=void 0;let p=u(28110),E=u(5563),A=u(49352),J=u(22687),W=u(1658),R=u(18662),I=u(44987),K=u(9557),U=u(64580);o.unprotected=Symbol(),o.FlattenedEncrypt=class{constructor(r){if(!(r instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=r}setKeyManagementParameters(r){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=r,this}setProtectedHeader(r){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setSharedUnprotectedHeader(r){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=r,this}setUnprotectedHeader(r){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}setAdditionalAuthenticatedData(r){return this._aad=r,this}setContentEncryptionKey(r){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=r,this}setInitializationVector(r){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=r,this}async encrypt(r,u){let D,z,G,Y,X,Z,Q;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new R.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,I.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new R.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let ee={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,U.default)(R.JWEInvalid,new Map,null==u?void 0:u.crit,this._protectedHeader,ee),void 0!==ee.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new R.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==ee.zip)throw new R.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:et,enc:er}=ee;if("string"!=typeof et||!et)throw new R.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof er||!er)throw new R.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===et){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===et&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let p;({cek:z,encryptedKey:D,parameters:p}=await (0,W.default)(et,er,r,this._cek,this._keyManagementParameters)),p&&(u&&o.unprotected in u?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...p}:this.setUnprotectedHeader(p):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...p}:this.setProtectedHeader(p))}if(this._iv||(this._iv=(0,J.default)(er)),Y=this._protectedHeader?K.encoder.encode((0,p.encode)(JSON.stringify(this._protectedHeader))):K.encoder.encode(""),this._aad?(X=(0,p.encode)(this._aad),G=(0,K.concat)(Y,K.encoder.encode("."),K.encoder.encode(X))):G=Y,"DEF"===ee.zip){let r=await ((null==u?void 0:u.deflateRaw)||A.deflate)(this._plaintext);({ciphertext:Z,tag:Q}=await (0,E.default)(er,r,z,this._iv,G))}else({ciphertext:Z,tag:Q}=await (0,E.default)(er,this._plaintext,z,this._iv,G));let en={ciphertext:(0,p.encode)(Z),iv:(0,p.encode)(this._iv),tag:(0,p.encode)(Q)};return D&&(en.encrypted_key=(0,p.encode)(D)),X&&(en.aad=X),this._protectedHeader&&(en.protected=K.decoder.decode(Y)),this._sharedUnprotectedHeader&&(en.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(en.header=this._unprotectedHeader),en}}},18032:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.generalDecrypt=void 0;let p=u(86504),E=u(18662),A=u(86935);async function generalDecrypt(r,o,u){if(!(0,A.default)(r))throw new E.JWEInvalid("General JWE must be an object");if(!Array.isArray(r.recipients)||!r.recipients.every(A.default))throw new E.JWEInvalid("JWE Recipients missing or incorrect type");if(!r.recipients.length)throw new E.JWEInvalid("JWE Recipients has no members");for(let E of r.recipients)try{return await (0,p.flattenedDecrypt)({aad:r.aad,ciphertext:r.ciphertext,encrypted_key:E.encrypted_key,header:E.header,iv:r.iv,protected:r.protected,tag:r.tag,unprotected:r.unprotected},o,u)}catch{}throw new E.JWEDecryptionFailed}o.generalDecrypt=generalDecrypt},15706:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.GeneralEncrypt=void 0;let p=u(1880),E=u(18662),A=u(65931),J=u(44987),W=u(1658),R=u(28110),I=u(64580);let IndividualRecipient=class IndividualRecipient{constructor(r,o,u){this.parent=r,this.key=o,this.options=u}setUnprotectedHeader(r){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=r,this}addRecipient(...r){return this.parent.addRecipient(...r)}encrypt(...r){return this.parent.encrypt(...r)}done(){return this.parent}};o.GeneralEncrypt=class{constructor(r){this._recipients=[],this._plaintext=r}addRecipient(r,o){let u=new IndividualRecipient(this,r,{crit:null==o?void 0:o.crit});return this._recipients.push(u),u}setProtectedHeader(r){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setSharedUnprotectedHeader(r){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}setAdditionalAuthenticatedData(r){return this._aad=r,this}async encrypt(r){var o,u,K;let U;if(!this._recipients.length)throw new E.JWEInvalid("at least one recipient must be added");if(r={deflateRaw:null==r?void 0:r.deflateRaw},1===this._recipients.length){let[o]=this._recipients,u=await new p.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(o.unprotectedHeader).encrypt(o.key,{...o.options,...r}),E={ciphertext:u.ciphertext,iv:u.iv,recipients:[{}],tag:u.tag};return u.aad&&(E.aad=u.aad),u.protected&&(E.protected=u.protected),u.unprotected&&(E.unprotected=u.unprotected),u.encrypted_key&&(E.recipients[0].encrypted_key=u.encrypted_key),u.header&&(E.recipients[0].header=u.header),E}for(let r=0;r<this._recipients.length;r++){let o=this._recipients[r];if(!(0,J.default)(this._protectedHeader,this._unprotectedHeader,o.unprotectedHeader))throw new E.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let u={...this._protectedHeader,...this._unprotectedHeader,...o.unprotectedHeader},{alg:p}=u;if("string"!=typeof p||!p)throw new E.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===p||"ECDH-ES"===p)throw new E.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof u.enc||!u.enc)throw new E.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(U){if(U!==u.enc)throw new E.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else U=u.enc;if((0,I.default)(E.JWEInvalid,new Map,o.options.crit,this._protectedHeader,u),void 0!==u.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new E.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let D=(0,A.default)(U),z={ciphertext:"",iv:"",recipients:[],tag:""};for(let E=0;E<this._recipients.length;E++){let A=this._recipients[E],J={};z.recipients.push(J);let I={...this._protectedHeader,...this._unprotectedHeader,...A.unprotectedHeader},G=I.alg.startsWith("PBES2")?2048+E:void 0;if(0===E){let o=await new p.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(D).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(A.unprotectedHeader).setKeyManagementParameters({p2c:G}).encrypt(A.key,{...A.options,...r,[p.unprotected]:!0});z.ciphertext=o.ciphertext,z.iv=o.iv,z.tag=o.tag,o.aad&&(z.aad=o.aad),o.protected&&(z.protected=o.protected),o.unprotected&&(z.unprotected=o.unprotected),J.encrypted_key=o.encrypted_key,o.header&&(J.header=o.header);continue}let{encryptedKey:Y,parameters:X}=await (0,W.default)((null===(o=A.unprotectedHeader)||void 0===o?void 0:o.alg)||(null===(u=this._protectedHeader)||void 0===u?void 0:u.alg)||(null===(K=this._unprotectedHeader)||void 0===K?void 0:K.alg),U,A.key,D,{p2c:G});J.encrypted_key=(0,R.encode)(Y),(A.unprotectedHeader||X)&&(J.header={...A.unprotectedHeader,...X})}return z}}},21070:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.EmbeddedJWK=void 0;let p=u(86194),E=u(86935),A=u(18662);async function EmbeddedJWK(r,o){let u={...r,...null==o?void 0:o.header};if(!(0,E.default)(u.jwk))throw new A.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let J=await (0,p.importJWK)({...u.jwk,ext:!0},u.alg,!0);if(J instanceof Uint8Array||"public"!==J.type)throw new A.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return J}o.EmbeddedJWK=EmbeddedJWK},37598:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.calculateJwkThumbprintUri=o.calculateJwkThumbprint=void 0;let p=u(48177),E=u(28110),A=u(18662),J=u(9557),W=u(86935),check=(r,o)=>{if("string"!=typeof r||!r)throw new A.JWKInvalid(`${o} missing or invalid`)};async function calculateJwkThumbprint(r,o){let u;if(!(0,W.default)(r))throw TypeError("JWK must be an object");if(null!=o||(o="sha256"),"sha256"!==o&&"sha384"!==o&&"sha512"!==o)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(r.kty){case"EC":check(r.crv,'"crv" (Curve) Parameter'),check(r.x,'"x" (X Coordinate) Parameter'),check(r.y,'"y" (Y Coordinate) Parameter'),u={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":check(r.crv,'"crv" (Subtype of Key Pair) Parameter'),check(r.x,'"x" (Public Key) Parameter'),u={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":check(r.e,'"e" (Exponent) Parameter'),check(r.n,'"n" (Modulus) Parameter'),u={e:r.e,kty:r.kty,n:r.n};break;case"oct":check(r.k,'"k" (Key Value) Parameter'),u={k:r.k,kty:r.kty};break;default:throw new A.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let R=J.encoder.encode(JSON.stringify(u));return(0,E.encode)(await (0,p.default)(o,R))}async function calculateJwkThumbprintUri(r,o){null!=o||(o="sha256");let u=await calculateJwkThumbprint(r,o);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${o.slice(-3)}:${u}`}o.calculateJwkThumbprint=calculateJwkThumbprint,o.calculateJwkThumbprintUri=calculateJwkThumbprintUri},6662:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.createLocalJWKSet=o.LocalJWKSet=o.isJWKSLike=void 0;let p=u(86194),E=u(18662),A=u(86935);function isJWKSLike(r){return r&&"object"==typeof r&&Array.isArray(r.keys)&&r.keys.every(isJWKLike)}function isJWKLike(r){return(0,A.default)(r)}o.isJWKSLike=isJWKSLike;let LocalJWKSet=class LocalJWKSet{constructor(r){if(this._cached=new WeakMap,!isJWKSLike(r))throw new E.JWKSInvalid("JSON Web Key Set malformed");this._jwks=function(r){return"function"==typeof structuredClone?structuredClone(r):JSON.parse(JSON.stringify(r))}(r)}async getKey(r,o){let{alg:u,kid:p}={...r,...null==o?void 0:o.header},A=function(r){switch("string"==typeof r&&r.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new E.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(u),J=this._jwks.keys.filter(r=>{let o=A===r.kty;if(o&&"string"==typeof p&&(o=p===r.kid),o&&"string"==typeof r.alg&&(o=u===r.alg),o&&"string"==typeof r.use&&(o="sig"===r.use),o&&Array.isArray(r.key_ops)&&(o=r.key_ops.includes("verify")),o&&"EdDSA"===u&&(o="Ed25519"===r.crv||"Ed448"===r.crv),o)switch(u){case"ES256":o="P-256"===r.crv;break;case"ES256K":o="secp256k1"===r.crv;break;case"ES384":o="P-384"===r.crv;break;case"ES512":o="P-521"===r.crv}return o}),{0:W,length:R}=J;if(0===R)throw new E.JWKSNoMatchingKey;if(1!==R){let r=new E.JWKSMultipleMatchingKeys,{_cached:o}=this;throw r[Symbol.asyncIterator]=async function*(){for(let r of J)try{yield await importWithAlgCache(o,r,u)}catch{continue}},r}return importWithAlgCache(this._cached,W,u)}};async function importWithAlgCache(r,o,u){let A=r.get(o)||r.set(o,{}).get(o);if(void 0===A[u]){let r=await (0,p.importJWK)({...o,ext:!0},u);if(r instanceof Uint8Array||"public"!==r.type)throw new E.JWKSInvalid("JSON Web Key Set members must be public keys");A[u]=r}return A[u]}o.LocalJWKSet=LocalJWKSet,o.createLocalJWKSet=function(r){let o=new LocalJWKSet(r);return async function(r,u){return o.getKey(r,u)}}},37088:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.createRemoteJWKSet=void 0;let p=u(70409),E=u(18662),A=u(6662);let RemoteJWKSet=class RemoteJWKSet extends A.LocalJWKSet{constructor(r,o){if(super({keys:[]}),this._jwks=void 0,!(r instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(r.href),this._options={agent:null==o?void 0:o.agent,headers:null==o?void 0:o.headers},this._timeoutDuration="number"==typeof(null==o?void 0:o.timeoutDuration)?null==o?void 0:o.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==o?void 0:o.cooldownDuration)?null==o?void 0:o.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==o?void 0:o.cacheMaxAge)?null==o?void 0:o.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(r,o){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(r,o)}catch(u){if(u instanceof E.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),super.getKey(r,o);throw u}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,p.default)(this._url,this._timeoutDuration,this._options).then(r=>{if(!(0,A.isJWKSLike)(r))throw new E.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:r.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(r=>{throw this._pendingFetch=void 0,r})),await this._pendingFetch}};o.createRemoteJWKSet=function(r,o){let u=new RemoteJWKSet(r,o);return async function(r,o){return u.getKey(r,o)}}},39243:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.CompactSign=void 0;let p=u(27618);o.CompactSign=class{constructor(r){this._flattened=new p.FlattenedSign(r)}setProtectedHeader(r){return this._flattened.setProtectedHeader(r),this}async sign(r,o){let u=await this._flattened.sign(r,o);if(void 0===u.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${u.protected}.${u.payload}.${u.signature}`}}},32392:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.compactVerify=void 0;let p=u(45663),E=u(18662),A=u(9557);async function compactVerify(r,o,u){if(r instanceof Uint8Array&&(r=A.decoder.decode(r)),"string"!=typeof r)throw new E.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:J,1:W,2:R,length:I}=r.split(".");if(3!==I)throw new E.JWSInvalid("Invalid Compact JWS");let K=await (0,p.flattenedVerify)({payload:W,protected:J,signature:R},o,u),U={payload:K.payload,protectedHeader:K.protectedHeader};return"function"==typeof o?{...U,key:K.key}:U}o.compactVerify=compactVerify},27618:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.FlattenedSign=void 0;let p=u(28110),E=u(31314),A=u(44987),J=u(18662),W=u(9557),R=u(59227),I=u(64580);o.FlattenedSign=class{constructor(r){if(!(r instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=r}setProtectedHeader(r){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setUnprotectedHeader(r){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}async sign(r,o){let u;if(!this._protectedHeader&&!this._unprotectedHeader)throw new J.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,A.default)(this._protectedHeader,this._unprotectedHeader))throw new J.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let K={...this._protectedHeader,...this._unprotectedHeader},U=(0,I.default)(J.JWSInvalid,new Map([["b64",!0]]),null==o?void 0:o.crit,this._protectedHeader,K),D=!0;if(U.has("b64")&&"boolean"!=typeof(D=this._protectedHeader.b64))throw new J.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:z}=K;if("string"!=typeof z||!z)throw new J.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,R.default)(z,r,"sign");let G=this._payload;D&&(G=W.encoder.encode((0,p.encode)(G))),u=this._protectedHeader?W.encoder.encode((0,p.encode)(JSON.stringify(this._protectedHeader))):W.encoder.encode("");let Y=(0,W.concat)(u,W.encoder.encode("."),G),X=await (0,E.default)(z,r,Y),Z={signature:(0,p.encode)(X),payload:""};return D&&(Z.payload=W.decoder.decode(G)),this._unprotectedHeader&&(Z.header=this._unprotectedHeader),this._protectedHeader&&(Z.protected=W.decoder.decode(u)),Z}}},45663:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.flattenedVerify=void 0;let p=u(28110),E=u(37281),A=u(18662),J=u(9557),W=u(44987),R=u(86935),I=u(59227),K=u(64580),U=u(79854);async function flattenedVerify(r,o,u){var D;let z,G;if(!(0,R.default)(r))throw new A.JWSInvalid("Flattened JWS must be an object");if(void 0===r.protected&&void 0===r.header)throw new A.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==r.protected&&"string"!=typeof r.protected)throw new A.JWSInvalid("JWS Protected Header incorrect type");if(void 0===r.payload)throw new A.JWSInvalid("JWS Payload missing");if("string"!=typeof r.signature)throw new A.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==r.header&&!(0,R.default)(r.header))throw new A.JWSInvalid("JWS Unprotected Header incorrect type");let Y={};if(r.protected)try{let o=(0,p.decode)(r.protected);Y=JSON.parse(J.decoder.decode(o))}catch{throw new A.JWSInvalid("JWS Protected Header is invalid")}if(!(0,W.default)(Y,r.header))throw new A.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let X={...Y,...r.header},Z=(0,K.default)(A.JWSInvalid,new Map([["b64",!0]]),null==u?void 0:u.crit,Y,X),Q=!0;if(Z.has("b64")&&"boolean"!=typeof(Q=Y.b64))throw new A.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:ee}=X;if("string"!=typeof ee||!ee)throw new A.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let et=u&&(0,U.default)("algorithms",u.algorithms);if(et&&!et.has(ee))throw new A.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(Q){if("string"!=typeof r.payload)throw new A.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof r.payload&&!(r.payload instanceof Uint8Array))throw new A.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let er=!1;"function"==typeof o&&(o=await o(Y,r),er=!0),(0,I.default)(ee,o,"verify");let en=(0,J.concat)(J.encoder.encode(null!==(D=r.protected)&&void 0!==D?D:""),J.encoder.encode("."),"string"==typeof r.payload?J.encoder.encode(r.payload):r.payload);try{z=(0,p.decode)(r.signature)}catch{throw new A.JWSInvalid("Failed to base64url decode the signature")}let ei=await (0,E.default)(ee,o,z,en);if(!ei)throw new A.JWSSignatureVerificationFailed;if(Q)try{G=(0,p.decode)(r.payload)}catch{throw new A.JWSInvalid("Failed to base64url decode the payload")}else G="string"==typeof r.payload?J.encoder.encode(r.payload):r.payload;let eo={payload:G};return(void 0!==r.protected&&(eo.protectedHeader=Y),void 0!==r.header&&(eo.unprotectedHeader=r.header),er)?{...eo,key:o}:eo}o.flattenedVerify=flattenedVerify},92993:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.GeneralSign=void 0;let p=u(27618),E=u(18662);let IndividualSignature=class IndividualSignature{constructor(r,o,u){this.parent=r,this.key=o,this.options=u}setProtectedHeader(r){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=r,this}setUnprotectedHeader(r){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=r,this}addSignature(...r){return this.parent.addSignature(...r)}sign(...r){return this.parent.sign(...r)}done(){return this.parent}};o.GeneralSign=class{constructor(r){this._signatures=[],this._payload=r}addSignature(r,o){let u=new IndividualSignature(this,r,o);return this._signatures.push(u),u}async sign(){if(!this._signatures.length)throw new E.JWSInvalid("at least one signature must be added");let r={signatures:[],payload:""};for(let o=0;o<this._signatures.length;o++){let u=this._signatures[o],A=new p.FlattenedSign(this._payload);A.setProtectedHeader(u.protectedHeader),A.setUnprotectedHeader(u.unprotectedHeader);let{payload:J,...W}=await A.sign(u.key,u.options);if(0===o)r.payload=J;else if(r.payload!==J)throw new E.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");r.signatures.push(W)}return r}}},90245:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.generalVerify=void 0;let p=u(45663),E=u(18662),A=u(86935);async function generalVerify(r,o,u){if(!(0,A.default)(r))throw new E.JWSInvalid("General JWS must be an object");if(!Array.isArray(r.signatures)||!r.signatures.every(A.default))throw new E.JWSInvalid("JWS Signatures missing or incorrect type");for(let E of r.signatures)try{return await (0,p.flattenedVerify)({header:E.header,payload:r.payload,protected:E.protected,signature:E.signature},o,u)}catch{}throw new E.JWSSignatureVerificationFailed}o.generalVerify=generalVerify},23180:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.jwtDecrypt=void 0;let p=u(28648),E=u(62651),A=u(18662);async function jwtDecrypt(r,o,u){let J=await (0,p.compactDecrypt)(r,o,u),W=(0,E.default)(J.protectedHeader,J.plaintext,u),{protectedHeader:R}=J;if(void 0!==R.iss&&R.iss!==W.iss)throw new A.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==R.sub&&R.sub!==W.sub)throw new A.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==R.aud&&JSON.stringify(R.aud)!==JSON.stringify(W.aud))throw new A.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let I={payload:W,protectedHeader:R};return"function"==typeof o?{...I,key:J.key}:I}o.jwtDecrypt=jwtDecrypt},42173:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.EncryptJWT=void 0;let p=u(22e3),E=u(9557),A=u(9256);let EncryptJWT=class EncryptJWT extends A.ProduceJWT{setProtectedHeader(r){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setKeyManagementParameters(r){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=r,this}setContentEncryptionKey(r){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=r,this}setInitializationVector(r){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=r,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(r,o){let u=new p.CompactEncrypt(E.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),u.setProtectedHeader(this._protectedHeader),this._iv&&u.setInitializationVector(this._iv),this._cek&&u.setContentEncryptionKey(this._cek),this._keyManagementParameters&&u.setKeyManagementParameters(this._keyManagementParameters),u.encrypt(r,o)}};o.EncryptJWT=EncryptJWT},9256:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.ProduceJWT=void 0;let p=u(1641),E=u(86935),A=u(93012);o.ProduceJWT=class{constructor(r){if(!(0,E.default)(r))throw TypeError("JWT Claims Set MUST be an object");this._payload=r}setIssuer(r){return this._payload={...this._payload,iss:r},this}setSubject(r){return this._payload={...this._payload,sub:r},this}setAudience(r){return this._payload={...this._payload,aud:r},this}setJti(r){return this._payload={...this._payload,jti:r},this}setNotBefore(r){return"number"==typeof r?this._payload={...this._payload,nbf:r}:this._payload={...this._payload,nbf:(0,p.default)(new Date)+(0,A.default)(r)},this}setExpirationTime(r){return"number"==typeof r?this._payload={...this._payload,exp:r}:this._payload={...this._payload,exp:(0,p.default)(new Date)+(0,A.default)(r)},this}setIssuedAt(r){return void 0===r?this._payload={...this._payload,iat:(0,p.default)(new Date)}:this._payload={...this._payload,iat:r},this}}},54388:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.SignJWT=void 0;let p=u(39243),E=u(18662),A=u(9557),J=u(9256);let SignJWT=class SignJWT extends J.ProduceJWT{setProtectedHeader(r){return this._protectedHeader=r,this}async sign(r,o){var u;let J=new p.CompactSign(A.encoder.encode(JSON.stringify(this._payload)));if(J.setProtectedHeader(this._protectedHeader),Array.isArray(null===(u=this._protectedHeader)||void 0===u?void 0:u.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new E.JWTInvalid("JWTs MUST NOT use unencoded payload");return J.sign(r,o)}};o.SignJWT=SignJWT},83287:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.UnsecuredJWT=void 0;let p=u(28110),E=u(9557),A=u(18662),J=u(62651),W=u(9256);let UnsecuredJWT=class UnsecuredJWT extends W.ProduceJWT{encode(){let r=p.encode(JSON.stringify({alg:"none"})),o=p.encode(JSON.stringify(this._payload));return`${r}.${o}.`}static decode(r,o){let u;if("string"!=typeof r)throw new A.JWTInvalid("Unsecured JWT must be a string");let{0:W,1:R,2:I,length:K}=r.split(".");if(3!==K||""!==I)throw new A.JWTInvalid("Invalid Unsecured JWT");try{if(u=JSON.parse(E.decoder.decode(p.decode(W))),"none"!==u.alg)throw Error()}catch{throw new A.JWTInvalid("Invalid Unsecured JWT")}let U=(0,J.default)(u,p.decode(R),o);return{payload:U,header:u}}};o.UnsecuredJWT=UnsecuredJWT},39876:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.jwtVerify=void 0;let p=u(32392),E=u(62651),A=u(18662);async function jwtVerify(r,o,u){var J;let W=await (0,p.compactVerify)(r,o,u);if((null===(J=W.protectedHeader.crit)||void 0===J?void 0:J.includes("b64"))&&!1===W.protectedHeader.b64)throw new A.JWTInvalid("JWTs MUST NOT use unencoded payload");let R=(0,E.default)(W.protectedHeader,W.payload,u),I={payload:R,protectedHeader:W.protectedHeader};return"function"==typeof o?{...I,key:W.key}:I}o.jwtVerify=jwtVerify},13227:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.exportJWK=o.exportPKCS8=o.exportSPKI=void 0;let p=u(46521),E=u(46521),A=u(179);async function exportSPKI(r){return(0,p.toSPKI)(r)}async function exportPKCS8(r){return(0,E.toPKCS8)(r)}async function exportJWK(r){return(0,A.default)(r)}o.exportSPKI=exportSPKI,o.exportPKCS8=exportPKCS8,o.exportJWK=exportJWK},56562:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.generateKeyPair=void 0;let p=u(68714);async function generateKeyPair(r,o){return(0,p.generateKeyPair)(r,o)}o.generateKeyPair=generateKeyPair},45558:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.generateSecret=void 0;let p=u(68714);async function generateSecret(r,o){return(0,p.generateSecret)(r,o)}o.generateSecret=generateSecret},86194:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.importJWK=o.importPKCS8=o.importX509=o.importSPKI=void 0;let p=u(28110),E=u(46521),A=u(11799),J=u(18662),W=u(86935);async function importSPKI(r,o,u){if("string"!=typeof r||0!==r.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,E.fromSPKI)(r,o,u)}async function importX509(r,o,u){if("string"!=typeof r||0!==r.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,E.fromX509)(r,o,u)}async function importPKCS8(r,o,u){if("string"!=typeof r||0!==r.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,E.fromPKCS8)(r,o,u)}async function importJWK(r,o,u){var E;if(!(0,W.default)(r))throw TypeError("JWK must be an object");switch(o||(o=r.alg),r.kty){case"oct":if("string"!=typeof r.k||!r.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=u||(u=!0!==r.ext),u)return(0,A.default)({...r,alg:o,ext:null!==(E=r.ext)&&void 0!==E&&E});return(0,p.decode)(r.k);case"RSA":if(void 0!==r.oth)throw new J.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,A.default)({...r,alg:o});default:throw new J.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}o.importSPKI=importSPKI,o.importX509=importX509,o.importPKCS8=importPKCS8,o.importJWK=importJWK},5219:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.unwrap=o.wrap=void 0;let p=u(5563),E=u(55197),A=u(22687),J=u(28110);async function wrap(r,o,u,E){let W=r.slice(0,7);E||(E=(0,A.default)(W));let{ciphertext:R,tag:I}=await (0,p.default)(W,u,o,E,new Uint8Array(0));return{encryptedKey:R,iv:(0,J.encode)(E),tag:(0,J.encode)(I)}}async function unwrap(r,o,u,p,A){let J=r.slice(0,7);return(0,E.default)(J,o,u,p,A,new Uint8Array(0))}o.wrap=wrap,o.unwrap=unwrap},9557:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.concatKdf=o.lengthAndInput=o.uint32be=o.uint64be=o.p2s=o.concat=o.decoder=o.encoder=void 0;let p=u(48177);function concat(...r){let o=r.reduce((r,{length:o})=>r+o,0),u=new Uint8Array(o),p=0;return r.forEach(r=>{u.set(r,p),p+=r.length}),u}function writeUInt32BE(r,o,u){if(o<0||o>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${o}`);r.set([o>>>24,o>>>16,o>>>8,255&o],u)}function uint32be(r){let o=new Uint8Array(4);return writeUInt32BE(o,r),o}async function concatKdf(r,o,u){let E=Math.ceil((o>>3)/32),A=new Uint8Array(32*E);for(let o=0;o<E;o++){let E=new Uint8Array(4+r.length+u.length);E.set(uint32be(o+1)),E.set(r,4),E.set(u,4+r.length),A.set(await (0,p.default)("sha256",E),32*o)}return A.slice(0,o>>3)}o.encoder=new TextEncoder,o.decoder=new TextDecoder,o.concat=concat,o.p2s=function(r,u){return concat(o.encoder.encode(r),new Uint8Array([0]),u)},o.uint64be=function(r){let o=new Uint8Array(8);return writeUInt32BE(o,Math.floor(r/4294967296),0),writeUInt32BE(o,r%4294967296,4),o},o.uint32be=uint32be,o.lengthAndInput=function(r){return concat(uint32be(r.length),r)},o.concatKdf=concatKdf},65931:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.bitLength=void 0;let p=u(18662),E=u(27227);function bitLength(r){switch(r){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new p.JOSENotSupported(`Unsupported JWE Algorithm: ${r}`)}}o.bitLength=bitLength,o.default=r=>(0,E.default)(new Uint8Array(bitLength(r)>>3))},42321:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(18662),E=u(22687);o.default=(r,o)=>{if(o.length<<3!==(0,E.bitLength)(r))throw new p.JWEInvalid("Invalid Initialization Vector length")}},59227:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(68503),E=u(74049),symmetricTypeCheck=(r,o)=>{if(!(o instanceof Uint8Array)){if(!(0,E.default)(o))throw TypeError((0,p.withAlg)(r,o,...E.types,"Uint8Array"));if("secret"!==o.type)throw TypeError(`${E.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},asymmetricTypeCheck=(r,o,u)=>{if(!(0,E.default)(o))throw TypeError((0,p.withAlg)(r,o,...E.types));if("secret"===o.type)throw TypeError(`${E.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===u&&"public"===o.type)throw TypeError(`${E.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===u&&"public"===o.type)throw TypeError(`${E.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(o.algorithm&&"verify"===u&&"private"===o.type)throw TypeError(`${E.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(o.algorithm&&"encrypt"===u&&"private"===o.type)throw TypeError(`${E.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)};o.default=(r,o,u)=>{let p=r.startsWith("HS")||"dir"===r||r.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(r);p?symmetricTypeCheck(r,o):asymmetricTypeCheck(r,o,u)}},43395:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(18662);o.default=function(r){if(!(r instanceof Uint8Array)||r.length<8)throw new p.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}},26504:(r,o)=>{"use strict";function unusable(r,o="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${o} must be ${r}`)}function isAlgorithm(r,o){return r.name===o}function getHashLength(r){return parseInt(r.name.slice(4),10)}function checkUsage(r,o){if(o.length&&!o.some(o=>r.usages.includes(o))){let r="CryptoKey does not support this operation, its usages must include ";if(o.length>2){let u=o.pop();r+=`one of ${o.join(", ")}, or ${u}.`}else 2===o.length?r+=`one of ${o[0]} or ${o[1]}.`:r+=`${o[0]}.`;throw TypeError(r)}}Object.defineProperty(o,"__esModule",{value:!0}),o.checkEncCryptoKey=o.checkSigCryptoKey=void 0,o.checkSigCryptoKey=function(r,o,...u){switch(o){case"HS256":case"HS384":case"HS512":{if(!isAlgorithm(r.algorithm,"HMAC"))throw unusable("HMAC");let u=parseInt(o.slice(2),10),p=getHashLength(r.algorithm.hash);if(p!==u)throw unusable(`SHA-${u}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!isAlgorithm(r.algorithm,"RSASSA-PKCS1-v1_5"))throw unusable("RSASSA-PKCS1-v1_5");let u=parseInt(o.slice(2),10),p=getHashLength(r.algorithm.hash);if(p!==u)throw unusable(`SHA-${u}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!isAlgorithm(r.algorithm,"RSA-PSS"))throw unusable("RSA-PSS");let u=parseInt(o.slice(2),10),p=getHashLength(r.algorithm.hash);if(p!==u)throw unusable(`SHA-${u}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==r.algorithm.name&&"Ed448"!==r.algorithm.name)throw unusable("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!isAlgorithm(r.algorithm,"ECDSA"))throw unusable("ECDSA");let u=function(r){switch(r){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(o),p=r.algorithm.namedCurve;if(p!==u)throw unusable(u,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}checkUsage(r,u)},o.checkEncCryptoKey=function(r,o,...u){switch(o){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(r.algorithm,"AES-GCM"))throw unusable("AES-GCM");let u=parseInt(o.slice(1,4),10),p=r.algorithm.length;if(p!==u)throw unusable(u,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(r.algorithm,"AES-KW"))throw unusable("AES-KW");let u=parseInt(o.slice(1,4),10),p=r.algorithm.length;if(p!==u)throw unusable(u,"algorithm.length");break}case"ECDH":switch(r.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw unusable("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(r.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(r.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");let u=parseInt(o.slice(9),10)||1,p=getHashLength(r.algorithm.hash);if(p!==u)throw unusable(`SHA-${u}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}checkUsage(r,u)}},57571:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(13775),E=u(8514),A=u(85443),J=u(31892),W=u(28110),R=u(18662),I=u(65931),K=u(86194),U=u(59227),D=u(86935),z=u(5219);async function decryptKeyManagement(r,o,u,G,Y){switch((0,U.default)(r,o,"decrypt"),r){case"dir":if(void 0!==u)throw new R.JWEInvalid("Encountered unexpected JWE Encrypted Key");return o;case"ECDH-ES":if(void 0!==u)throw new R.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let A,J;if(!(0,D.default)(G.epk))throw new R.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!E.ecdhAllowed(o))throw new R.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let U=await (0,K.importJWK)(G.epk,r);if(void 0!==G.apu){if("string"!=typeof G.apu)throw new R.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{A=(0,W.decode)(G.apu)}catch{throw new R.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==G.apv){if("string"!=typeof G.apv)throw new R.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{J=(0,W.decode)(G.apv)}catch{throw new R.JWEInvalid("Failed to base64url decode the apv")}}let z=await E.deriveKey(U,o,"ECDH-ES"===r?G.enc:r,"ECDH-ES"===r?(0,I.bitLength)(G.enc):parseInt(r.slice(-5,-2),10),A,J);if("ECDH-ES"===r)return z;if(void 0===u)throw new R.JWEInvalid("JWE Encrypted Key missing");return(0,p.unwrap)(r.slice(-6),z,u)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===u)throw new R.JWEInvalid("JWE Encrypted Key missing");return(0,J.decrypt)(r,o,u);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let p;if(void 0===u)throw new R.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof G.p2c)throw new R.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let E=(null==Y?void 0:Y.maxPBES2Count)||1e4;if(G.p2c>E)throw new R.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof G.p2s)throw new R.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{p=(0,W.decode)(G.p2s)}catch{throw new R.JWEInvalid("Failed to base64url decode the p2s")}return(0,A.decrypt)(r,o,u,G.p2c,p)}case"A128KW":case"A192KW":case"A256KW":if(void 0===u)throw new R.JWEInvalid("JWE Encrypted Key missing");return(0,p.unwrap)(r,o,u);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let p,E;if(void 0===u)throw new R.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof G.iv)throw new R.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof G.tag)throw new R.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{p=(0,W.decode)(G.iv)}catch{throw new R.JWEInvalid("Failed to base64url decode the iv")}try{E=(0,W.decode)(G.tag)}catch{throw new R.JWEInvalid("Failed to base64url decode the tag")}return(0,z.unwrap)(r,o,u,p,E)}default:throw new R.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}o.default=decryptKeyManagement},1658:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(13775),E=u(8514),A=u(85443),J=u(31892),W=u(28110),R=u(65931),I=u(18662),K=u(13227),U=u(59227),D=u(5219);async function encryptKeyManagement(r,o,u,z,G={}){let Y,X,Z;switch((0,U.default)(r,u,"encrypt"),r){case"dir":Z=u;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!E.ecdhAllowed(u))throw new I.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:A,apv:J}=G,{epk:U}=G;U||(U=(await E.generateEpk(u)).privateKey);let{x:D,y:Q,crv:ee,kty:et}=await (0,K.exportJWK)(U),er=await E.deriveKey(u,U,"ECDH-ES"===r?o:r,"ECDH-ES"===r?(0,R.bitLength)(o):parseInt(r.slice(-5,-2),10),A,J);if(X={epk:{x:D,crv:ee,kty:et}},"EC"===et&&(X.epk.y=Q),A&&(X.apu=(0,W.encode)(A)),J&&(X.apv=(0,W.encode)(J)),"ECDH-ES"===r){Z=er;break}Z=z||(0,R.default)(o);let en=r.slice(-6);Y=await (0,p.wrap)(en,er,Z);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":Z=z||(0,R.default)(o),Y=await (0,J.encrypt)(r,u,Z);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{Z=z||(0,R.default)(o);let{p2c:p,p2s:E}=G;({encryptedKey:Y,...X}=await (0,A.encrypt)(r,u,Z,p,E));break}case"A128KW":case"A192KW":case"A256KW":Z=z||(0,R.default)(o),Y=await (0,p.wrap)(r,u,Z);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{Z=z||(0,R.default)(o);let{iv:p}=G;({encryptedKey:Y,...X}=await (0,D.wrap)(r,u,Z,p));break}default:throw new I.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:Z,encryptedKey:Y,parameters:X}}o.default=encryptKeyManagement},1641:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=r=>Math.floor(r.getTime()/1e3)},68503:(r,o)=>{"use strict";function message(r,o,...u){if(u.length>2){let o=u.pop();r+=`one of type ${u.join(", ")}, or ${o}.`}else 2===u.length?r+=`one of type ${u[0]} or ${u[1]}.`:r+=`of type ${u[0]}.`;return null==o?r+=` Received ${o}`:"function"==typeof o&&o.name?r+=` Received function ${o.name}`:"object"==typeof o&&null!=o&&o.constructor&&o.constructor.name&&(r+=` Received an instance of ${o.constructor.name}`),r}Object.defineProperty(o,"__esModule",{value:!0}),o.withAlg=void 0,o.default=(r,...o)=>message("Key must be ",r,...o),o.withAlg=function(r,o,...u){return message(`Key for the ${r} algorithm must be `,o,...u)}},44987:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=(...r)=>{let o;let u=r.filter(Boolean);if(0===u.length||1===u.length)return!0;for(let r of u){let u=Object.keys(r);if(!o||0===o.size){o=new Set(u);continue}for(let r of u){if(o.has(r))return!1;o.add(r)}}return!0}},86935:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){if(!("object"==typeof r&&null!==r)||"[object Object]"!==Object.prototype.toString.call(r))return!1;if(null===Object.getPrototypeOf(r))return!0;let o=r;for(;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(r)===o}},22687:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.bitLength=void 0;let p=u(18662),E=u(27227);function bitLength(r){switch(r){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new p.JOSENotSupported(`Unsupported JWE Algorithm: ${r}`)}}o.bitLength=bitLength,o.default=r=>(0,E.default)(new Uint8Array(bitLength(r)>>3))},62651:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(18662),E=u(9557),A=u(1641),J=u(93012),W=u(86935),normalizeTyp=r=>r.toLowerCase().replace(/^application\//,""),checkAudiencePresence=(r,o)=>"string"==typeof r?o.includes(r):!!Array.isArray(r)&&o.some(Set.prototype.has.bind(new Set(r)));o.default=(r,o,u={})=>{let R,I;let{typ:K}=u;if(K&&("string"!=typeof r.typ||normalizeTyp(r.typ)!==normalizeTyp(K)))throw new p.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");try{R=JSON.parse(E.decoder.decode(o))}catch{}if(!(0,W.default)(R))throw new p.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:U=[],issuer:D,subject:z,audience:G,maxTokenAge:Y}=u;for(let r of(void 0!==Y&&U.push("iat"),void 0!==G&&U.push("aud"),void 0!==z&&U.push("sub"),void 0!==D&&U.push("iss"),new Set(U.reverse())))if(!(r in R))throw new p.JWTClaimValidationFailed(`missing required "${r}" claim`,r,"missing");if(D&&!(Array.isArray(D)?D:[D]).includes(R.iss))throw new p.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(z&&R.sub!==z)throw new p.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(G&&!checkAudiencePresence(R.aud,"string"==typeof G?[G]:G))throw new p.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");switch(typeof u.clockTolerance){case"string":I=(0,J.default)(u.clockTolerance);break;case"number":I=u.clockTolerance;break;case"undefined":I=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:X}=u,Z=(0,A.default)(X||new Date);if((void 0!==R.iat||Y)&&"number"!=typeof R.iat)throw new p.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(void 0!==R.nbf){if("number"!=typeof R.nbf)throw new p.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(R.nbf>Z+I)throw new p.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==R.exp){if("number"!=typeof R.exp)throw new p.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(R.exp<=Z-I)throw new p.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(Y){let r=Z-R.iat,o="number"==typeof Y?Y:(0,J.default)(Y);if(r-I>o)throw new p.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(r<0-I)throw new p.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return R}},93012:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let u=604800,p=31557600,E=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;o.default=r=>{let o=E.exec(r);if(!o)throw TypeError("Invalid time period format");let A=parseFloat(o[1]),J=o[2].toLowerCase();switch(J){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(A);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*A);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*A);case"day":case"days":case"d":return Math.round(86400*A);case"week":case"weeks":case"w":return Math.round(A*u);default:return Math.round(A*p)}}},79854:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=(r,o)=>{if(void 0!==o&&(!Array.isArray(o)||o.some(r=>"string"!=typeof r)))throw TypeError(`"${r}" option must be an array of strings`);if(o)return new Set(o)}},64580:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(18662);o.default=function(r,o,u,E,A){let J;if(void 0!==A.crit&&void 0===E.crit)throw new r('"crit" (Critical) Header Parameter MUST be integrity protected');if(!E||void 0===E.crit)return new Set;if(!Array.isArray(E.crit)||0===E.crit.length||E.crit.some(r=>"string"!=typeof r||0===r.length))throw new r('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let W of(J=void 0!==u?new Map([...Object.entries(u),...o.entries()]):o,E.crit)){if(!J.has(W))throw new p.JOSENotSupported(`Extension Header Parameter "${W}" is not recognized`);if(void 0===A[W])throw new r(`Extension Header Parameter "${W}" is missing`);if(J.get(W)&&void 0===E[W])throw new r(`Extension Header Parameter "${W}" MUST be integrity protected`)}return new Set(E.crit)}},13775:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.unwrap=o.wrap=void 0;let p=u(14300),E=u(6113),A=u(18662),J=u(9557),W=u(70654),R=u(26504),I=u(63817),K=u(68503),U=u(81608),D=u(74049);function checkKeySize(r,o){if(r.symmetricKeySize<<3!==parseInt(o.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${o}`)}function ensureKeyObject(r,o,u){if((0,I.default)(r))return r;if(r instanceof Uint8Array)return(0,E.createSecretKey)(r);if((0,W.isCryptoKey)(r))return(0,R.checkEncCryptoKey)(r,o,u),E.KeyObject.from(r);throw TypeError((0,K.default)(r,...D.types,"Uint8Array"))}o.wrap=(r,o,u)=>{let W=parseInt(r.slice(1,4),10),R=`aes${W}-wrap`;if(!(0,U.default)(R))throw new A.JOSENotSupported(`alg ${r} is not supported either by JOSE or your javascript runtime`);let I=ensureKeyObject(o,r,"wrapKey");checkKeySize(I,r);let K=(0,E.createCipheriv)(R,I,p.Buffer.alloc(8,166));return(0,J.concat)(K.update(u),K.final())},o.unwrap=(r,o,u)=>{let W=parseInt(r.slice(1,4),10),R=`aes${W}-wrap`;if(!(0,U.default)(R))throw new A.JOSENotSupported(`alg ${r} is not supported either by JOSE or your javascript runtime`);let I=ensureKeyObject(o,r,"unwrapKey");checkKeySize(I,r);let K=(0,E.createDecipheriv)(R,I,p.Buffer.alloc(8,166));return(0,J.concat)(K.update(u),K.final())}},46521:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.fromX509=o.fromSPKI=o.fromPKCS8=o.toPKCS8=o.toSPKI=void 0;let p=u(6113),E=u(14300),A=u(70654),J=u(63817),W=u(68503),R=u(74049),genericExport=(r,o,u)=>{let E;if((0,A.isCryptoKey)(u)){if(!u.extractable)throw TypeError("CryptoKey is not extractable");E=p.KeyObject.from(u)}else if((0,J.default)(u))E=u;else throw TypeError((0,W.default)(u,...R.types));if(E.type!==r)throw TypeError(`key is not a ${r} key`);return E.export({format:"pem",type:o})};o.toSPKI=r=>genericExport("public","spki",r),o.toPKCS8=r=>genericExport("private","pkcs8",r),o.fromPKCS8=r=>(0,p.createPrivateKey)({key:E.Buffer.from(r.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),o.fromSPKI=r=>(0,p.createPublicKey)({key:E.Buffer.from(r.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),o.fromX509=r=>(0,p.createPublicKey)({key:r,type:"spki",format:"pem"})},59026:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=class{constructor(r){if(48!==r[0])throw TypeError();this.buffer=r,this.offset=1;let o=this.decodeLength();if(o!==r.length-this.offset)throw TypeError()}decodeLength(){let r=this.buffer[this.offset++];if(128&r){let o=-129&r;r=0;for(let u=0;u<o;u++)r=r<<8|this.buffer[this.offset+u];this.offset+=o}return r}unsignedInteger(){if(2!==this.buffer[this.offset++])throw TypeError();let r=this.decodeLength();0===this.buffer[this.offset]&&(this.offset++,r--);let o=this.buffer.slice(this.offset,this.offset+r);return this.offset+=r,o}end(){if(this.offset!==this.buffer.length)throw TypeError()}}},61559:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(14300),E=u(18662),A=p.Buffer.from([0]),J=p.Buffer.from([2]),W=p.Buffer.from([3]),R=p.Buffer.from([48]),I=p.Buffer.from([4]),encodeLength=r=>{if(r<128)return p.Buffer.from([r]);let o=p.Buffer.alloc(5);o.writeUInt32BE(r,1);let u=1;for(;0===o[u];)u++;return o[u-1]=128|5-u,o.slice(u-1)},K=new Map([["P-256",p.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",p.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",p.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",p.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",p.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",p.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",p.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",p.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",p.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]);o.default=class{constructor(){this.length=0,this.elements=[]}oidFor(r){let o=K.get(r);if(!o)throw new E.JOSENotSupported("Invalid or unsupported OID");this.elements.push(o),this.length+=o.length}zero(){this.elements.push(J,p.Buffer.from([1]),A),this.length+=3}one(){this.elements.push(J,p.Buffer.from([1]),p.Buffer.from([1])),this.length+=3}unsignedInteger(r){if(128&r[0]){let o=encodeLength(r.length+1);this.elements.push(J,o,A,r),this.length+=2+o.length+r.length}else{let o=0;for(;0===r[o]&&(128&r[o+1])==0;)o++;let u=encodeLength(r.length-o);this.elements.push(J,encodeLength(r.length-o),r.slice(o)),this.length+=1+u.length+r.length-o}}octStr(r){let o=encodeLength(r.length);this.elements.push(I,encodeLength(r.length),r),this.length+=1+o.length+r.length}bitStr(r){let o=encodeLength(r.length+1);this.elements.push(W,encodeLength(r.length+1),A,r),this.length+=1+o.length+r.length+1}add(r){this.elements.push(r),this.length+=r.length}end(r=R){let o=encodeLength(this.length);return p.Buffer.concat([r,o,...this.elements],1+o.length+this.length)}}},28110:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.decode=o.encode=o.encodeBase64=o.decodeBase64=void 0;let p=u(14300),E=u(9557);p.Buffer.isEncoding("base64url")?o.encode=r=>p.Buffer.from(r).toString("base64url"):o.encode=r=>p.Buffer.from(r).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),o.decodeBase64=r=>p.Buffer.from(r,"base64"),o.encodeBase64=r=>p.Buffer.from(r).toString("base64"),o.decode=r=>p.Buffer.from(function(r){let o=r;return o instanceof Uint8Array&&(o=E.decoder.decode(o)),o}(r),"base64")},53411:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113),E=u(9557);o.default=function(r,o,u,A,J,W){let R=(0,E.concat)(r,o,u,(0,E.uint64be)(r.length<<3)),I=(0,p.createHmac)(`sha${A}`,J);return I.update(R),I.digest().slice(0,W>>3)}},16811:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(18662),E=u(63817);o.default=(r,o)=>{let u;switch(r){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":u=parseInt(r.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":u=parseInt(r.slice(1,4),10);break;default:throw new p.JOSENotSupported(`Content Encryption Algorithm ${r} is not supported either by JOSE or your javascript runtime`)}if(o instanceof Uint8Array){let r=o.byteLength<<3;if(r!==u)throw new p.JWEInvalid(`Invalid Content Encryption Key length. Expected ${u} bits, got ${r} bits`);return}if((0,E.default)(o)&&"secret"===o.type){let r=o.symmetricKeySize<<3;if(r!==u)throw new p.JWEInvalid(`Invalid Content Encryption Key length. Expected ${u} bits, got ${r} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},92664:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.setModulusLength=o.weakMap=void 0,o.weakMap=new WeakMap;let getLength=(r,o)=>{let u=r.readUInt8(1);if((128&u)==0)return 0===o?u:getLength(r.subarray(2+u),o-1);let p=127&u;u=0;for(let o=0;o<p;o++){u<<=8;let p=r.readUInt8(2+o);u|=p}return 0===o?u:getLength(r.subarray(2+u),o-1)},getLengthOfSeqIndex=(r,o)=>{let u=r.readUInt8(1);return(128&u)==0?getLength(r.subarray(2),o):getLength(r.subarray(2+(127&u)),o)},getModulusLength=r=>{var u,p;if(o.weakMap.has(r))return o.weakMap.get(r);let E=null!==(p=null===(u=r.asymmetricKeyDetails)||void 0===u?void 0:u.modulusLength)&&void 0!==p?p:getLengthOfSeqIndex(r.export({format:"der",type:"pkcs1"}),"private"===r.type?1:0)-1<<3;return o.weakMap.set(r,E),E};o.setModulusLength=(r,u)=>{o.weakMap.set(r,u)},o.default=(r,o)=>{if(2048>getModulusLength(r))throw TypeError(`${o} requires key modulusLength to be 2048 bits or larger`)}},81608:(r,o,u)=>{"use strict";let p;Object.defineProperty(o,"__esModule",{value:!0});let E=u(6113);o.default=r=>(p||(p=new Set((0,E.getCiphers)())),p.has(r))},55197:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113),E=u(42321),A=u(16811),J=u(9557),W=u(18662),R=u(69035),I=u(53411),K=u(70654),U=u(26504),D=u(63817),z=u(68503),G=u(81608),Y=u(74049);o.default=(r,o,u,X,Z,Q)=>{let ee;if((0,K.isCryptoKey)(o))(0,U.checkEncCryptoKey)(o,r,"decrypt"),ee=p.KeyObject.from(o);else if(o instanceof Uint8Array||(0,D.default)(o))ee=o;else throw TypeError((0,z.default)(o,...Y.types,"Uint8Array"));switch((0,A.default)(r,ee),(0,E.default)(r,X),r){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(r,o,u,E,A,K){let U,z;let Y=parseInt(r.slice(1,4),10);(0,D.default)(o)&&(o=o.export());let X=o.subarray(Y>>3),Z=o.subarray(0,Y>>3),Q=parseInt(r.slice(-3),10),ee=`aes-${Y}-cbc`;if(!(0,G.default)(ee))throw new W.JOSENotSupported(`alg ${r} is not supported by your javascript runtime`);let et=(0,I.default)(K,E,u,Q,Z,Y);try{U=(0,R.default)(A,et)}catch{}if(!U)throw new W.JWEDecryptionFailed;try{let r=(0,p.createDecipheriv)(ee,X,E);z=(0,J.concat)(r.update(u),r.final())}catch{}if(!z)throw new W.JWEDecryptionFailed;return z}(r,ee,u,X,Z,Q);case"A128GCM":case"A192GCM":case"A256GCM":return function(r,o,u,E,A,J){let R=parseInt(r.slice(1,4),10),I=`aes-${R}-gcm`;if(!(0,G.default)(I))throw new W.JOSENotSupported(`alg ${r} is not supported by your javascript runtime`);try{let r=(0,p.createDecipheriv)(I,o,E,{authTagLength:16});r.setAuthTag(A),J.byteLength&&r.setAAD(J,{plaintextLength:u.length});let W=r.update(u);return r.final(),W}catch{throw new W.JWEDecryptionFailed}}(r,ee,u,X,Z,Q);default:throw new W.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},48177:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113);o.default=(r,o)=>(0,p.createHash)(r).update(o).digest()},6285:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(18662);o.default=function(r){switch(r){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new p.JOSENotSupported(`alg ${r} is not supported either by JOSE or your javascript runtime`)}}},8514:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.ecdhAllowed=o.generateEpk=o.deriveKey=void 0;let p=u(6113),E=u(73837),A=u(51755),J=u(9557),W=u(18662),R=u(70654),I=u(26504),K=u(63817),U=u(68503),D=u(74049),z=(0,E.promisify)(p.generateKeyPair);async function deriveKey(r,o,u,E,A=new Uint8Array(0),W=new Uint8Array(0)){let z,G;if((0,R.isCryptoKey)(r))(0,I.checkEncCryptoKey)(r,"ECDH"),z=p.KeyObject.from(r);else if((0,K.default)(r))z=r;else throw TypeError((0,U.default)(r,...D.types));if((0,R.isCryptoKey)(o))(0,I.checkEncCryptoKey)(o,"ECDH","deriveBits"),G=p.KeyObject.from(o);else if((0,K.default)(o))G=o;else throw TypeError((0,U.default)(o,...D.types));let Y=(0,J.concat)((0,J.lengthAndInput)(J.encoder.encode(u)),(0,J.lengthAndInput)(A),(0,J.lengthAndInput)(W),(0,J.uint32be)(E)),X=(0,p.diffieHellman)({privateKey:G,publicKey:z});return(0,J.concatKdf)(X,E,Y)}async function generateEpk(r){let o;if((0,R.isCryptoKey)(r))o=p.KeyObject.from(r);else if((0,K.default)(r))o=r;else throw TypeError((0,U.default)(r,...D.types));switch(o.asymmetricKeyType){case"x25519":return z("x25519");case"x448":return z("x448");case"ec":{let r=(0,A.default)(o);return z("ec",{namedCurve:r})}default:throw new W.JOSENotSupported("Invalid or unsupported EPK")}}o.deriveKey=deriveKey,o.generateEpk=generateEpk,o.ecdhAllowed=r=>["P-256","P-384","P-521","X25519","X448"].includes((0,A.default)(r))},5563:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113),E=u(42321),A=u(16811),J=u(9557),W=u(53411),R=u(70654),I=u(26504),K=u(63817),U=u(68503),D=u(18662),z=u(81608),G=u(74049);o.default=(r,o,u,Y,X)=>{let Z;if((0,R.isCryptoKey)(u))(0,I.checkEncCryptoKey)(u,r,"encrypt"),Z=p.KeyObject.from(u);else if(u instanceof Uint8Array||(0,K.default)(u))Z=u;else throw TypeError((0,U.default)(u,...G.types,"Uint8Array"));switch((0,A.default)(r,Z),(0,E.default)(r,Y),r){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(r,o,u,E,A){let R=parseInt(r.slice(1,4),10);(0,K.default)(u)&&(u=u.export());let I=u.subarray(R>>3),U=u.subarray(0,R>>3),G=`aes-${R}-cbc`;if(!(0,z.default)(G))throw new D.JOSENotSupported(`alg ${r} is not supported by your javascript runtime`);let Y=(0,p.createCipheriv)(G,I,E),X=(0,J.concat)(Y.update(o),Y.final()),Z=parseInt(r.slice(-3),10),Q=(0,W.default)(A,E,X,Z,U,R);return{ciphertext:X,tag:Q}}(r,o,Z,Y,X);case"A128GCM":case"A192GCM":case"A256GCM":return function(r,o,u,E,A){let J=parseInt(r.slice(1,4),10),W=`aes-${J}-gcm`;if(!(0,z.default)(W))throw new D.JOSENotSupported(`alg ${r} is not supported by your javascript runtime`);let R=(0,p.createCipheriv)(W,u,E,{authTagLength:16});A.byteLength&&R.setAAD(A,{plaintextLength:o.length});let I=R.update(o);R.final();let K=R.getAuthTag();return{ciphertext:I,tag:K}}(r,o,Z,Y,X);default:throw new D.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},70409:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(13685),E=u(95687),A=u(82361),J=u(18662),W=u(9557),fetchJwks=async(r,o,u)=>{let R;switch(r.protocol){case"https:":R=E.get;break;case"http:":R=p.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:I,headers:K}=u,U=R(r.href,{agent:I,timeout:o,headers:K}),[D]=await Promise.race([(0,A.once)(U,"response"),(0,A.once)(U,"timeout")]);if(!D)throw U.destroy(),new J.JWKSTimeout;if(200!==D.statusCode)throw new J.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let z=[];for await(let r of D)z.push(r);try{return JSON.parse(W.decoder.decode((0,W.concat)(...z)))}catch{throw new J.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};o.default=fetchJwks},71730:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.jwkImport=o.jwkExport=o.rsaPssParams=o.oneShotCallback=void 0;let[u,p]=process.versions.node.split(".").map(r=>parseInt(r,10));o.oneShotCallback=u>=16||15===u&&p>=13,o.rsaPssParams=!("electron"in process.versions)&&(u>=17||16===u&&p>=9),o.jwkExport=u>=16||15===u&&p>=9,o.jwkImport=u>=16||15===u&&p>=12},68714:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.generateKeyPair=o.generateSecret=void 0;let p=u(6113),E=u(73837),A=u(27227),J=u(92664),W=u(18662),R=(0,E.promisify)(p.generateKeyPair);async function generateSecret(r,o){let u;switch(r){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":u=parseInt(r.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":u=parseInt(r.slice(1,4),10);break;default:throw new W.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,p.createSecretKey)((0,A.default)(new Uint8Array(u>>3)))}async function generateKeyPair(r,o){var u,p;switch(r){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let r=null!==(u=null==o?void 0:o.modulusLength)&&void 0!==u?u:2048;if("number"!=typeof r||r<2048)throw new W.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let p=await R("rsa",{modulusLength:r,publicExponent:65537});return(0,J.setModulusLength)(p.privateKey,r),(0,J.setModulusLength)(p.publicKey,r),p}case"ES256":return R("ec",{namedCurve:"P-256"});case"ES256K":return R("ec",{namedCurve:"secp256k1"});case"ES384":return R("ec",{namedCurve:"P-384"});case"ES512":return R("ec",{namedCurve:"P-521"});case"EdDSA":switch(null==o?void 0:o.crv){case void 0:case"Ed25519":return R("ed25519");case"Ed448":return R("ed448");default:throw new W.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let E=null!==(p=null==o?void 0:o.crv)&&void 0!==p?p:"P-256";switch(E){case void 0:case"P-256":case"P-384":case"P-521":return R("ec",{namedCurve:E});case"X25519":return R("x25519");case"X448":return R("x448");default:throw new W.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new W.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}o.generateSecret=generateSecret,o.generateKeyPair=generateKeyPair},51755:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.setCurve=o.weakMap=void 0;let p=u(14300),E=u(6113),A=u(18662),J=u(70654),W=u(63817),R=u(68503),I=u(74049),K=p.Buffer.from([42,134,72,206,61,3,1,7]),U=p.Buffer.from([43,129,4,0,34]),D=p.Buffer.from([43,129,4,0,35]),z=p.Buffer.from([43,129,4,0,10]);o.weakMap=new WeakMap;let namedCurveToJOSE=r=>{switch(r){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new A.JOSENotSupported("Unsupported key curve for this operation")}},getNamedCurve=(r,u)=>{var p;let G;if((0,J.isCryptoKey)(r))G=E.KeyObject.from(r);else if((0,W.default)(r))G=r;else throw TypeError((0,R.default)(r,...I.types));if("secret"===G.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(G.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${G.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${G.asymmetricKeyType.slice(1)}`;case"ec":{if(o.weakMap.has(G))return o.weakMap.get(G);let r=null===(p=G.asymmetricKeyDetails)||void 0===p?void 0:p.namedCurve;if(r||"private"!==G.type){if(!r){let o=G.export({format:"der",type:"spki"}),u=o[1]<128?14:15,p=o[u],E=o.slice(u+1,u+1+p);if(E.equals(K))r="prime256v1";else if(E.equals(U))r="secp384r1";else if(E.equals(D))r="secp521r1";else if(E.equals(z))r="secp256k1";else throw new A.JOSENotSupported("Unsupported key curve for this operation")}}else r=getNamedCurve((0,E.createPublicKey)(G),!0);if(u)return r;let J=namedCurveToJOSE(r);return o.weakMap.set(G,J),J}default:throw TypeError("Invalid asymmetric key type for this operation")}};o.setCurve=function(r,u){o.weakMap.set(r,u)},o.default=getNamedCurve},5841:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113),E=u(70654),A=u(26504),J=u(68503),W=u(74049);o.default=function(r,o,u){if(o instanceof Uint8Array){if(!r.startsWith("HS"))throw TypeError((0,J.default)(o,...W.types));return(0,p.createSecretKey)(o)}if(o instanceof p.KeyObject)return o;if((0,E.isCryptoKey)(o))return(0,A.checkSigCryptoKey)(o,r,u),p.KeyObject.from(o);throw TypeError((0,J.default)(o,...W.types,"Uint8Array"))}},18459:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(18662);o.default=function(r){switch(r){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new p.JOSENotSupported(`alg ${r} is not supported either by JOSE or your javascript runtime`)}}},74049:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.types=void 0;let p=u(70654),E=u(63817);o.default=r=>(0,E.default)(r)||(0,p.isCryptoKey)(r);let A=["KeyObject"];o.types=A,(globalThis.CryptoKey||(null===p.default||void 0===p.default?void 0:p.default.CryptoKey))&&A.push("CryptoKey")},63817:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113),E=u(73837);o.default=E.types.isKeyObject?r=>E.types.isKeyObject(r):r=>null!=r&&r instanceof p.KeyObject},11799:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(14300),E=u(6113),A=u(28110),J=u(18662),W=u(51755),R=u(92664),I=u(61559),K=u(71730);o.default=r=>{if(K.jwkImport&&"oct"!==r.kty)return r.d?(0,E.createPrivateKey)({format:"jwk",key:r}):(0,E.createPublicKey)({format:"jwk",key:r});switch(r.kty){case"oct":return(0,E.createSecretKey)((0,A.decode)(r.k));case"RSA":{let o=new I.default,u=void 0!==r.d,A=p.Buffer.from(r.n,"base64"),J=p.Buffer.from(r.e,"base64");u?(o.zero(),o.unsignedInteger(A),o.unsignedInteger(J),o.unsignedInteger(p.Buffer.from(r.d,"base64")),o.unsignedInteger(p.Buffer.from(r.p,"base64")),o.unsignedInteger(p.Buffer.from(r.q,"base64")),o.unsignedInteger(p.Buffer.from(r.dp,"base64")),o.unsignedInteger(p.Buffer.from(r.dq,"base64")),o.unsignedInteger(p.Buffer.from(r.qi,"base64"))):(o.unsignedInteger(A),o.unsignedInteger(J));let W=o.end(),K={key:W,format:"der",type:"pkcs1"},U=u?(0,E.createPrivateKey)(K):(0,E.createPublicKey)(K);return(0,R.setModulusLength)(U,A.length<<3),U}case"EC":{let o=new I.default,u=void 0!==r.d,A=p.Buffer.concat([p.Buffer.alloc(1,4),p.Buffer.from(r.x,"base64"),p.Buffer.from(r.y,"base64")]);if(u){o.zero();let u=new I.default;u.oidFor("ecPublicKey"),u.oidFor(r.crv),o.add(u.end());let J=new I.default;J.one(),J.octStr(p.Buffer.from(r.d,"base64"));let R=new I.default;R.bitStr(A);let K=R.end(p.Buffer.from([161]));J.add(K);let U=J.end(),D=new I.default;D.add(U);let z=D.end(p.Buffer.from([4]));o.add(z);let G=o.end(),Y=(0,E.createPrivateKey)({key:G,format:"der",type:"pkcs8"});return(0,W.setCurve)(Y,r.crv),Y}let J=new I.default;J.oidFor("ecPublicKey"),J.oidFor(r.crv),o.add(J.end()),o.bitStr(A);let R=o.end(),K=(0,E.createPublicKey)({key:R,format:"der",type:"spki"});return(0,W.setCurve)(K,r.crv),K}case"OKP":{let o=new I.default,u=void 0!==r.d;if(u){o.zero();let u=new I.default;u.oidFor(r.crv),o.add(u.end());let A=new I.default;A.octStr(p.Buffer.from(r.d,"base64"));let J=A.end(p.Buffer.from([4]));o.add(J);let W=o.end();return(0,E.createPrivateKey)({key:W,format:"der",type:"pkcs8"})}let A=new I.default;A.oidFor(r.crv),o.add(A.end()),o.bitStr(p.Buffer.from(r.x,"base64"));let J=o.end();return(0,E.createPublicKey)({key:J,format:"der",type:"spki"})}default:throw new J.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}}},179:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113),E=u(28110),A=u(59026),J=u(18662),W=u(51755),R=u(70654),I=u(63817),K=u(68503),U=u(74049),D=u(71730),keyToJWK=r=>{let o;if((0,R.isCryptoKey)(r)){if(!r.extractable)throw TypeError("CryptoKey is not extractable");o=p.KeyObject.from(r)}else if((0,I.default)(r))o=r;else if(r instanceof Uint8Array)return{kty:"oct",k:(0,E.encode)(r)};else throw TypeError((0,K.default)(r,...U.types,"Uint8Array"));if(D.jwkExport){if("secret"!==o.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(o.asymmetricKeyType))throw new J.JOSENotSupported("Unsupported key asymmetricKeyType");return o.export({format:"jwk"})}switch(o.type){case"secret":return{kty:"oct",k:(0,E.encode)(o.export())};case"private":case"public":switch(o.asymmetricKeyType){case"rsa":{let r;let u=o.export({format:"der",type:"pkcs1"}),p=new A.default(u);"private"===o.type&&p.unsignedInteger();let J=(0,E.encode)(p.unsignedInteger()),W=(0,E.encode)(p.unsignedInteger());return"private"===o.type&&(r={d:(0,E.encode)(p.unsignedInteger()),p:(0,E.encode)(p.unsignedInteger()),q:(0,E.encode)(p.unsignedInteger()),dp:(0,E.encode)(p.unsignedInteger()),dq:(0,E.encode)(p.unsignedInteger()),qi:(0,E.encode)(p.unsignedInteger())}),p.end(),{kty:"RSA",n:J,e:W,...r}}case"ec":{let r,u,A;let R=(0,W.default)(o);switch(R){case"secp256k1":r=64,u=33,A=-1;break;case"P-256":r=64,u=36,A=-1;break;case"P-384":r=96,u=35,A=-3;break;case"P-521":r=132,u=35,A=-3;break;default:throw new J.JOSENotSupported("Unsupported curve")}if("public"===o.type){let u=o.export({type:"spki",format:"der"});return{kty:"EC",crv:R,x:(0,E.encode)(u.subarray(-r,-r/2)),y:(0,E.encode)(u.subarray(-r/2))}}let I=o.export({type:"pkcs8",format:"der"});return I.length<100&&(u+=A),{...keyToJWK((0,p.createPublicKey)(o)),d:(0,E.encode)(I.subarray(u,u+r/2))}}case"ed25519":case"x25519":{let r=(0,W.default)(o);if("public"===o.type){let u=o.export({type:"spki",format:"der"});return{kty:"OKP",crv:r,x:(0,E.encode)(u.subarray(-32))}}let u=o.export({type:"pkcs8",format:"der"});return{...keyToJWK((0,p.createPublicKey)(o)),d:(0,E.encode)(u.subarray(-32))}}case"ed448":case"x448":{let r=(0,W.default)(o);if("public"===o.type){let u=o.export({type:"spki",format:"der"});return{kty:"OKP",crv:r,x:(0,E.encode)(u.subarray("Ed448"===r?-57:-56))}}let u=o.export({type:"pkcs8",format:"der"});return{...keyToJWK((0,p.createPublicKey)(o)),d:(0,E.encode)(u.subarray("Ed448"===r?-57:-56))}}default:throw new J.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new J.JOSENotSupported("Unsupported key type")}};o.default=keyToJWK},47244:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113),E=u(51755),A=u(18662),J=u(92664),W=u(71730),R={padding:p.constants.RSA_PKCS1_PSS_PADDING,saltLength:p.constants.RSA_PSS_SALTLEN_DIGEST},I=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);o.default=function(r,o){switch(r){case"EdDSA":if(!["ed25519","ed448"].includes(o.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return o;case"RS256":case"RS384":case"RS512":if("rsa"!==o.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,J.default)(o,r),o;case W.rsaPssParams&&"PS256":case W.rsaPssParams&&"PS384":case W.rsaPssParams&&"PS512":if("rsa-pss"===o.asymmetricKeyType){let{hashAlgorithm:u,mgf1HashAlgorithm:p,saltLength:E}=o.asymmetricKeyDetails,A=parseInt(r.slice(-3),10);if(void 0!==u&&(u!==`sha${A}`||p!==u))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${r}`);if(void 0!==E&&E>A>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${r}`)}else if("rsa"!==o.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,J.default)(o,r),{key:o,...R};case!W.rsaPssParams&&"PS256":case!W.rsaPssParams&&"PS384":case!W.rsaPssParams&&"PS512":if("rsa"!==o.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,J.default)(o,r),{key:o,...R};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==o.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let u=(0,E.default)(o),p=I.get(r);if(u!==p)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${p}, got ${u}`);return{dsaEncoding:"ieee-p1363",key:o}}default:throw new A.JOSENotSupported(`alg ${r} is not supported either by JOSE or your javascript runtime`)}}},85443:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.decrypt=o.encrypt=void 0;let p=u(73837),E=u(6113),A=u(27227),J=u(9557),W=u(28110),R=u(13775),I=u(43395),K=u(70654),U=u(26504),D=u(63817),z=u(68503),G=u(74049),Y=(0,p.promisify)(E.pbkdf2);function getPassword(r,o){if((0,D.default)(r))return r.export();if(r instanceof Uint8Array)return r;if((0,K.isCryptoKey)(r))return(0,U.checkEncCryptoKey)(r,o,"deriveBits","deriveKey"),E.KeyObject.from(r).export();throw TypeError((0,z.default)(r,...G.types,"Uint8Array"))}let encrypt=async(r,o,u,p=2048,E=(0,A.default)(new Uint8Array(16)))=>{(0,I.default)(E);let K=(0,J.p2s)(r,E),U=parseInt(r.slice(13,16),10)>>3,D=getPassword(o,r),z=await Y(D,K,p,U,`sha${r.slice(8,11)}`),G=await (0,R.wrap)(r.slice(-6),z,u);return{encryptedKey:G,p2c:p,p2s:(0,W.encode)(E)}};o.encrypt=encrypt;let decrypt=async(r,o,u,p,E)=>{(0,I.default)(E);let A=(0,J.p2s)(r,E),W=parseInt(r.slice(13,16),10)>>3,K=getPassword(o,r),U=await Y(K,A,p,W,`sha${r.slice(8,11)}`);return(0,R.unwrap)(r.slice(-6),U,u)};o.decrypt=decrypt},27227:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var p=u(6113);Object.defineProperty(o,"default",{enumerable:!0,get:function(){return p.randomFillSync}})},31892:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.decrypt=o.encrypt=void 0;let p=u(6113),E=u(92664),A=u(70654),J=u(26504),W=u(63817),R=u(68503),I=u(74049),checkKey=(r,o)=>{if("rsa"!==r.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,E.default)(r,o)},resolvePadding=r=>{switch(r){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return p.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return p.constants.RSA_PKCS1_PADDING;default:return}},resolveOaepHash=r=>{switch(r){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function ensureKeyObject(r,o,...u){if((0,W.default)(r))return r;if((0,A.isCryptoKey)(r))return(0,J.checkEncCryptoKey)(r,o,...u),p.KeyObject.from(r);throw TypeError((0,R.default)(r,...I.types))}o.encrypt=(r,o,u)=>{let E=resolvePadding(r),A=resolveOaepHash(r),J=ensureKeyObject(o,r,"wrapKey","encrypt");return checkKey(J,r),(0,p.publicEncrypt)({key:J,oaepHash:A,padding:E},u)},o.decrypt=(r,o,u)=>{let E=resolvePadding(r),A=resolveOaepHash(r),J=ensureKeyObject(o,r,"unwrapKey","decrypt");return checkKey(J,r),(0,p.privateDecrypt)({key:J,oaepHash:A,padding:E},u)}},83601:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default="node:crypto"},31314:(r,o,u)=>{"use strict";let p;Object.defineProperty(o,"__esModule",{value:!0});let E=u(6113),A=u(73837),J=u(6285),W=u(18459),R=u(47244),I=u(5841);p=E.sign.length>3?(0,A.promisify)(E.sign):E.sign;let sign=async(r,o,u)=>{let A=(0,I.default)(r,o,"sign");if(r.startsWith("HS")){let o=E.createHmac((0,W.default)(r),A);return o.update(u),o.digest()}return p((0,J.default)(r),u,(0,R.default)(r,A))};o.default=sign},69035:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(6113),E=p.timingSafeEqual;o.default=E},37281:(r,o,u)=>{"use strict";let p;Object.defineProperty(o,"__esModule",{value:!0});let E=u(6113),A=u(73837),J=u(6285),W=u(47244),R=u(31314),I=u(5841),K=u(71730);p=E.verify.length>4&&K.oneShotCallback?(0,A.promisify)(E.verify):E.verify;let verify=async(r,o,u,A)=>{let K=(0,I.default)(r,o,"verify");if(r.startsWith("HS")){let o=await (0,R.default)(r,K,A);try{return E.timingSafeEqual(u,o)}catch{return!1}}let U=(0,J.default)(r),D=(0,W.default)(r,K);try{return await p(U,A,D,u)}catch{return!1}};o.default=verify},70654:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.isCryptoKey=void 0;let p=u(6113),E=u(73837),A=p.webcrypto;o.default=A,o.isCryptoKey=E.types.isCryptoKey?r=>E.types.isCryptoKey(r):r=>!1},49352:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.deflate=o.inflate=void 0;let p=u(73837),E=u(59796),A=u(18662),J=(0,p.promisify)(E.inflateRaw),W=(0,p.promisify)(E.deflateRaw);o.inflate=r=>J(r,{maxOutputLength:25e4}).catch(()=>{throw new A.JWEDecompressionFailed}),o.deflate=r=>W(r)},26673:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.decode=o.encode=void 0;let p=u(28110);o.encode=p.encode,o.decode=p.decode},10070:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.decodeJwt=void 0;let p=u(26673),E=u(9557),A=u(86935),J=u(18662);o.decodeJwt=function(r){let o,u;if("string"!=typeof r)throw new J.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:W,length:R}=r.split(".");if(5===R)throw new J.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==R)throw new J.JWTInvalid("Invalid JWT");if(!W)throw new J.JWTInvalid("JWTs must contain a payload");try{o=(0,p.decode)(W)}catch{throw new J.JWTInvalid("Failed to base64url decode the payload")}try{u=JSON.parse(E.decoder.decode(o))}catch{throw new J.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,A.default)(u))throw new J.JWTInvalid("Invalid JWT Claims Set");return u}},81315:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.decodeProtectedHeader=void 0;let p=u(26673),E=u(9557),A=u(86935);o.decodeProtectedHeader=function(r){let o;if("string"==typeof r){let u=r.split(".");(3===u.length||5===u.length)&&([o]=u)}else if("object"==typeof r&&r){if("protected"in r)o=r.protected;else throw TypeError("Token does not contain a Protected Header")}try{if("string"!=typeof o||!o)throw Error();let r=JSON.parse(E.decoder.decode((0,p.decode)(o)));if(!(0,A.default)(r))throw Error();return r}catch{throw TypeError("Invalid Token or Protected Header formatting")}}},18662:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.JWSSignatureVerificationFailed=o.JWKSTimeout=o.JWKSMultipleMatchingKeys=o.JWKSNoMatchingKey=o.JWKSInvalid=o.JWKInvalid=o.JWTInvalid=o.JWSInvalid=o.JWEInvalid=o.JWEDecompressionFailed=o.JWEDecryptionFailed=o.JOSENotSupported=o.JOSEAlgNotAllowed=o.JWTExpired=o.JWTClaimValidationFailed=o.JOSEError=void 0;let JOSEError=class JOSEError extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(r){var o;super(r),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(o=Error.captureStackTrace)||void 0===o||o.call(Error,this,this.constructor)}};o.JOSEError=JOSEError,o.JWTClaimValidationFailed=class extends JOSEError{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(r,o="unspecified",u="unspecified"){super(r),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=o,this.reason=u}},o.JWTExpired=class extends JOSEError{static get code(){return"ERR_JWT_EXPIRED"}constructor(r,o="unspecified",u="unspecified"){super(r),this.code="ERR_JWT_EXPIRED",this.claim=o,this.reason=u}},o.JOSEAlgNotAllowed=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}},o.JOSENotSupported=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}},o.JWEDecryptionFailed=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}},o.JWEDecompressionFailed=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}},o.JWEInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}},o.JWSInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}},o.JWTInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}},o.JWKInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}},o.JWKSInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}},o.JWKSNoMatchingKey=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}},o.JWKSMultipleMatchingKeys=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}},Symbol.asyncIterator,o.JWKSTimeout=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}},o.JWSSignatureVerificationFailed=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}},16628:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let p=u(83601);o.default=p.default},27523:(r,o,u)=>{"use strict";let p=u(57242),E=Symbol("max"),A=Symbol("length"),J=Symbol("lengthCalculator"),W=Symbol("allowStale"),R=Symbol("maxAge"),I=Symbol("dispose"),K=Symbol("noDisposeOnSet"),U=Symbol("lruList"),D=Symbol("cache"),z=Symbol("updateAgeOnGet"),naiveLength=()=>1,get=(r,o,u)=>{let p=r[D].get(o);if(p){let o=p.value;if(isStale(r,o)){if(del(r,p),!r[W])return}else u&&(r[z]&&(p.value.now=Date.now()),r[U].unshiftNode(p));return o.value}},isStale=(r,o)=>{if(!o||!o.maxAge&&!r[R])return!1;let u=Date.now()-o.now;return o.maxAge?u>o.maxAge:r[R]&&u>r[R]},trim=r=>{if(r[A]>r[E])for(let o=r[U].tail;r[A]>r[E]&&null!==o;){let u=o.prev;del(r,o),o=u}},del=(r,o)=>{if(o){let u=o.value;r[I]&&r[I](u.key,u.value),r[A]-=u.length,r[D].delete(u.key),r[U].removeNode(o)}};let Entry=class Entry{constructor(r,o,u,p,E){this.key=r,this.value=o,this.length=u,this.now=p,this.maxAge=E||0}};let forEachStep=(r,o,u,p)=>{let E=u.value;isStale(r,E)&&(del(r,u),r[W]||(E=void 0)),E&&o.call(p,E.value,E.key,r)};r.exports=class{constructor(r){if("number"==typeof r&&(r={max:r}),r||(r={}),r.max&&("number"!=typeof r.max||r.max<0))throw TypeError("max must be a non-negative number");this[E]=r.max||1/0;let o=r.length||naiveLength;if(this[J]="function"!=typeof o?naiveLength:o,this[W]=r.stale||!1,r.maxAge&&"number"!=typeof r.maxAge)throw TypeError("maxAge must be a number");this[R]=r.maxAge||0,this[I]=r.dispose,this[K]=r.noDisposeOnSet||!1,this[z]=r.updateAgeOnGet||!1,this.reset()}set max(r){if("number"!=typeof r||r<0)throw TypeError("max must be a non-negative number");this[E]=r||1/0,trim(this)}get max(){return this[E]}set allowStale(r){this[W]=!!r}get allowStale(){return this[W]}set maxAge(r){if("number"!=typeof r)throw TypeError("maxAge must be a non-negative number");this[R]=r,trim(this)}get maxAge(){return this[R]}set lengthCalculator(r){"function"!=typeof r&&(r=naiveLength),r!==this[J]&&(this[J]=r,this[A]=0,this[U].forEach(r=>{r.length=this[J](r.value,r.key),this[A]+=r.length})),trim(this)}get lengthCalculator(){return this[J]}get length(){return this[A]}get itemCount(){return this[U].length}rforEach(r,o){o=o||this;for(let u=this[U].tail;null!==u;){let p=u.prev;forEachStep(this,r,u,o),u=p}}forEach(r,o){o=o||this;for(let u=this[U].head;null!==u;){let p=u.next;forEachStep(this,r,u,o),u=p}}keys(){return this[U].toArray().map(r=>r.key)}values(){return this[U].toArray().map(r=>r.value)}reset(){this[I]&&this[U]&&this[U].length&&this[U].forEach(r=>this[I](r.key,r.value)),this[D]=new Map,this[U]=new p,this[A]=0}dump(){return this[U].map(r=>!isStale(this,r)&&{k:r.key,v:r.value,e:r.now+(r.maxAge||0)}).toArray().filter(r=>r)}dumpLru(){return this[U]}set(r,o,u){if((u=u||this[R])&&"number"!=typeof u)throw TypeError("maxAge must be a number");let p=u?Date.now():0,W=this[J](o,r);if(this[D].has(r)){if(W>this[E])return del(this,this[D].get(r)),!1;let J=this[D].get(r),R=J.value;return this[I]&&!this[K]&&this[I](r,R.value),R.now=p,R.maxAge=u,R.value=o,this[A]+=W-R.length,R.length=W,this.get(r),trim(this),!0}let z=new Entry(r,o,W,p,u);return z.length>this[E]?(this[I]&&this[I](r,o),!1):(this[A]+=z.length,this[U].unshift(z),this[D].set(r,this[U].head),trim(this),!0)}has(r){if(!this[D].has(r))return!1;let o=this[D].get(r).value;return!isStale(this,o)}get(r){return get(this,r,!0)}peek(r){return get(this,r,!1)}pop(){let r=this[U].tail;return r?(del(this,r),r.value):null}del(r){del(this,this[D].get(r))}load(r){this.reset();let o=Date.now();for(let u=r.length-1;u>=0;u--){let p=r[u],E=p.e||0;if(0===E)this.set(p.k,p.v);else{let r=E-o;r>0&&this.set(p.k,p.v,r)}}}prune(){this[D].forEach((r,o)=>get(this,o,!1))}}},32133:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),o.UnsupportedStrategy=o.UnknownError=o.OAuthCallbackError=o.MissingSecret=o.MissingAuthorize=o.MissingAdapterMethods=o.MissingAdapter=o.MissingAPIRoute=o.InvalidCallbackUrl=o.AccountNotLinkedError=void 0,o.adapterErrorHandler=function(r,o){if(r)return Object.keys(r).reduce(function(u,p){return u[p]=(0,A.default)(E.default.mark(function _callee2(){var u,A,J,W,R,I=arguments;return E.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:for(E.prev=0,A=Array(u=I.length),J=0;J<u;J++)A[J]=I[J];return o.debug("adapter_".concat(p),{args:A}),W=r[p],E.next=6,W.apply(void 0,A);case 6:return E.abrupt("return",E.sent);case 9:throw E.prev=9,E.t0=E.catch(0),o.error("adapter_error_".concat(p),E.t0),(R=new z(E.t0)).name="".concat(capitalize(p),"Error"),R;case 15:case"end":return E.stop()}},_callee2,null,[[0,9]])})),u},{})},o.capitalize=capitalize,o.eventsErrorHandler=function(r,o){return Object.keys(r).reduce(function(u,p){return u[p]=(0,A.default)(E.default.mark(function _callee(){var u,A=arguments;return E.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,u=r[p],E.next=4,u.apply(void 0,A);case 4:return E.abrupt("return",E.sent);case 7:E.prev=7,E.t0=E.catch(0),o.error("".concat(upperSnake(p),"_EVENT_ERROR"),E.t0);case 10:case"end":return E.stop()}},_callee,null,[[0,7]])})),u},{})},o.upperSnake=upperSnake;var E=p(u(21264)),A=p(u(48824)),J=p(u(92174)),W=p(u(36707)),R=p(u(91390)),I=p(u(17257)),K=p(u(51327)),U=p(u(52603)),D=p(u(49903));function _callSuper(r,o,u){return o=(0,K.default)(o),(0,I.default)(r,_isNativeReflectConstruct()?Reflect.construct(o,u||[],(0,K.default)(r).constructor):o.apply(r,u))}function _isNativeReflectConstruct(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(r){}return(_isNativeReflectConstruct=function(){return!!r})()}var z=o.UnknownError=function(r){function UnknownError(r){var o,u;return(0,W.default)(this,UnknownError),(u=_callSuper(this,UnknownError,[null!==(o=null==r?void 0:r.message)&&void 0!==o?o:r])).name="UnknownError",u.code=r.code,r instanceof Error&&(u.stack=r.stack),u}return(0,U.default)(UnknownError,r),(0,R.default)(UnknownError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,D.default)(Error));function upperSnake(r){return r.replace(/([A-Z])/g,"_$1").toUpperCase()}function capitalize(r){return"".concat(r[0].toUpperCase()).concat(r.slice(1))}o.OAuthCallbackError=function(r){function OAuthCallbackError(){var r;(0,W.default)(this,OAuthCallbackError);for(var o=arguments.length,u=Array(o),p=0;p<o;p++)u[p]=arguments[p];return r=_callSuper(this,OAuthCallbackError,[].concat(u)),(0,J.default)(r,"name","OAuthCallbackError"),r}return(0,U.default)(OAuthCallbackError,r),(0,R.default)(OAuthCallbackError)}(z),o.AccountNotLinkedError=function(r){function AccountNotLinkedError(){var r;(0,W.default)(this,AccountNotLinkedError);for(var o=arguments.length,u=Array(o),p=0;p<o;p++)u[p]=arguments[p];return r=_callSuper(this,AccountNotLinkedError,[].concat(u)),(0,J.default)(r,"name","AccountNotLinkedError"),r}return(0,U.default)(AccountNotLinkedError,r),(0,R.default)(AccountNotLinkedError)}(z),o.MissingAPIRoute=function(r){function MissingAPIRoute(){var r;(0,W.default)(this,MissingAPIRoute);for(var o=arguments.length,u=Array(o),p=0;p<o;p++)u[p]=arguments[p];return r=_callSuper(this,MissingAPIRoute,[].concat(u)),(0,J.default)(r,"name","MissingAPIRouteError"),(0,J.default)(r,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),r}return(0,U.default)(MissingAPIRoute,r),(0,R.default)(MissingAPIRoute)}(z),o.MissingSecret=function(r){function MissingSecret(){var r;(0,W.default)(this,MissingSecret);for(var o=arguments.length,u=Array(o),p=0;p<o;p++)u[p]=arguments[p];return r=_callSuper(this,MissingSecret,[].concat(u)),(0,J.default)(r,"name","MissingSecretError"),(0,J.default)(r,"code","NO_SECRET"),r}return(0,U.default)(MissingSecret,r),(0,R.default)(MissingSecret)}(z),o.MissingAuthorize=function(r){function MissingAuthorize(){var r;(0,W.default)(this,MissingAuthorize);for(var o=arguments.length,u=Array(o),p=0;p<o;p++)u[p]=arguments[p];return r=_callSuper(this,MissingAuthorize,[].concat(u)),(0,J.default)(r,"name","MissingAuthorizeError"),(0,J.default)(r,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),r}return(0,U.default)(MissingAuthorize,r),(0,R.default)(MissingAuthorize)}(z),o.MissingAdapter=function(r){function MissingAdapter(){var r;(0,W.default)(this,MissingAdapter);for(var o=arguments.length,u=Array(o),p=0;p<o;p++)u[p]=arguments[p];return r=_callSuper(this,MissingAdapter,[].concat(u)),(0,J.default)(r,"name","MissingAdapterError"),(0,J.default)(r,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),r}return(0,U.default)(MissingAdapter,r),(0,R.default)(MissingAdapter)}(z),o.MissingAdapterMethods=function(r){function MissingAdapterMethods(){var r;(0,W.default)(this,MissingAdapterMethods);for(var o=arguments.length,u=Array(o),p=0;p<o;p++)u[p]=arguments[p];return r=_callSuper(this,MissingAdapterMethods,[].concat(u)),(0,J.default)(r,"name","MissingAdapterMethodsError"),(0,J.default)(r,"code","MISSING_ADAPTER_METHODS_ERROR"),r}return(0,U.default)(MissingAdapterMethods,r),(0,R.default)(MissingAdapterMethods)}(z),o.UnsupportedStrategy=function(r){function UnsupportedStrategy(){var r;(0,W.default)(this,UnsupportedStrategy);for(var o=arguments.length,u=Array(o),p=0;p<o;p++)u[p]=arguments[p];return r=_callSuper(this,UnsupportedStrategy,[].concat(u)),(0,J.default)(r,"name","UnsupportedStrategyError"),(0,J.default)(r,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),r}return(0,U.default)(UnsupportedStrategy,r),(0,R.default)(UnsupportedStrategy)}(z),o.InvalidCallbackUrl=function(r){function InvalidCallbackUrl(){var r;(0,W.default)(this,InvalidCallbackUrl);for(var o=arguments.length,u=Array(o),p=0;p<o;p++)u[p]=arguments[p];return r=_callSuper(this,InvalidCallbackUrl,[].concat(u)),(0,J.default)(r,"name","InvalidCallbackUrl"),(0,J.default)(r,"code","INVALID_CALLBACK_URL_ERROR"),r}return(0,U.default)(InvalidCallbackUrl,r),(0,R.default)(InvalidCallbackUrl)}(z)},80749:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),o.AuthHandler=AuthHandler;var E=_interopRequireWildcard(u(20546)),A=u(72538),J=_interopRequireWildcard(u(93693)),W=p(u(53450)),R=u(22563),I=u(27985),K=u(50358),U=u(95011);function _getRequireWildcardCache(r){if("function"!=typeof WeakMap)return null;var o=new WeakMap,u=new WeakMap;return(_getRequireWildcardCache=function(r){return r?u:o})(r)}function _interopRequireWildcard(r,o){if(!o&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var u=_getRequireWildcardCache(o);if(u&&u.has(r))return u.get(r);var p={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in r)if("default"!==A&&({}).hasOwnProperty.call(r,A)){var J=E?Object.getOwnPropertyDescriptor(r,A):null;J&&(J.get||J.set)?Object.defineProperty(p,A,J):p[A]=r[A]}return p.default=r,u&&u.set(r,p),p}async function getBody(r){try{return await r.json()}catch(r){}}async function toInternalRequest(r){var o,u,p,E;if(r instanceof Request){let o=new URL(r.url),J=o.pathname.split("/").slice(3),W=Object.fromEntries(r.headers),R=Object.fromEntries(o.searchParams);return R.nextauth=J,{action:J[0],method:r.method,headers:W,body:await getBody(r),cookies:(0,U.parse)(null!==(u=r.headers.get("cookie"))&&void 0!==u?u:""),providerId:J[1],error:null!==(p=o.searchParams.get("error"))&&void 0!==p?p:J[1],origin:(0,A.detectOrigin)(null!==(E=W["x-forwarded-host"])&&void 0!==E?E:W.host,W["x-forwarded-proto"]),query:R}}let{headers:J}=r,W=null!==(o=null==J?void 0:J["x-forwarded-host"])&&void 0!==o?o:null==J?void 0:J.host;return r.origin=(0,A.detectOrigin)(W,null==J?void 0:J["x-forwarded-proto"]),r}async function AuthHandler(r){var o,u,p,A,U,D,z;let{options:G,req:Y}=r,X=await toInternalRequest(Y);(0,E.setLogger)(G.logger,G.debug);let Z=(0,I.assertConfig)({options:G,req:X});if(Array.isArray(Z))Z.forEach(E.default.warn);else if(Z instanceof Error){if(E.default.error(Z.code,Z),!["signin","signout","error","verify-request"].includes(X.action)||"GET"!==X.method)return{status:500,headers:[{key:"Content-Type",value:"application/json"}],body:{message:"There is a problem with the server configuration. Check the server logs for more information."}};let{pages:r,theme:o}=G,u=(null==r?void 0:r.error)&&(null===(U=X.query)||void 0===U||null===(U=U.callbackUrl)||void 0===U?void 0:U.startsWith(r.error));if(!(null!=r&&r.error)||u){u&&E.default.error("AUTH_ON_ERROR_PAGE_ERROR",Error(`The error page ${null==r?void 0:r.error} should not require authentication`));let p=(0,W.default)({theme:o});return p.error({error:"configuration"})}return{redirect:`${r.error}?error=Configuration`}}let{action:Q,providerId:ee,error:et,method:er="GET"}=X,{options:en,cookies:ei}=await (0,R.init)({authOptions:G,action:Q,providerId:ee,origin:X.origin,callbackUrl:null!==(o=null===(u=X.body)||void 0===u?void 0:u.callbackUrl)&&void 0!==o?o:null===(p=X.query)||void 0===p?void 0:p.callbackUrl,csrfToken:null===(A=X.body)||void 0===A?void 0:A.csrfToken,cookies:X.cookies,isPost:"POST"===er}),eo=new K.SessionStore(en.cookies.sessionToken,X,en.logger);if("GET"===er){let r=(0,W.default)({...en,query:X.query,cookies:ei}),{pages:o}=en;switch(Q){case"providers":return await J.providers(en.providers);case"session":{let r=await J.session({options:en,sessionStore:eo});return r.cookies&&ei.push(...r.cookies),{...r,cookies:ei}}case"csrf":return{headers:[{key:"Content-Type",value:"application/json"}],body:{csrfToken:en.csrfToken},cookies:ei};case"signin":if(o.signIn){let r=`${o.signIn}${o.signIn.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(en.callbackUrl)}`;return et&&(r=`${r}&error=${encodeURIComponent(et)}`),{redirect:r,cookies:ei}}return r.signin();case"signout":if(o.signOut)return{redirect:o.signOut,cookies:ei};return r.signout();case"callback":if(en.provider){let r=await J.callback({body:X.body,query:X.query,headers:X.headers,cookies:X.cookies,method:er,options:en,sessionStore:eo});return r.cookies&&ei.push(...r.cookies),{...r,cookies:ei}}break;case"verify-request":if(o.verifyRequest)return{redirect:o.verifyRequest,cookies:ei};return r.verifyRequest();case"error":if(["Signin","OAuthSignin","OAuthCallback","OAuthCreateAccount","EmailCreateAccount","Callback","OAuthAccountNotLinked","EmailSignin","CredentialsSignin","SessionRequired"].includes(et))return{redirect:`${en.url}/signin?error=${et}`,cookies:ei};if(o.error)return{redirect:`${o.error}${o.error.includes("?")?"&":"?"}error=${et}`,cookies:ei};return r.error({error:et})}}else if("POST"===er)switch(Q){case"signin":if(en.csrfTokenVerified&&en.provider){let r=await J.signin({query:X.query,body:X.body,options:en});return r.cookies&&ei.push(...r.cookies),{...r,cookies:ei}}return{redirect:`${en.url}/signin?csrf=true`,cookies:ei};case"signout":if(en.csrfTokenVerified){let r=await J.signout({options:en,sessionStore:eo});return r.cookies&&ei.push(...r.cookies),{...r,cookies:ei}}return{redirect:`${en.url}/signout?csrf=true`,cookies:ei};case"callback":if(en.provider){if("credentials"===en.provider.type&&!en.csrfTokenVerified)return{redirect:`${en.url}/signin?csrf=true`,cookies:ei};let r=await J.callback({body:X.body,query:X.query,headers:X.headers,cookies:X.cookies,method:er,options:en,sessionStore:eo});return r.cookies&&ei.push(...r.cookies),{...r,cookies:ei}}break;case"_log":if(G.logger)try{let{code:r,level:o,...u}=null!==(D=X.body)&&void 0!==D?D:{};E.default[o](r,u)}catch(r){E.default.error("LOGGER_ERROR",r)}return{};case"session":if(en.csrfTokenVerified){let r=await J.session({options:en,sessionStore:eo,newSession:null===(z=X.body)||void 0===z?void 0:z.data,isUpdate:!0});return r.cookies&&ei.push(...r.cookies),{...r,cookies:ei}}return{status:400,body:{},cookies:ei}}return{status:400,body:`Error: This action with HTTP ${er} is not supported by NextAuth.js`}}},22563:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),o.init=init;var E=u(6113),A=p(u(20546)),J=u(32133),W=p(u(67721)),R=u(49105),I=_interopRequireWildcard(u(50358)),K=_interopRequireWildcard(u(87938)),U=u(11410),D=u(3826),z=u(51454),G=p(u(44254));function _getRequireWildcardCache(r){if("function"!=typeof WeakMap)return null;var o=new WeakMap,u=new WeakMap;return(_getRequireWildcardCache=function(r){return r?u:o})(r)}function _interopRequireWildcard(r,o){if(!o&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var u=_getRequireWildcardCache(o);if(u&&u.has(r))return u.get(r);var p={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in r)if("default"!==A&&({}).hasOwnProperty.call(r,A)){var J=E?Object.getOwnPropertyDescriptor(r,A):null;J&&(J.get||J.set)?Object.defineProperty(p,A,J):p[A]=r[A]}return p.default=r,u&&u.set(r,p),p}async function init({authOptions:r,providerId:o,action:u,origin:p,cookies:Y,callbackUrl:X,csrfToken:Z,isPost:Q}){var ee,et;let er=(0,G.default)(p),en=(0,R.createSecret)({authOptions:r,url:er}),{providers:ei,provider:eo}=(0,W.default)({providers:r.providers,url:er,providerId:o}),ea={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...r,url:er,action:u,provider:eo,cookies:{...I.defaultCookies(null!==(ee=r.useSecureCookies)&&void 0!==ee?ee:er.base.startsWith("https://")),...r.cookies},secret:en,providers:ei,session:{strategy:r.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>{var r;return null!==(r=null===E.randomUUID||void 0===E.randomUUID?void 0:(0,E.randomUUID)())&&void 0!==r?r:(0,E.randomBytes)(32).toString("hex")},...r.session},jwt:{secret:en,maxAge:2592e3,encode:K.encode,decode:K.decode,...r.jwt},events:(0,J.eventsErrorHandler)(null!==(et=r.events)&&void 0!==et?et:{},A.default),adapter:(0,J.adapterErrorHandler)(r.adapter,A.default),callbacks:{...U.defaultCallbacks,...r.callbacks},logger:A.default,callbackUrl:er.origin},es=[],{csrfToken:ec,cookie:el,csrfTokenVerified:eu}=(0,D.createCSRFToken)({options:ea,cookieValue:null==Y?void 0:Y[ea.cookies.csrfToken.name],isPost:Q,bodyValue:Z});ea.csrfToken=ec,ea.csrfTokenVerified=eu,el&&es.push({name:ea.cookies.csrfToken.name,value:el,options:ea.cookies.csrfToken.options});let{callbackUrl:ed,callbackUrlCookie:ep}=await (0,z.createCallbackUrl)({options:ea,cookieValue:null==Y?void 0:Y[ea.cookies.callbackUrl.name],paramValue:X});return ea.callbackUrl=ed,ep&&es.push({name:ea.cookies.callbackUrl.name,value:ep,options:ea.cookies.callbackUrl.options}),{options:ea,cookies:es}}},27985:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),o.assertConfig=function(r){var o,u,p,R,I,K,U;let D,z,G;let{options:Y,req:X}=r,Z=[];if(!W&&(X.origin||Z.push("NEXTAUTH_URL"),Y.secret,Y.debug&&Z.push("DEBUG_ENABLED")),!Y.secret)return new E.MissingSecret("Please define a `secret` in production.");if(!(null!==(o=X.query)&&void 0!==o&&o.nextauth)&&!X.action)return new E.MissingAPIRoute("Cannot find [...nextauth].{js,ts} in `/pages/api/auth`. Make sure the filename is written correctly.");let Q=null===(u=X.query)||void 0===u?void 0:u.callbackUrl,ee=(0,A.default)(X.origin);if(Q&&!isValidHttpUrl(Q,ee.base))return new E.InvalidCallbackUrl(`Invalid callback URL. Received: ${Q}`);let{callbackUrl:et}=(0,J.defaultCookies)(null!==(p=Y.useSecureCookies)&&void 0!==p?p:ee.base.startsWith("https://")),er=null===(R=X.cookies)||void 0===R?void 0:R[null!==(I=null===(K=Y.cookies)||void 0===K||null===(K=K.callbackUrl)||void 0===K?void 0:K.name)&&void 0!==I?I:et.name];if(er&&!isValidHttpUrl(er,ee.base))return new E.InvalidCallbackUrl(`Invalid callback URL. Received: ${er}`);for(let r of Y.providers)"credentials"===r.type?D=!0:"email"===r.type?z=!0:"twitter"===r.id&&"2.0"===r.version&&(G=!0);if(D){let r=(null===(U=Y.session)||void 0===U?void 0:U.strategy)==="database",o=!Y.providers.some(r=>"credentials"!==r.type);if(r&&o)return new E.UnsupportedStrategy("Signin in with credentials only supported if JWT strategy is enabled");let u=Y.providers.some(r=>"credentials"===r.type&&!r.authorize);if(u)return new E.MissingAuthorize("Must define an authorize() handler to use credentials authentication provider")}if(z){let{adapter:r}=Y;if(!r)return new E.MissingAdapter("E-mail login requires an adapter.");let o=["createVerificationToken","useVerificationToken","getUserByEmail"].filter(o=>!r[o]);if(o.length)return new E.MissingAdapterMethods(`Required adapter methods were missing: ${o.join(", ")}`)}return W||(G&&Z.push("TWITTER_OAUTH_2_BETA"),W=!0),Z};var E=u(32133),A=p(u(44254)),J=u(50358);let W=!1;function isValidHttpUrl(r,o){try{return/^https?:/.test(new URL(r,r.startsWith("/")?o:void 0).protocol)}catch(r){return!1}}},62742:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=callbackHandler;var p=u(32133),E=u(49105);async function callbackHandler(r){var o,u,A,J,W,R;let{sessionToken:I,profile:K,account:U,options:D}=r;if(!(null!=U&&U.providerAccountId)||!U.type)throw Error("Missing or invalid provider account");if(!["email","oauth"].includes(U.type))throw Error("Provider not supported");let{adapter:z,jwt:G,events:Y,session:{strategy:X,generateSessionToken:Z}}=D;if(!z)return{user:K,account:U};let{createUser:Q,updateUser:ee,getUser:et,getUserByAccount:er,getUserByEmail:en,linkAccount:ei,createSession:eo,getSessionAndUser:ea,deleteSession:es}=z,ec=null,el=null,eu=!1,ed="jwt"===X;if(I){if(ed)try{(ec=await G.decode({...G,token:I}))&&"sub"in ec&&ec.sub&&(el=await et(ec.sub))}catch(r){}else{let r=await ea(I);r&&(ec=r.session,el=r.user)}}if("email"===U.type){let r=await en(K.email);if(r)(null===(o=el)||void 0===o?void 0:o.id)!==r.id&&!ed&&I&&await es(I),el=await ee({id:r.id,emailVerified:new Date}),await (null===(u=Y.updateUser)||void 0===u?void 0:u.call(Y,{user:el}));else{let{id:r,...o}={...K,emailVerified:new Date};el=await Q(o),await (null===(A=Y.createUser)||void 0===A?void 0:A.call(Y,{user:el})),eu=!0}return{session:ec=ed?{}:await eo({sessionToken:await Z(),userId:el.id,expires:(0,E.fromDate)(D.session.maxAge)}),user:el,isNewUser:eu}}if("oauth"===U.type){let r=await er({providerAccountId:U.providerAccountId,provider:U.provider});if(r){if(el){if(r.id===el.id)return{session:ec,user:el,isNewUser:eu};throw new p.AccountNotLinkedError("The account is already associated with another user")}return{session:ec=ed?{}:await eo({sessionToken:await Z(),userId:r.id,expires:(0,E.fromDate)(D.session.maxAge)}),user:r,isNewUser:eu}}{if(el)return await ei({...U,userId:el.id}),await (null===(R=Y.linkAccount)||void 0===R?void 0:R.call(Y,{user:el,account:U,profile:K})),{session:ec,user:el,isNewUser:eu};let r=K.email?await en(K.email):null;if(r){let o=D.provider;if(null!=o&&o.allowDangerousEmailAccountLinking)el=r;else throw new p.AccountNotLinkedError("Another account already exists with the same e-mail address")}else{let{id:r,...o}={...K,emailVerified:null};el=await Q(o)}return await (null===(J=Y.createUser)||void 0===J?void 0:J.call(Y,{user:el})),await ei({...U,userId:el.id}),await (null===(W=Y.linkAccount)||void 0===W?void 0:W.call(Y,{user:el,account:U,profile:K})),{session:ec=ed?{}:await eo({sessionToken:await Z(),userId:el.id,expires:(0,E.fromDate)(D.session.maxAge)}),user:el,isNewUser:!0}}}throw Error("Unsupported account type")}},51454:(r,o)=>{"use strict";async function createCallbackUrl({options:r,paramValue:o,cookieValue:u}){let{url:p,callbacks:E}=r,A=p.origin;return o?A=await E.redirect({url:o,baseUrl:p.origin}):u&&(A=await E.redirect({url:u,baseUrl:p.origin})),{callbackUrl:A,callbackUrlCookie:A!==u?A:void 0}}Object.defineProperty(o,"__esModule",{value:!0}),o.createCallbackUrl=createCallbackUrl},50358:(r,o)=>{"use strict";function _classPrivateFieldInitSpec(r,o,u){_checkPrivateRedeclaration(r,o),o.set(r,u)}function _checkPrivateRedeclaration(r,o){if(o.has(r))throw TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(r,o){return r.get(_assertClassBrand(r,o))}function _classPrivateFieldSet(r,o,u){return r.set(_assertClassBrand(r,o),u),u}function _assertClassBrand(r,o,u){if("function"==typeof r?r===o:r.has(o))return arguments.length<3?o:u;throw TypeError("Private element is not present on this object")}Object.defineProperty(o,"__esModule",{value:!0}),o.SessionStore=void 0,o.defaultCookies=function(r){let o=r?"__Secure-":"";return{sessionToken:{name:`${o}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:r}},callbackUrl:{name:`${o}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:r}},csrfToken:{name:`${r?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:r}},pkceCodeVerifier:{name:`${o}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:r,maxAge:900}},state:{name:`${o}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:r,maxAge:900}},nonce:{name:`${o}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:r}}}};var u=new WeakMap,p=new WeakMap,E=new WeakMap,A=new WeakSet;function _chunk(r){let o=Math.ceil(r.value.length/3933);if(1===o)return _classPrivateFieldGet(u,this)[r.name]=r.value,[r];let p=[];for(let E=0;E<o;E++){let o=`${r.name}.${E}`,A=r.value.substr(3933*E,3933);p.push({...r,name:o,value:A}),_classPrivateFieldGet(u,this)[o]=A}return _classPrivateFieldGet(E,this).debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:163,valueSize:r.value.length,chunks:p.map(r=>r.value.length+163)}),p}function _clean(){let r={};for(let E in _classPrivateFieldGet(u,this)){var o;null===(o=_classPrivateFieldGet(u,this))||void 0===o||delete o[E],r[E]={name:E,value:"",options:{..._classPrivateFieldGet(p,this).options,maxAge:0}}}return r}o.SessionStore=class{constructor(r,o,J){(function(r,o){_checkPrivateRedeclaration(r,o),o.add(r)})(this,A),_classPrivateFieldInitSpec(this,u,{}),_classPrivateFieldInitSpec(this,p,void 0),_classPrivateFieldInitSpec(this,E,void 0),_classPrivateFieldSet(E,this,J),_classPrivateFieldSet(p,this,r);let{cookies:W}=o,{name:R}=r;if("function"==typeof(null==W?void 0:W.getAll))for(let{name:r,value:o}of W.getAll())r.startsWith(R)&&(_classPrivateFieldGet(u,this)[r]=o);else if(W instanceof Map)for(let r of W.keys())r.startsWith(R)&&(_classPrivateFieldGet(u,this)[r]=W.get(r));else for(let r in W)r.startsWith(R)&&(_classPrivateFieldGet(u,this)[r]=W[r])}get value(){let r=Object.keys(_classPrivateFieldGet(u,this)).sort((r,o)=>{var u,p;let E=parseInt(null!==(u=r.split(".").pop())&&void 0!==u?u:"0"),A=parseInt(null!==(p=o.split(".").pop())&&void 0!==p?p:"0");return E-A});return r.map(r=>_classPrivateFieldGet(u,this)[r]).join("")}chunk(r,o){let u=_assertClassBrand(A,this,_clean).call(this),E=_assertClassBrand(A,this,_chunk).call(this,{name:_classPrivateFieldGet(p,this).name,value:r,options:{..._classPrivateFieldGet(p,this).options,...o}});for(let r of E)u[r.name]=r;return Object.values(u)}clean(){return Object.values(_assertClassBrand(A,this,_clean).call(this))}}},3826:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.createCSRFToken=function({options:r,cookieValue:o,isPost:u,bodyValue:E}){if(o){let[A,J]=o.split("|"),W=(0,p.createHash)("sha256").update(`${A}${r.secret}`).digest("hex");if(J===W){let r=u&&A===E;return{csrfTokenVerified:r,csrfToken:A}}}let A=(0,p.randomBytes)(32).toString("hex"),J=(0,p.createHash)("sha256").update(`${A}${r.secret}`).digest("hex"),W=`${A}|${J}`;return{cookie:W,csrfToken:A}};var p=u(6113)},11410:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.defaultCallbacks=void 0,o.defaultCallbacks={signIn:()=>!0,redirect:({url:r,baseUrl:o})=>r.startsWith("/")?`${o}${r}`:new URL(r).origin===o?r:o,session:({session:r})=>r,jwt:({token:r})=>r}},3727:(r,o)=>{"use strict";async function getAdapterUserFromEmail({email:r,adapter:o}){let{getUserByEmail:u}=o,p=r?await u(r):null;return p||{id:r,email:r,emailVerified:null}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=getAdapterUserFromEmail},81499:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=email;var p=u(6113),E=u(49105);async function email(r,o){var u,A,J,W;let{url:R,adapter:I,provider:K,callbackUrl:U,theme:D}=o,z=null!==(u=await (null===(A=K.generateVerificationToken)||void 0===A?void 0:A.call(K)))&&void 0!==u?u:(0,p.randomBytes)(32).toString("hex"),G=new Date(Date.now()+(null!==(J=K.maxAge)&&void 0!==J?J:86400)*1e3),Y=new URLSearchParams({callbackUrl:U,token:z,email:r}),X=`${R}/callback/${K.id}?${Y}`;return await Promise.all([K.sendVerificationRequest({identifier:r,token:z,expires:G,url:X,provider:K,theme:D}),null===(W=I.createVerificationToken)||void 0===W?void 0:W.call(I,{identifier:r,token:(0,E.hashToken)(z,o),expires:G})]),`${R}/verify-request?${new URLSearchParams({provider:K.id,type:K.type})}`}},35896:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=getAuthorizationUrl;var p=u(55431),E=u(13715),A=function(r,o){if(!o&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var u=_getRequireWildcardCache(o);if(u&&u.has(r))return u.get(r);var p={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in r)if("default"!==A&&({}).hasOwnProperty.call(r,A)){var J=E?Object.getOwnPropertyDescriptor(r,A):null;J&&(J.get||J.set)?Object.defineProperty(p,A,J):p[A]=r[A]}return p.default=r,u&&u.set(r,p),p}(u(7519));function _getRequireWildcardCache(r){if("function"!=typeof WeakMap)return null;var o=new WeakMap,u=new WeakMap;return(_getRequireWildcardCache=function(r){return r?u:o})(r)}async function getAuthorizationUrl({options:r,query:o}){var u,J,W;let{logger:R,provider:I}=r,K={};if("string"==typeof I.authorization){let r=new URL(I.authorization),o=Object.fromEntries(r.searchParams);K={...K,...o}}else K={...K,...null===(J=I.authorization)||void 0===J?void 0:J.params};if(K={...K,...o},null!==(u=I.version)&&void 0!==u&&u.startsWith("1.")){let o=(0,E.oAuth1Client)(r),u=await o.getOAuthRequestToken(K),p=`${null===(W=I.authorization)||void 0===W?void 0:W.url}?${new URLSearchParams({oauth_token:u.oauth_token,oauth_token_secret:u.oauth_token_secret,...u.params})}`;return E.oAuth1TokenStore.set(u.oauth_token,u.oauth_token_secret),R.debug("GET_AUTHORIZATION_URL",{url:p,provider:I}),{redirect:p}}let U=await (0,p.openidClient)(r),D=K,z=[];await A.state.create(r,z,D),await A.pkce.create(r,z,D),await A.nonce.create(r,z,D);let G=U.authorizationUrl(D);return R.debug("GET_AUTHORIZATION_URL",{url:G,cookies:z,provider:I}),{redirect:G,cookies:z}}},15721:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=oAuthCallback;var p=u(78165),E=u(55431),A=u(13715),J=function(r,o){if(!o&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var u=_getRequireWildcardCache(o);if(u&&u.has(r))return u.get(r);var p={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in r)if("default"!==A&&({}).hasOwnProperty.call(r,A)){var J=E?Object.getOwnPropertyDescriptor(r,A):null;J&&(J.get||J.set)?Object.defineProperty(p,A,J):p[A]=r[A]}return p.default=r,u&&u.set(r,p),p}(u(7519)),W=u(32133);function _getRequireWildcardCache(r){if("function"!=typeof WeakMap)return null;var o=new WeakMap,u=new WeakMap;return(_getRequireWildcardCache=function(r){return r?u:o})(r)}async function oAuthCallback(r){var o,u,R,I,K,U;let{options:D,query:z,body:G,method:Y,cookies:X}=r,{logger:Z,provider:Q}=D,ee=null!==(o=null==G?void 0:G.error)&&void 0!==o?o:null==z?void 0:z.error;if(ee){let r=Error(ee);throw Z.error("OAUTH_CALLBACK_HANDLER_ERROR",{error:r,error_description:null==z?void 0:z.error_description,providerId:Q.id}),Z.debug("OAUTH_CALLBACK_HANDLER_ERROR",{body:G}),r}if(null!==(u=Q.version)&&void 0!==u&&u.startsWith("1."))try{let r=await (0,A.oAuth1Client)(D),{oauth_token:o,oauth_verifier:u}=null!=z?z:{},p=await r.getOAuthAccessToken(o,A.oAuth1TokenStore.get(o),u),E=await r.get(Q.profileUrl,p.oauth_token,p.oauth_token_secret);"string"==typeof E&&(E=JSON.parse(E));let J=await getProfile({profile:E,tokens:p,provider:Q,logger:Z});return{...J,cookies:[]}}catch(r){throw Z.error("OAUTH_V1_GET_ACCESS_TOKEN_ERROR",r),r}null!=z&&z.oauth_token&&A.oAuth1TokenStore.delete(z.oauth_token);try{let r,o;let u=await (0,E.openidClient)(D),A={},W=[];await J.state.use(X,W,D,A),await J.pkce.use(X,W,D,A),await J.nonce.use(X,W,D,A);let ee={...u.callbackParams({url:`http://n?${new URLSearchParams(z)}`,body:G,method:Y}),...null===(R=Q.token)||void 0===R?void 0:R.params};if(null!==(I=Q.token)&&void 0!==I&&I.request){let o=await Q.token.request({provider:Q,params:ee,checks:A,client:u});r=new p.TokenSet(o.tokens)}else r=Q.idToken?await u.callback(Q.callbackUrl,ee,A):await u.oauthCallback(Q.callbackUrl,ee,A);Array.isArray(r.scope)&&(r.scope=r.scope.join(" ")),o=null!==(K=Q.userinfo)&&void 0!==K&&K.request?await Q.userinfo.request({provider:Q,tokens:r,client:u}):Q.idToken?r.claims():await u.userinfo(r,{params:null===(U=Q.userinfo)||void 0===U?void 0:U.params});let et=await getProfile({profile:o,provider:Q,tokens:r,logger:Z});return{...et,cookies:W}}catch(r){throw new W.OAuthCallbackError(r)}}async function getProfile({profile:r,tokens:o,provider:u,logger:p}){try{var E;p.debug("PROFILE_DATA",{OAuthProfile:r});let A=await u.profile(r,o);if(A.email=null===(E=A.email)||void 0===E?void 0:E.toLowerCase(),!A.id)throw TypeError(`Profile id is missing in ${u.name} OAuth profile response`);return{profile:A,account:{provider:u.id,type:u.type,providerAccountId:A.id.toString(),...o},OAuthProfile:r}}catch(o){p.error("OAUTH_PARSE_PROFILE_ERROR",{error:o,OAuthProfile:r})}}},7519:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.pkce=o.nonce=o.PKCE_CODE_CHALLENGE_METHOD=void 0,o.signCookie=signCookie,o.state=void 0;var p=u(78165),E=function(r,o){if(!o&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var u=_getRequireWildcardCache(o);if(u&&u.has(r))return u.get(r);var p={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in r)if("default"!==A&&({}).hasOwnProperty.call(r,A)){var J=E?Object.getOwnPropertyDescriptor(r,A):null;J&&(J.get||J.set)?Object.defineProperty(p,A,J):p[A]=r[A]}return p.default=r,u&&u.set(r,p),p}(u(87938));function _getRequireWildcardCache(r){if("function"!=typeof WeakMap)return null;var o=new WeakMap,u=new WeakMap;return(_getRequireWildcardCache=function(r){return r?u:o})(r)}async function signCookie(r,o,u,p){let{cookies:A,logger:J}=p;J.debug(`CREATE_${r.toUpperCase()}`,{value:o,maxAge:u});let{name:W}=A[r],R=new Date;return R.setTime(R.getTime()+1e3*u),{name:W,value:await E.encode({...p.jwt,maxAge:u,token:{value:o},salt:W}),options:{...A[r].options,expires:R}}}let A=o.PKCE_CODE_CHALLENGE_METHOD="S256";o.pkce={async create(r,o,u){var E,J;if(!(null!==(E=r.provider)&&void 0!==E&&null!==(E=E.checks)&&void 0!==E&&E.includes("pkce")))return;let W=p.generators.codeVerifier(),R=p.generators.codeChallenge(W);u.code_challenge=R,u.code_challenge_method=A;let I=null!==(J=r.cookies.pkceCodeVerifier.options.maxAge)&&void 0!==J?J:900;o.push(await signCookie("pkceCodeVerifier",W,I,r))},async use(r,o,u,p){var A;if(!(null!==(A=u.provider)&&void 0!==A&&null!==(A=A.checks)&&void 0!==A&&A.includes("pkce")))return;let J=null==r?void 0:r[u.cookies.pkceCodeVerifier.name];if(!J)throw TypeError("PKCE code_verifier cookie was missing.");let{name:W}=u.cookies.pkceCodeVerifier,R=await E.decode({...u.jwt,token:J,salt:W});if(!(null!=R&&R.value))throw TypeError("PKCE code_verifier value could not be parsed.");o.push({name:W,value:"",options:{...u.cookies.pkceCodeVerifier.options,maxAge:0}}),p.code_verifier=R.value}},o.state={async create(r,o,u){var E,A;if(!(null!==(E=r.provider.checks)&&void 0!==E&&E.includes("state")))return;let J=p.generators.state();u.state=J;let W=null!==(A=r.cookies.state.options.maxAge)&&void 0!==A?A:900;o.push(await signCookie("state",J,W,r))},async use(r,o,u,p){var A;if(!(null!==(A=u.provider.checks)&&void 0!==A&&A.includes("state")))return;let J=null==r?void 0:r[u.cookies.state.name];if(!J)throw TypeError("State cookie was missing.");let{name:W}=u.cookies.state,R=await E.decode({...u.jwt,token:J,salt:W});if(!(null!=R&&R.value))throw TypeError("State value could not be parsed.");o.push({name:W,value:"",options:{...u.cookies.state.options,maxAge:0}}),p.state=R.value}},o.nonce={async create(r,o,u){var E,A;if(!(null!==(E=r.provider.checks)&&void 0!==E&&E.includes("nonce")))return;let J=p.generators.nonce();u.nonce=J;let W=null!==(A=r.cookies.nonce.options.maxAge)&&void 0!==A?A:900;o.push(await signCookie("nonce",J,W,r))},async use(r,o,u,p){var A;if(!(null!==(A=u.provider)&&void 0!==A&&null!==(A=A.checks)&&void 0!==A&&A.includes("nonce")))return;let J=null==r?void 0:r[u.cookies.nonce.name];if(!J)throw TypeError("Nonce cookie was missing.");let{name:W}=u.cookies.nonce,R=await E.decode({...u.jwt,token:J,salt:W});if(!(null!=R&&R.value))throw TypeError("Nonce value could not be parsed.");o.push({name:W,value:"",options:{...u.cookies.nonce.options,maxAge:0}}),p.nonce=R.value}}},13715:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.oAuth1Client=function(r){var o,u;let E=r.provider,A=new p.OAuth(E.requestTokenUrl,E.accessTokenUrl,E.clientId,E.clientSecret,null!==(o=E.version)&&void 0!==o?o:"1.0",E.callbackUrl,null!==(u=E.encoding)&&void 0!==u?u:"HMAC-SHA1"),J=A.get.bind(A);A.get=async(...r)=>await new Promise((o,u)=>{J(...r,(r,p)=>{if(r)return u(r);o(p)})});let W=A.getOAuthAccessToken.bind(A);A.getOAuthAccessToken=async(...r)=>await new Promise((o,u)=>{W(...r,(r,p,E)=>{if(r)return u(r);o({oauth_token:p,oauth_token_secret:E})})});let R=A.getOAuthRequestToken.bind(A);return A.getOAuthRequestToken=async(r={})=>await new Promise((o,u)=>{R(r,(r,p,E,A)=>{if(r)return u(r);o({oauth_token:p,oauth_token_secret:E,params:A})})}),A},o.oAuth1TokenStore=void 0;var p=u(72369);o.oAuth1TokenStore=new Map},55431:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.openidClient=openidClient;var p=u(78165);async function openidClient(r){let o;let u=r.provider;if(u.httpOptions&&p.custom.setHttpOptionsDefaults(u.httpOptions),u.wellKnown)o=await p.Issuer.discover(u.wellKnown);else{var E,A,J;o=new p.Issuer({issuer:u.issuer,authorization_endpoint:null===(E=u.authorization)||void 0===E?void 0:E.url,token_endpoint:null===(A=u.token)||void 0===A?void 0:A.url,userinfo_endpoint:null===(J=u.userinfo)||void 0===J?void 0:J.url,jwks_uri:u.jwks_endpoint})}let W=new o.Client({client_id:u.clientId,client_secret:u.clientSecret,redirect_uris:[u.callbackUrl],...u.client},u.jwks);return W[p.custom.clock_tolerance]=10,W}},67721:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){let{url:o,providerId:u}=r,E=r.providers.map(({options:r,...u})=>{var E,A;if("oauth"===u.type){let E=normalizeOAuthOptions(u),J=normalizeOAuthOptions(r,!0),W=null!==(A=null==J?void 0:J.id)&&void 0!==A?A:u.id;return(0,p.merge)(E,{...J,signinUrl:`${o}/signin/${W}`,callbackUrl:`${o}/callback/${W}`})}let J=null!==(E=null==r?void 0:r.id)&&void 0!==E?E:u.id;return(0,p.merge)(u,{...r,signinUrl:`${o}/signin/${J}`,callbackUrl:`${o}/callback/${J}`})});return{providers:E,provider:E.find(({id:r})=>r===u)}};var p=u(96300);function normalizeOAuthOptions(r,o=!1){var u,p,E,A,J;if(!r)return;let W=Object.entries(r).reduce((r,[o,u])=>{if(["authorization","token","userinfo"].includes(o)&&"string"==typeof u){var p;let E=new URL(u);r[o]={url:`${E.origin}${E.pathname}`,params:Object.fromEntries(null!==(p=E.searchParams)&&void 0!==p?p:[])}}else r[o]=u;return r},{});return o||null!==(u=W.version)&&void 0!==u&&u.startsWith("1.")||(W.idToken=!!(null!==(p=null!==(E=W.idToken)&&void 0!==E?E:null===(A=W.wellKnown)||void 0===A?void 0:A.includes("openid-configuration"))&&void 0!==p?p:null===(J=W.authorization)||void 0===J||null===(J=J.params)||void 0===J||null===(J=J.scope)||void 0===J?void 0:J.includes("openid")),W.checks||(W.checks=["state"])),W}},49105:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.createSecret=function(r){var o;let{authOptions:u,url:E}=r;return null!==(o=u.secret)&&void 0!==o?o:(0,p.createHash)("sha256").update(JSON.stringify({...E,...u})).digest("hex")},o.fromDate=function(r,o=Date.now()){return new Date(o+1e3*r)},o.hashToken=function(r,o){var u;let{provider:E,secret:A}=o;return(0,p.createHash)("sha256").update(`${r}${null!==(u=E.secret)&&void 0!==u?u:A}`).digest("hex")};var p=u(6113)},96369:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){var o;let{url:u,error:E="default",theme:A}=r,J=`${u}/signin`,W={default:{status:200,heading:"Error",message:(0,p.h)("p",null,(0,p.h)("a",{className:"site",href:null==u?void 0:u.origin},null==u?void 0:u.host))},configuration:{status:500,heading:"Server error",message:(0,p.h)("div",null,(0,p.h)("p",null,"There is a problem with the server configuration."),(0,p.h)("p",null,"Check the server logs for more information."))},accessdenied:{status:403,heading:"Access Denied",message:(0,p.h)("div",null,(0,p.h)("p",null,"You do not have permission to sign in."),(0,p.h)("p",null,(0,p.h)("a",{className:"button",href:J},"Sign in")))},verification:{status:403,heading:"Unable to sign in",message:(0,p.h)("div",null,(0,p.h)("p",null,"The sign in link is no longer valid."),(0,p.h)("p",null,"It may have been used already or it may have expired.")),signin:(0,p.h)("a",{className:"button",href:J},"Sign in")}},{status:R,heading:I,message:K,signin:U}=null!==(o=W[E.toLowerCase()])&&void 0!==o?o:W.default;return{status:R,html:(0,p.h)("div",{className:"error"},(null==A?void 0:A.brandColor)&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${null==A?void 0:A.brandColor}
        }
      `}}),(0,p.h)("div",{className:"card"},(null==A?void 0:A.logo)&&(0,p.h)("img",{src:A.logo,alt:"Logo",className:"logo"}),(0,p.h)("h1",null,I),(0,p.h)("div",{className:"message"},K),U))}};var p=u(22838)},53450:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){let{url:o,theme:u,query:p,cookies:K}=r;function send({html:r,title:o,status:p}){var A;return{cookies:K,status:p,headers:[{key:"Content-Type",value:"text/html"}],body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${(0,I.default)()}</style><title>${o}</title></head><body class="__next-auth-theme-${null!==(A=null==u?void 0:u.colorScheme)&&void 0!==A?A:"auto"}"><div class="page">${(0,E.default)(r)}</div></body></html>`}}return{signin:o=>send({html:(0,A.default)({csrfToken:r.csrfToken,providers:r.providers,callbackUrl:r.callbackUrl,theme:u,...p,...o}),title:"Sign In"}),signout:p=>send({html:(0,J.default)({csrfToken:r.csrfToken,url:o,theme:u,...p}),title:"Sign Out"}),verifyRequest:r=>send({html:(0,W.default)({url:o,theme:u,...r}),title:"Verify Request"}),error:r=>send({...(0,R.default)({url:o,theme:u,...r}),title:"Error"})}};var E=p(u(54412)),A=p(u(29181)),J=p(u(30264)),W=p(u(60923)),R=p(u(96369)),I=p(u(67630))},29181:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){var o;let{csrfToken:u,providers:p,callbackUrl:J,theme:W,email:R,error:I}=r,K=p.filter(r=>"oauth"===r.type||"email"===r.type||"credentials"===r.type&&!!r.credentials);"undefined"!=typeof document&&W.buttonText&&document.documentElement.style.setProperty("--button-text-color",W.buttonText),"undefined"!=typeof document&&W.brandColor&&document.documentElement.style.setProperty("--brand-color",W.brandColor);let U={Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallback:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page.",default:"Unable to sign in."},D=I&&(null!==(o=U[I])&&void 0!==o?o:U.default),z="https://authjs.dev/img/providers";return(0,E.h)("div",{className:"signin"},W.brandColor&&(0,E.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${W.brandColor}
        }
      `}}),W.buttonText&&(0,E.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${W.buttonText}
        }
      `}}),(0,E.h)("div",{className:"card"},W.logo&&(0,E.h)("img",{src:W.logo,alt:"Logo",className:"logo"}),D&&(0,E.h)("div",{className:"error"},(0,E.h)("p",null,D)),K.map((r,o)=>{let p,W,I,U,D,G;if("oauth"===r.type){var Y;({bg:p="",text:W="",logo:I="",bgDark:D=p,textDark:G=W,logoDark:U=""}=null!==(Y=r.style)&&void 0!==Y?Y:{}),I=I.startsWith("/")?`${z}${I}`:I,(U=U.startsWith("/")?`${z}${U}`:U||I)||(U=I)}return(0,E.h)("div",{key:r.id,className:"provider"},"oauth"===r.type&&(0,E.h)("form",{action:r.signinUrl,method:"POST"},(0,E.h)("input",{type:"hidden",name:"csrfToken",value:u}),J&&(0,E.h)("input",{type:"hidden",name:"callbackUrl",value:J}),(0,E.h)("button",{type:"submit",className:"button",style:{"--provider-bg":p,"--provider-dark-bg":D,"--provider-color":W,"--provider-dark-color":G,"--provider-bg-hover":hexToRgba(p,.8),"--provider-dark-bg-hover":hexToRgba(D,.8)}},I&&(0,E.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo",src:`${I.startsWith("/")?z:""}${I}`}),U&&(0,E.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo-dark",src:`${I.startsWith("/")?z:""}${U}`}),(0,E.h)("span",null,"Sign in with ",r.name))),("email"===r.type||"credentials"===r.type)&&o>0&&"email"!==K[o-1].type&&"credentials"!==K[o-1].type&&(0,E.h)("hr",null),"email"===r.type&&(0,E.h)("form",{action:r.signinUrl,method:"POST"},(0,E.h)("input",{type:"hidden",name:"csrfToken",value:u}),(0,E.h)("label",{className:"section-header",htmlFor:`input-email-for-${r.id}-provider`},"Email"),(0,E.h)("input",{id:`input-email-for-${r.id}-provider`,autoFocus:!0,type:"email",name:"email",value:R,placeholder:"email@example.com",required:!0}),(0,E.h)("button",{id:"submitButton",type:"submit"},"Sign in with ",r.name)),"credentials"===r.type&&(0,E.h)("form",{action:r.callbackUrl,method:"POST"},(0,E.h)("input",{type:"hidden",name:"csrfToken",value:u}),Object.keys(r.credentials).map(o=>{var u,p,J;return(0,E.h)("div",{key:`input-group-${r.id}`},(0,E.h)("label",{className:"section-header",htmlFor:`input-${o}-for-${r.id}-provider`},null!==(u=r.credentials[o].label)&&void 0!==u?u:o),(0,E.h)("input",(0,A.default)({name:o,id:`input-${o}-for-${r.id}-provider`,type:null!==(p=r.credentials[o].type)&&void 0!==p?p:"text",placeholder:null!==(J=r.credentials[o].placeholder)&&void 0!==J?J:""},r.credentials[o])))}),(0,E.h)("button",{type:"submit"},"Sign in with ",r.name)),("email"===r.type||"credentials"===r.type)&&o+1<K.length&&(0,E.h)("hr",null))})))};var E=u(22838),A=p(u(14432));function hexToRgba(r,o=1){if(!r)return;3===(r=r.replace(/^#/,"")).length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);let u=parseInt(r,16);o=Math.min(Math.max(o,0),1);let p=`rgba(${u>>16&255}, ${u>>8&255}, ${255&u}, ${o})`;return p}},30264:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){let{url:o,csrfToken:u,theme:E}=r;return(0,p.h)("div",{className:"signout"},E.brandColor&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${E.brandColor}
        }
      `}}),E.buttonText&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${E.buttonText}
        }
      `}}),(0,p.h)("div",{className:"card"},E.logo&&(0,p.h)("img",{src:E.logo,alt:"Logo",className:"logo"}),(0,p.h)("h1",null,"Signout"),(0,p.h)("p",null,"Are you sure you want to sign out?"),(0,p.h)("form",{action:`${o}/signout`,method:"POST"},(0,p.h)("input",{type:"hidden",name:"csrfToken",value:u}),(0,p.h)("button",{id:"submitButton",type:"submit"},"Sign out"))))};var p=u(22838)},60923:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){let{url:o,theme:u}=r;return(0,p.h)("div",{className:"verify-request"},u.brandColor&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${u.brandColor}
        }
      `}}),(0,p.h)("div",{className:"card"},u.logo&&(0,p.h)("img",{src:u.logo,alt:"Logo",className:"logo"}),(0,p.h)("h1",null,"Check your email"),(0,p.h)("p",null,"A sign in link has been sent to your email address."),(0,p.h)("p",null,(0,p.h)("a",{className:"site",href:o.origin},o.host))))};var p=u(22838)},38840:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),o.default=callback;var E=p(u(15721)),A=p(u(62742)),J=u(49105),W=p(u(3727));async function callback(r){var o,u,p,R,I,K;let{options:U,query:D,body:z,method:G,headers:Y,sessionStore:X}=r,{provider:Z,adapter:Q,url:ee,callbackUrl:et,pages:er,jwt:en,events:ei,callbacks:eo,session:{strategy:ea,maxAge:es},logger:ec}=U,el=[],eu="jwt"===ea;if("oauth"===Z.type)try{let{profile:p,account:J,OAuthProfile:W,cookies:R}=await (0,E.default)({query:D,body:z,method:G,options:U,cookies:r.cookies});R.length&&el.push(...R);try{if(ec.debug("OAUTH_CALLBACK_RESPONSE",{profile:p,account:J,OAuthProfile:W}),!p||!J||!W)return{redirect:`${ee}/signin`,cookies:el};let r=p;if(Q){let{getUserByAccount:o}=Q,u=await o({providerAccountId:J.providerAccountId,provider:Z.id});u&&(r=u)}try{let o=await eo.signIn({user:r,account:J,profile:W});if(!o)return{redirect:`${ee}/error?error=AccessDenied`,cookies:el};if("string"==typeof o)return{redirect:o,cookies:el}}catch(r){return{redirect:`${ee}/error?error=${encodeURIComponent(r.message)}`,cookies:el}}let{user:E,session:R,isNewUser:I}=await (0,A.default)({sessionToken:X.value,profile:p,account:J,options:U});if(eu){let r={name:E.name,email:E.email,picture:E.image,sub:null===(u=E.id)||void 0===u?void 0:u.toString()},o=await eo.jwt({token:r,user:E,account:J,profile:W,isNewUser:I,trigger:I?"signUp":"signIn"}),p=await en.encode({...en,token:o}),A=new Date;A.setTime(A.getTime()+1e3*es);let R=X.chunk(p,{expires:A});el.push(...R)}else el.push({name:U.cookies.sessionToken.name,value:R.sessionToken,options:{...U.cookies.sessionToken.options,expires:R.expires}});if(await (null===(o=ei.signIn)||void 0===o?void 0:o.call(ei,{user:E,account:J,profile:p,isNewUser:I})),I&&er.newUser)return{redirect:`${er.newUser}${er.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(et)}`,cookies:el};return{redirect:et,cookies:el}}catch(r){if("AccountNotLinkedError"===r.name)return{redirect:`${ee}/error?error=OAuthAccountNotLinked`,cookies:el};if("CreateUserError"===r.name)return{redirect:`${ee}/error?error=OAuthCreateAccount`,cookies:el};return ec.error("OAUTH_CALLBACK_HANDLER_ERROR",r),{redirect:`${ee}/error?error=Callback`,cookies:el}}}catch(r){if("OAuthCallbackError"===r.name)return ec.error("OAUTH_CALLBACK_ERROR",{error:r,providerId:Z.id}),{redirect:`${ee}/error?error=OAuthCallback`,cookies:el};return ec.error("OAUTH_CALLBACK_ERROR",r),{redirect:`${ee}/error?error=Callback`,cookies:el}}else if("email"===Z.type)try{let r=null==D?void 0:D.token,o=null==D?void 0:D.email;if(!r)return{redirect:`${ee}/error?error=configuration`,cookies:el};let u=await Q.useVerificationToken({identifier:o,token:(0,J.hashToken)(r,U)}),E=!u||u.expires.valueOf()<Date.now()||o&&u.identifier!==o;if(E)return{redirect:`${ee}/error?error=Verification`,cookies:el};let I=await (0,W.default)({email:u.identifier,adapter:Q}),K={providerAccountId:I.email,type:"email",provider:Z.id};try{let r=await eo.signIn({user:I,account:K});if(!r)return{redirect:`${ee}/error?error=AccessDenied`,cookies:el};if("string"==typeof r)return{redirect:r,cookies:el}}catch(r){return{redirect:`${ee}/error?error=${encodeURIComponent(r.message)}`,cookies:el}}let{user:z,session:G,isNewUser:Y}=await (0,A.default)({sessionToken:X.value,profile:I,account:K,options:U});if(eu){let r={name:z.name,email:z.email,picture:z.image,sub:null===(R=z.id)||void 0===R?void 0:R.toString()},o=await eo.jwt({token:r,user:z,account:K,isNewUser:Y,trigger:Y?"signUp":"signIn"}),u=await en.encode({...en,token:o}),p=new Date;p.setTime(p.getTime()+1e3*es);let E=X.chunk(u,{expires:p});el.push(...E)}else el.push({name:U.cookies.sessionToken.name,value:G.sessionToken,options:{...U.cookies.sessionToken.options,expires:G.expires}});if(await (null===(p=ei.signIn)||void 0===p?void 0:p.call(ei,{user:z,account:K,isNewUser:Y})),Y&&er.newUser)return{redirect:`${er.newUser}${er.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(et)}`,cookies:el};return{redirect:et,cookies:el}}catch(r){if("CreateUserError"===r.name)return{redirect:`${ee}/error?error=EmailCreateAccount`,cookies:el};return ec.error("CALLBACK_EMAIL_ERROR",r),{redirect:`${ee}/error?error=Callback`,cookies:el}}else if("credentials"===Z.type&&"POST"===G){let r;try{if(!(r=await Z.authorize(z,{query:D,body:z,headers:Y,method:G})))return{status:401,redirect:`${ee}/error?${new URLSearchParams({error:"CredentialsSignin",provider:Z.id})}`,cookies:el}}catch(r){return{status:401,redirect:`${ee}/error?error=${encodeURIComponent(r.message)}`,cookies:el}}let o={providerAccountId:r.id,type:"credentials",provider:Z.id};try{let u=await eo.signIn({user:r,account:o,credentials:z});if(!u)return{status:403,redirect:`${ee}/error?error=AccessDenied`,cookies:el};if("string"==typeof u)return{redirect:u,cookies:el}}catch(r){return{redirect:`${ee}/error?error=${encodeURIComponent(r.message)}`,cookies:el}}let u={name:r.name,email:r.email,picture:r.image,sub:null===(I=r.id)||void 0===I?void 0:I.toString()},p=await eo.jwt({token:u,user:r,account:o,isNewUser:!1,trigger:"signIn"}),E=await en.encode({...en,token:p}),A=new Date;A.setTime(A.getTime()+1e3*es);let J=X.chunk(E,{expires:A});return el.push(...J),await (null===(K=ei.signIn)||void 0===K?void 0:K.call(ei,{user:r,account:o})),{redirect:et,cookies:el}}return{status:500,body:`Error: Callback for provider type ${Z.type} not supported`,cookies:el}}},93693:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"callback",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(o,"providers",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(o,"session",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(o,"signin",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(o,"signout",{enumerable:!0,get:function(){return J.default}});var E=p(u(38840)),A=p(u(68966)),J=p(u(15681)),W=p(u(14393)),R=p(u(4137))},4137:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){return{headers:[{key:"Content-Type",value:"application/json"}],body:r.reduce((r,{id:o,name:u,type:p,signinUrl:E,callbackUrl:A})=>(r[o]={id:o,name:u,type:p,signinUrl:E,callbackUrl:A},r),{})}}},14393:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=session;var p=u(49105);async function session(r){var o,u,E,A,J,W;let{options:R,sessionStore:I,newSession:K,isUpdate:U}=r,{adapter:D,jwt:z,events:G,callbacks:Y,logger:X,session:{strategy:Z,maxAge:Q}}=R,ee={body:{},headers:[{key:"Content-Type",value:"application/json"}],cookies:[]},et=I.value;if(!et)return ee;if("jwt"===Z)try{let r=await z.decode({...z,token:et});if(!r)throw Error("JWT invalid");let E=await Y.jwt({token:r,...U&&{trigger:"update"},session:K}),A=(0,p.fromDate)(Q),J=await Y.session({session:{user:{name:null==r?void 0:r.name,email:null==r?void 0:r.email,image:null==r?void 0:r.picture},expires:A.toISOString()},token:E});ee.body=J;let W=await z.encode({...z,token:E,maxAge:R.session.maxAge}),D=I.chunk(W,{expires:A});null===(o=ee.cookies)||void 0===o||o.push(...D),await (null===(u=G.session)||void 0===u?void 0:u.call(G,{session:J,token:E}))}catch(r){X.error("JWT_SESSION_ERROR",r),null===(E=ee.cookies)||void 0===E||E.push(...I.clean())}else try{let{getSessionAndUser:r,deleteSession:o,updateSession:u}=D,E=await r(et);if(E&&E.session.expires.valueOf()<Date.now()&&(await o(et),E=null),E){let{user:r,session:o}=E,W=R.session.updateAge,I=o.expires.valueOf()-1e3*Q+1e3*W,D=(0,p.fromDate)(Q);I<=Date.now()&&await u({sessionToken:et,expires:D});let z=await Y.session({session:{user:{name:r.name,email:r.email,image:r.image},expires:o.expires.toISOString()},user:r,newSession:K,...U?{trigger:"update"}:{}});ee.body=z,null===(A=ee.cookies)||void 0===A||A.push({name:R.cookies.sessionToken.name,value:et,options:{...R.cookies.sessionToken.options,expires:D}}),await (null===(J=G.session)||void 0===J?void 0:J.call(G,{session:z}))}else et&&(null===(W=ee.cookies)||void 0===W||W.push(...I.clean()))}catch(r){X.error("SESSION_ERROR",r)}return ee}},68966:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),o.default=signin;var E=p(u(35896)),A=p(u(81499)),J=p(u(3727));async function signin(r){let{options:o,query:u,body:p}=r,{url:W,callbacks:R,logger:I,provider:K}=o;if(!K.type)return{status:500,text:`Error: Type not specified for ${K.name}`};if("oauth"===K.type)try{let r=await (0,E.default)({options:o,query:u});return r}catch(r){return I.error("SIGNIN_OAUTH_ERROR",{error:r,providerId:K.id}),{redirect:`${W}/error?error=OAuthSignin`}}else if("email"===K.type){var U;let r=null==p?void 0:p.email;if(!r)return{redirect:`${W}/error?error=EmailSignin`};let u=null!==(U=K.normalizeIdentifier)&&void 0!==U?U:r=>{let[o,u]=r.toLowerCase().trim().split("@");return u=u.split(",")[0],`${o}@${u}`};try{r=u(null==p?void 0:p.email)}catch(r){return I.error("SIGNIN_EMAIL_ERROR",{error:r,providerId:K.id}),{redirect:`${W}/error?error=EmailSignin`}}let E=await (0,J.default)({email:r,adapter:o.adapter}),D={providerAccountId:r,userId:r,type:"email",provider:K.id};try{let r=await R.signIn({user:E,account:D,email:{verificationRequest:!0}});if(!r)return{redirect:`${W}/error?error=AccessDenied`};if("string"==typeof r)return{redirect:r}}catch(r){return{redirect:`${W}/error?${new URLSearchParams({error:r})}`}}try{let u=await (0,A.default)(r,o);return{redirect:u}}catch(r){return I.error("SIGNIN_EMAIL_ERROR",{error:r,providerId:K.id}),{redirect:`${W}/error?error=EmailSignin`}}}return{redirect:`${W}/signin`}}},15681:(r,o)=>{"use strict";async function signout(r){var o,u;let{options:p,sessionStore:E}=r,{adapter:A,events:J,jwt:W,callbackUrl:R,logger:I,session:K}=p,U=null==E?void 0:E.value;if(!U)return{redirect:R};if("jwt"===K.strategy)try{let r=await W.decode({...W,token:U});await (null===(o=J.signOut)||void 0===o?void 0:o.call(J,{token:r}))}catch(r){I.error("SIGNOUT_ERROR",r)}else try{let r=await A.deleteSession(U);await (null===(u=J.signOut)||void 0===u?void 0:u.call(J,{session:r}))}catch(r){I.error("SIGNOUT_ERROR",r)}let D=E.clean();return{redirect:R,cookies:D}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=signout},67630:r=>{"use strict";r.exports=function(){return':root{--border-width:1px;--border-radius:0.5rem;--color-error:#c94b4b;--color-info:#157efb;--color-info-hover:#0f6ddb;--color-info-text:#fff}.__next-auth-theme-auto,.__next-auth-theme-light{--color-background:#ececec;--color-background-hover:hsla(0,0%,93%,.8);--color-background-card:#fff;--color-text:#000;--color-primary:#444;--color-control-border:#bbb;--color-button-active-background:#f9f9f9;--color-button-active-border:#aaa;--color-separator:#ccc}.__next-auth-theme-dark{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}@media (prefers-color-scheme:dark){.__next-auth-theme-auto{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}a.button,button{background-color:var(--provider-dark-bg,var(--color-background));color:var(--provider-dark-color,var(--color-primary))}a.button:hover,button:hover{background-color:var(--provider-dark-bg-hover,var(--color-background-hover))!important}#provider-logo{display:none!important}#provider-logo-dark{display:block!important;width:25px}}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit;margin:0;padding:0}body{background-color:var(--color-background);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;margin:0;padding:0}h1{font-weight:400}h1,p{color:var(--color-text);margin-bottom:1.5rem;padding:0 1rem}form{margin:0;padding:0}label{font-weight:500;margin-bottom:.25rem;text-align:left}input[type],label{color:var(--color-text);display:block}input[type]{background:var(--color-background-card);border:var(--border-width) solid var(--color-control-border);border-radius:var(--border-radius);box-sizing:border-box;font-size:1rem;padding:.5rem 1rem;width:100%}input[type]:focus{box-shadow:none}p{font-size:1.1rem;line-height:2rem}a.button{line-height:1rem;text-decoration:none}a.button:link,a.button:visited{background-color:var(--color-background);color:var(--color-primary)}button span{flex-grow:1}a.button,button{align-items:center;background-color:var(--provider-bg);border-color:rgba(0,0,0,.1);border-radius:var(--border-radius);color:var(--provider-color,var(--color-primary));display:flex;font-size:1.1rem;font-weight:500;justify-content:center;min-height:62px;padding:.75rem 1rem;position:relative;transition:all .1s ease-in-out}a.button:hover,button:hover{background-color:var(--provider-bg-hover,var(--color-background-hover));cursor:pointer}a.button:active,button:active{cursor:pointer}a.button #provider-logo,button #provider-logo{display:block;width:25px}a.button #provider-logo-dark,button #provider-logo-dark{display:none}#submitButton{background-color:var(--brand-color,var(--color-info));color:var(--button-text-color,var(--color-info-text));width:100%}#submitButton:hover{background-color:var(--button-hover-bg,var(--color-info-hover))!important}a.site{color:var(--color-primary);font-size:1rem;line-height:2rem;text-decoration:none}a.site:hover{text-decoration:underline}.page{box-sizing:border-box;display:grid;height:100%;margin:0;padding:0;place-items:center;position:absolute;width:100%}.page>div{text-align:center}.error a.button{margin-top:.5rem;padding-left:2rem;padding-right:2rem}.error .message{margin-bottom:1.5rem}.signin input[type=text]{display:block;margin-left:auto;margin-right:auto}.signin hr{border:0;border-top:1px solid var(--color-separator);display:block;margin:2rem auto 1rem;overflow:visible}.signin hr:before{background:var(--color-background-card);color:#888;content:"or";padding:0 .4rem;position:relative;top:-.7rem}.signin .error{background:#f5f5f5;background:var(--color-error);border-radius:.3rem;font-weight:500}.signin .error p{color:var(--color-info-text);font-size:.9rem;line-height:1.2rem;padding:.5rem 1rem;text-align:left}.signin form,.signin>div{display:block}.signin form input[type],.signin>div input[type]{margin-bottom:.5rem}.signin form button,.signin>div button{width:100%}.signin .provider+.provider{margin-top:1rem}.logo{display:inline-block;margin:1.25rem 0;max-height:70px;max-width:150px}.card{background-color:var(--color-background-card);border-radius:2rem;padding:1.25rem 2rem}.card .header{color:var(--color-primary)}.section-header{color:var(--color-text)}@media screen and (min-width:450px){.card{margin:2rem 0;width:368px}}@media screen and (max-width:450px){.card{margin:1rem 0;width:343px}}'}},87938:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0});var E={encode:!0,decode:!0,getToken:!0};o.decode=decode,o.encode=encode,o.getToken=getToken;var A=u(92473),J=p(u(85808)),W=u(62903),R=u(50358),I=u(73725);Object.keys(I).forEach(function(r){!("default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(E,r))&&(r in o&&o[r]===I[r]||Object.defineProperty(o,r,{enumerable:!0,get:function(){return I[r]}}))});let now=()=>Date.now()/1e3|0;async function encode(r){let{token:o={},secret:u,maxAge:p=2592e3,salt:E=""}=r,J=await getDerivedEncryptionKey(u,E);return await new A.EncryptJWT(o).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime(now()+p).setJti((0,W.v4)()).encrypt(J)}async function decode(r){let{token:o,secret:u,salt:p=""}=r;if(!o)return null;let E=await getDerivedEncryptionKey(u,p),{payload:J}=await (0,A.jwtDecrypt)(o,E,{clockTolerance:15});return J}async function getToken(r){var o,u,p,E;let{req:A,secureCookie:J=null!==(o=null===(u=process.env.NEXTAUTH_URL)||void 0===u?void 0:u.startsWith("https://"))&&void 0!==o?o:!!process.env.VERCEL,cookieName:W=J?"__Secure-next-auth.session-token":"next-auth.session-token",raw:I,decode:K=decode,logger:U=console,secret:D=null!==(p=process.env.NEXTAUTH_SECRET)&&void 0!==p?p:process.env.AUTH_SECRET}=r;if(!A)throw Error("Must pass `req` to JWT getToken()");let z=new R.SessionStore({name:W,options:{secure:J}},{cookies:A.cookies,headers:A.headers},U),G=z.value,Y=A.headers instanceof Headers?A.headers.get("authorization"):null===(E=A.headers)||void 0===E?void 0:E.authorization;if(!G&&(null==Y?void 0:Y.split(" ")[0])==="Bearer"){let r=Y.split(" ")[1];G=decodeURIComponent(r)}if(!G)return null;if(I)return G;try{return await K({token:G,secret:D})}catch(r){return null}}async function getDerivedEncryptionKey(r,o){return await (0,J.default)("sha256",r,o,`NextAuth.js Generated Encryption Key${o?` (${o})`:""}`,32)}},73725:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0})},40674:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.getServerSession=getServerSession,o.unstable_getServerSession=unstable_getServerSession;var p=u(80749),E=u(30515);async function NextAuthApiHandler(r,o,u){var A,J,W,R,I,K,U,D,z;let{nextauth:G,...Y}=r.query;null!==(A=u.secret)&&void 0!==A||(u.secret=null!==(J=null!==(W=null===(R=u.jwt)||void 0===R?void 0:R.secret)&&void 0!==W?W:process.env.NEXTAUTH_SECRET)&&void 0!==J?J:process.env.AUTH_SECRET);let X=await (0,p.AuthHandler)({req:{body:r.body,query:Y,cookies:r.cookies,headers:r.headers,method:r.method,action:null==G?void 0:G[0],providerId:null==G?void 0:G[1],error:null!==(I=r.query.error)&&void 0!==I?I:null==G?void 0:G[1]},options:u});if(o.status(null!==(K=X.status)&&void 0!==K?K:200),null===(U=X.cookies)||void 0===U||U.forEach(r=>(0,E.setCookie)(o,r)),null===(D=X.headers)||void 0===D||D.forEach(r=>o.setHeader(r.key,r.value)),X.redirect){if((null===(z=r.body)||void 0===z?void 0:z.json)!=="true"){o.status(302).setHeader("Location",X.redirect),o.end();return}return o.json({url:X.redirect})}return o.send(X.body)}async function NextAuthRouteHandler(r,o,A){var J,W,R,I;null!==(J=A.secret)&&void 0!==J||(A.secret=null!==(W=process.env.NEXTAUTH_SECRET)&&void 0!==W?W:process.env.AUTH_SECRET);let{headers:K,cookies:U}=u(24596),D=null===(R=await o.params)||void 0===R?void 0:R.nextauth,z=Object.fromEntries(r.nextUrl.searchParams),G=await (0,E.getBody)(r),Y=await (0,p.AuthHandler)({req:{body:G,query:z,cookies:Object.fromEntries((await U()).getAll().map(r=>[r.name,r.value])),headers:Object.fromEntries(await K()),method:r.method,action:null==D?void 0:D[0],providerId:null==D?void 0:D[1],error:null!==(I=z.error)&&void 0!==I?I:null==D?void 0:D[1]},options:A}),X=(0,E.toResponse)(Y),Z=X.headers.get("Location");return(null==G?void 0:G.json)==="true"&&Z?(X.headers.delete("Location"),X.headers.set("Content-Type","application/json"),new Response(JSON.stringify({url:Z}),{status:Y.status,headers:X.headers})):X}async function getServerSession(...r){var o,A,J;let W,R,I;let K=0===r.length||1===r.length;if(K){I=Object.assign({},r[0],{providers:[]});let{headers:o,cookies:p}=u(24596);W={headers:Object.fromEntries(await o()),cookies:Object.fromEntries((await p()).getAll().map(r=>[r.name,r.value]))},R={getHeader(){},setCookie(){},setHeader(){}}}else W=r[0],R=r[1],I=Object.assign({},r[2],{providers:[]});null!==(A=(o=I).secret)&&void 0!==A||(o.secret=null!==(J=process.env.NEXTAUTH_SECRET)&&void 0!==J?J:process.env.AUTH_SECRET);let U=await (0,p.AuthHandler)({options:I,req:{action:"session",method:"GET",cookies:W.cookies,headers:W.headers}}),{body:D,cookies:z,status:G=200}=U;if(null==z||z.forEach(r=>(0,E.setCookie)(R,r)),D&&"string"!=typeof D&&Object.keys(D).length){if(200===G)return K&&delete D.expires,D;throw Error(D.message)}return null}async function unstable_getServerSession(...r){return await getServerSession(...r)}o.default=function(...r){var o;return 1===r.length?async(o,u)=>null!=u&&u.params?await NextAuthRouteHandler(o,u,r[0]):await NextAuthApiHandler(o,u,r[0]):null!==(o=r[1])&&void 0!==o&&o.params?NextAuthRouteHandler(...r):NextAuthApiHandler(...r)}},30515:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getBody=getBody,o.setCookie=function(r,o){var u;let E=null!==(u=r.getHeader("Set-Cookie"))&&void 0!==u?u:[];Array.isArray(E)||(E=[E]);let{name:A,value:J,options:W}=o,R=(0,p.serialize)(A,J,W);E.push(R),r.setHeader("Set-Cookie",E)},o.toResponse=function(r){var o,u,E;let A=new Headers(null===(o=r.headers)||void 0===o?void 0:o.reduce((r,{key:o,value:u})=>(r[o]=u,r),{}));null===(u=r.cookies)||void 0===u||u.forEach(r=>{let{name:o,value:u,options:E}=r,J=(0,p.serialize)(o,u,E);A.has("Set-Cookie")?A.append("Set-Cookie",J):A.set("Set-Cookie",J)});let J=r.body;"application/json"===A.get("content-type")?J=JSON.stringify(r.body):"application/x-www-form-urlencoded"===A.get("content-type")&&(J=new URLSearchParams(r.body).toString());let W=r.redirect?302:null!==(E=r.status)&&void 0!==E?E:200,R=new Response(J,{headers:A,status:W});return r.redirect&&R.headers.set("Location",r.redirect),R};var p=u(95011);async function getBody(r){if(!("body"in r)||!r.body||"POST"!==r.method)return;let o=r.headers.get("content-type");if(null!=o&&o.includes("application/json"))return await r.json();if(null!=o&&o.includes("application/x-www-form-urlencoded")){let o=new URLSearchParams(await r.text());return Object.fromEntries(o)}}},72538:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.detectOrigin=function(r,o){var u;return(null!==(u=process.env.VERCEL)&&void 0!==u?u:process.env.AUTH_TRUST_HOST)?`${"http"===o?"http":"https"}://${r}`:process.env.NEXTAUTH_URL}},20546:(r,o,u)=>{"use strict";var p=u(2049);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.proxyLogger=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;arguments.length>1&&arguments[1];try{return r}catch(r){return A}},o.setLogger=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;o||(A.debug=function(){}),r.error&&(A.error=r.error),r.warn&&(A.warn=r.warn),r.debug&&(A.debug=r.debug)},p(u(21264)),p(u(92174)),p(u(48824));var E=u(32133),A={error:function(r,o){o=function formatError(r){var o;return r instanceof Error&&!(r instanceof E.UnknownError)?{message:r.message,stack:r.stack,name:r.name}:(null!=r&&r.error&&(r.error=formatError(r.error),r.message=null!==(o=r.message)&&void 0!==o?o:r.error.message),r)}(o),console.error("[next-auth][error][".concat(r,"]"),"\nhttps://next-auth.js.org/errors#".concat(r.toLowerCase()),o.message,o)},warn:function(r){console.warn("[next-auth][warn][".concat(r,"]"),"\nhttps://next-auth.js.org/warnings#".concat(r.toLowerCase()))},debug:function(r,o){console.log("[next-auth][debug][".concat(r,"]"),o)}};o.default=A},96300:(r,o)=>{"use strict";function isObject(r){return r&&"object"==typeof r&&!Array.isArray(r)}Object.defineProperty(o,"__esModule",{value:!0}),o.merge=function merge(r,...o){if(!o.length)return r;let u=o.shift();if(isObject(r)&&isObject(u))for(let o in u)isObject(u[o])?(r[o]||Object.assign(r,{[o]:{}}),merge(r[o],u[o])):Object.assign(r,{[o]:u[o]});return merge(r,...o)}},44254:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){var o;let u=new URL("http://localhost:3000/api/auth");r&&!r.startsWith("http")&&(r=`https://${r}`);let p=new URL(null!==(o=r)&&void 0!==o?o:u),E=("/"===p.pathname?u.pathname:p.pathname).replace(/\/$/,""),A=`${p.origin}${E}`;return{origin:p.origin,host:p.host,path:E,base:A,toString:()=>A}}},1099:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"DraftMode",{enumerable:!0,get:function(){return DraftMode}});let p=u(3657);let DraftMode=class DraftMode{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,p.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,p.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(r){this._provider=r}};("function"==typeof o.default||"object"==typeof o.default&&null!==o.default)&&void 0===o.default.__esModule&&(Object.defineProperty(o.default,"__esModule",{value:!0}),Object.assign(o.default,o),r.exports=o.default)},92491:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),function(r,o){for(var u in o)Object.defineProperty(r,u,{enumerable:!0,get:o[u]})}(o,{headers:function(){return headers},cookies:function(){return cookies},draftMode:function(){return draftMode}});let p=u(96888),E=u(21306),A=u(76449),J=u(91877),W=u(25528),R=u(3657),I=u(1099);function headers(){if((0,R.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return E.HeadersAdapter.seal(new Headers({}));let r=J.requestAsyncStorage.getStore();if(!r)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return r.headers}function cookies(){if((0,R.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return p.RequestCookiesAdapter.seal(new A.RequestCookies(new Headers({})));let r=J.requestAsyncStorage.getStore();if(!r)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let o=W.actionAsyncStorage.getStore();return o&&(o.isAction||o.isAppRoute)?r.mutableCookies:r.cookies}function draftMode(){let r=J.requestAsyncStorage.getStore();if(!r)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new I.DraftMode(r.draftMode)}("function"==typeof o.default||"object"==typeof o.default&&null!==o.default)&&void 0===o.default.__esModule&&(Object.defineProperty(o.default,"__esModule",{value:!0}),Object.assign(o.default,o),r.exports=o.default)},21306:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),function(r,o){for(var u in o)Object.defineProperty(r,u,{enumerable:!0,get:o[u]})}(o,{ReadonlyHeadersError:function(){return ReadonlyHeadersError},HeadersAdapter:function(){return HeadersAdapter}});let p=u(49165);let ReadonlyHeadersError=class ReadonlyHeadersError extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ReadonlyHeadersError}};let HeadersAdapter=class HeadersAdapter extends Headers{constructor(r){super(),this.headers=new Proxy(r,{get(o,u,E){if("symbol"==typeof u)return p.ReflectAdapter.get(o,u,E);let A=u.toLowerCase(),J=Object.keys(r).find(r=>r.toLowerCase()===A);if(void 0!==J)return p.ReflectAdapter.get(o,J,E)},set(o,u,E,A){if("symbol"==typeof u)return p.ReflectAdapter.set(o,u,E,A);let J=u.toLowerCase(),W=Object.keys(r).find(r=>r.toLowerCase()===J);return p.ReflectAdapter.set(o,W??u,E,A)},has(o,u){if("symbol"==typeof u)return p.ReflectAdapter.has(o,u);let E=u.toLowerCase(),A=Object.keys(r).find(r=>r.toLowerCase()===E);return void 0!==A&&p.ReflectAdapter.has(o,A)},deleteProperty(o,u){if("symbol"==typeof u)return p.ReflectAdapter.deleteProperty(o,u);let E=u.toLowerCase(),A=Object.keys(r).find(r=>r.toLowerCase()===E);return void 0===A||p.ReflectAdapter.deleteProperty(o,A)}})}static seal(r){return new Proxy(r,{get(r,o,u){switch(o){case"append":case"delete":case"set":return ReadonlyHeadersError.callable;default:return p.ReflectAdapter.get(r,o,u)}}})}merge(r){return Array.isArray(r)?r.join(", "):r}static from(r){return r instanceof Headers?r:new HeadersAdapter(r)}append(r,o){let u=this.headers[r];"string"==typeof u?this.headers[r]=[u,o]:Array.isArray(u)?u.push(o):this.headers[r]=o}delete(r){delete this.headers[r]}get(r){let o=this.headers[r];return void 0!==o?this.merge(o):null}has(r){return void 0!==this.headers[r]}set(r,o){this.headers[r]=o}forEach(r,o){for(let[u,p]of this.entries())r.call(o,p,u,this)}*entries(){for(let r of Object.keys(this.headers)){let o=r.toLowerCase(),u=this.get(o);yield[o,u]}}*keys(){for(let r of Object.keys(this.headers)){let o=r.toLowerCase();yield o}}*values(){for(let r of Object.keys(this.headers)){let o=this.get(r);yield o}}[Symbol.iterator](){return this.entries()}}},49165:(r,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"ReflectAdapter",{enumerable:!0,get:function(){return ReflectAdapter}});let ReflectAdapter=class ReflectAdapter{static get(r,o,u){let p=Reflect.get(r,o,u);return"function"==typeof p?p.bind(r):p}static set(r,o,u,p){return Reflect.set(r,o,u,p)}static has(r,o){return Reflect.has(r,o)}static deleteProperty(r,o){return Reflect.deleteProperty(r,o)}}},96888:(r,o,u)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),function(r,o){for(var u in o)Object.defineProperty(r,u,{enumerable:!0,get:o[u]})}(o,{ReadonlyRequestCookiesError:function(){return ReadonlyRequestCookiesError},RequestCookiesAdapter:function(){return RequestCookiesAdapter},getModifiedCookieValues:function(){return getModifiedCookieValues},appendMutableCookies:function(){return appendMutableCookies},MutableRequestCookiesAdapter:function(){return MutableRequestCookiesAdapter}});let p=u(76449),E=u(49165);let ReadonlyRequestCookiesError=class ReadonlyRequestCookiesError extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new ReadonlyRequestCookiesError}};let RequestCookiesAdapter=class RequestCookiesAdapter{static seal(r){return new Proxy(r,{get(r,o,u){switch(o){case"clear":case"delete":case"set":return ReadonlyRequestCookiesError.callable;default:return E.ReflectAdapter.get(r,o,u)}}})}};let A=Symbol.for("next.mutated.cookies");function getModifiedCookieValues(r){let o=r[A];return o&&Array.isArray(o)&&0!==o.length?o:[]}function appendMutableCookies(r,o){let u=getModifiedCookieValues(o);if(0===u.length)return!1;let E=new p.ResponseCookies(r),A=E.getAll();for(let r of u)E.set(r);for(let r of A)E.set(r);return!0}let MutableRequestCookiesAdapter=class MutableRequestCookiesAdapter{static wrap(r,o){let u=new p.ResponseCookies(new Headers);for(let o of r.getAll())u.set(o);let J=[],W=new Set,updateResponseCookies=()=>{var r;let E=null==fetch.__nextGetStaticStore?void 0:null==(r=fetch.__nextGetStaticStore.call(fetch))?void 0:r.getStore();E&&(E.pathWasRevalidated=!0);let A=u.getAll();if(J=A.filter(r=>W.has(r.name)),o){let r=[];for(let o of J){let u=new p.ResponseCookies(new Headers);u.set(o),r.push(u.toString())}o(r)}};return new Proxy(u,{get(r,o,u){switch(o){case A:return J;case"delete":return function(...o){W.add("string"==typeof o[0]?o[0]:o[0].name);try{r.delete(...o)}finally{updateResponseCookies()}};case"set":return function(...o){W.add("string"==typeof o[0]?o[0]:o[0].name);try{return r.set(...o)}finally{updateResponseCookies()}};default:return E.ReflectAdapter.get(r,o,u)}}})}}},24596:(r,o,u)=>{"use strict";r.exports=u(92491)},72369:(r,o,u)=>{o.OAuth=u(91158).OAuth,o.OAuthEcho=u(91158).OAuthEcho,o.OAuth2=u(21679).OAuth2},70495:r=>{"use strict";r.exports.isAnEarlyCloseHost=function(r){return r&&r.match(".*google(apis)?.com$")}},91158:(r,o,u)=>{var p=u(6113),E=u(33835),A=u(13685),J=u(95687),W=u(57310),R=u(63477),I=u(70495);o.OAuth=function(r,o,u,p,E,A,J,W,R){if(this._isEcho=!1,this._requestUrl=r,this._accessUrl=o,this._consumerKey=u,this._consumerSecret=this._encodeData(p),"RSA-SHA1"==J&&(this._privateKey=p),this._version=E,void 0===A?this._authorize_callback="oob":this._authorize_callback=A,"PLAINTEXT"!=J&&"HMAC-SHA1"!=J&&"RSA-SHA1"!=J)throw Error("Un-supported signature method: "+J);this._signatureMethod=J,this._nonceSize=W||32,this._headers=R||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._clientOptions=this._defaultClientOptions={requestTokenHttpMethod:"POST",accessTokenHttpMethod:"POST",followRedirects:!0},this._oauthParameterSeperator=","},o.OAuthEcho=function(r,o,u,p,E,A,J,W){if(this._isEcho=!0,this._realm=r,this._verifyCredentials=o,this._consumerKey=u,this._consumerSecret=this._encodeData(p),"RSA-SHA1"==A&&(this._privateKey=p),this._version=E,"PLAINTEXT"!=A&&"HMAC-SHA1"!=A&&"RSA-SHA1"!=A)throw Error("Un-supported signature method: "+A);this._signatureMethod=A,this._nonceSize=J||32,this._headers=W||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._oauthParameterSeperator=","},o.OAuthEcho.prototype=o.OAuth.prototype,o.OAuth.prototype._getTimestamp=function(){return Math.floor(new Date().getTime()/1e3)},o.OAuth.prototype._encodeData=function(r){return null==r||""==r?"":encodeURIComponent(r).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},o.OAuth.prototype._decodeData=function(r){return null!=r&&(r=r.replace(/\+/g," ")),decodeURIComponent(r)},o.OAuth.prototype._getSignature=function(r,o,u,p){var E=this._createSignatureBase(r,o,u);return this._createSignature(E,p)},o.OAuth.prototype._normalizeUrl=function(r){var o=W.parse(r,!0),u="";return o.port&&("http:"==o.protocol&&"80"!=o.port||"https:"==o.protocol&&"443"!=o.port)&&(u=":"+o.port),o.pathname&&""!=o.pathname||(o.pathname="/"),o.protocol+"//"+o.hostname+u+o.pathname},o.OAuth.prototype._isParameterNameAnOAuthParameter=function(r){var o=r.match("^oauth_");return!!o&&"oauth_"===o[0]},o.OAuth.prototype._buildAuthorizationHeaders=function(r){var o="OAuth ";this._isEcho&&(o+='realm="'+this._realm+'",');for(var u=0;u<r.length;u++)this._isParameterNameAnOAuthParameter(r[u][0])&&(o+=""+this._encodeData(r[u][0])+'="'+this._encodeData(r[u][1])+'"'+this._oauthParameterSeperator);return o.substring(0,o.length-this._oauthParameterSeperator.length)},o.OAuth.prototype._makeArrayOfArgumentsHash=function(r){var o=[];for(var u in r)if(r.hasOwnProperty(u)){var p=r[u];if(Array.isArray(p))for(var E=0;E<p.length;E++)o[o.length]=[u,p[E]];else o[o.length]=[u,p]}return o},o.OAuth.prototype._sortRequestParams=function(r){return r.sort(function(r,o){return r[0]==o[0]?r[1]<o[1]?-1:1:r[0]<o[0]?-1:1}),r},o.OAuth.prototype._normaliseRequestParams=function(r){for(var o=this._makeArrayOfArgumentsHash(r),u=0;u<o.length;u++)o[u][0]=this._encodeData(o[u][0]),o[u][1]=this._encodeData(o[u][1]);o=this._sortRequestParams(o);for(var r="",u=0;u<o.length;u++)r+=o[u][0]+"="+o[u][1],u<o.length-1&&(r+="&");return r},o.OAuth.prototype._createSignatureBase=function(r,o,u){return o=this._encodeData(this._normalizeUrl(o)),u=this._encodeData(u),r.toUpperCase()+"&"+o+"&"+u},o.OAuth.prototype._createSignature=function(r,o){if(void 0===o)var o="";else o=this._encodeData(o);var u=this._consumerSecret+"&"+o,A="";return"PLAINTEXT"==this._signatureMethod?A=u:"RSA-SHA1"==this._signatureMethod?(u=this._privateKey||"",A=p.createSign("RSA-SHA1").update(r).sign(u,"base64")):A=p.Hmac?p.createHmac("sha1",u).update(r).digest("base64"):E.HMACSHA1(u,r),A},o.OAuth.prototype.NONCE_CHARS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],o.OAuth.prototype._getNonce=function(r){for(var o,u=[],p=this.NONCE_CHARS,E=p.length,A=0;A<r;A++)o=Math.floor(Math.random()*E),u[A]=p[o];return u.join("")},o.OAuth.prototype._createClient=function(r,o,u,p,E,W){return(W?J:A).request({host:o,port:r,path:p,method:u,headers:E})},o.OAuth.prototype._prepareParameters=function(r,o,u,p,E){var A={oauth_timestamp:this._getTimestamp(),oauth_nonce:this._getNonce(this._nonceSize),oauth_version:this._version,oauth_signature_method:this._signatureMethod,oauth_consumer_key:this._consumerKey};if(r&&(A.oauth_token=r),this._isEcho)K=this._getSignature("GET",this._verifyCredentials,this._normaliseRequestParams(A),o);else{if(E)for(var J in E)E.hasOwnProperty(J)&&(A[J]=E[J]);var I=W.parse(p,!1);if(I.query){var K,U,D=R.parse(I.query);for(var J in D){var z=D[J];if("object"==typeof z)for(U in z)A[J+"["+U+"]"]=z[U];else A[J]=z}}K=this._getSignature(u,p,this._normaliseRequestParams(A),o)}var G=this._sortRequestParams(this._makeArrayOfArgumentsHash(A));return G[G.length]=["oauth_signature",K],G},o.OAuth.prototype._performSecureRequest=function(r,o,u,p,E,A,J,K){var U,D,z=this._prepareParameters(r,o,u,p,E);J||(J="application/x-www-form-urlencoded");var G=W.parse(p,!1);"http:"!=G.protocol||G.port||(G.port=80),"https:"!=G.protocol||G.port||(G.port=443);var Y={},X=this._buildAuthorizationHeaders(z);for(var Z in this._isEcho?Y["X-Verify-Credentials-Authorization"]=X:Y.Authorization=X,Y.Host=G.host,this._headers)this._headers.hasOwnProperty(Z)&&(Y[Z]=this._headers[Z]);for(var Z in E)this._isParameterNameAnOAuthParameter(Z)&&delete E[Z];("POST"==u||"PUT"==u)&&null==A&&null!=E&&(A=R.stringify(E).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")),A?Buffer.isBuffer(A)?Y["Content-length"]=A.length:Y["Content-length"]=Buffer.byteLength(A):Y["Content-length"]=0,Y["Content-Type"]=J,G.pathname&&""!=G.pathname||(G.pathname="/"),U=G.query?G.pathname+"?"+G.query:G.pathname,D="https:"==G.protocol?this._createClient(G.port,G.hostname,u,U,Y,!0):this._createClient(G.port,G.hostname,u,U,Y);var Q=this._clientOptions;if(!K)return("POST"==u||"PUT"==u)&&null!=A&&""!=A&&D.write(A),D;var ee="",et=this,er=I.isAnEarlyCloseHost(G.hostname),en=!1,passBackControl=function(p){en||(en=!0,p.statusCode>=200&&p.statusCode<=299?K(null,ee,p):(301==p.statusCode||302==p.statusCode)&&Q.followRedirects&&p.headers&&p.headers.location?et._performSecureRequest(r,o,u,p.headers.location,E,A,J,K):K({statusCode:p.statusCode,data:ee},ee,p))};D.on("response",function(r){r.setEncoding("utf8"),r.on("data",function(r){ee+=r}),r.on("end",function(){passBackControl(r)}),r.on("close",function(){er&&passBackControl(r)})}),D.on("error",function(r){en||(en=!0,K(r))}),("POST"==u||"PUT"==u)&&null!=A&&""!=A&&D.write(A),D.end()},o.OAuth.prototype.setClientOptions=function(r){var o,u={},p=Object.prototype.hasOwnProperty;for(o in this._defaultClientOptions)p.call(r,o)?u[o]=r[o]:u[o]=this._defaultClientOptions[o];this._clientOptions=u},o.OAuth.prototype.getOAuthAccessToken=function(r,o,u,p){var E={};"function"==typeof u?p=u:E.oauth_verifier=u,this._performSecureRequest(r,o,this._clientOptions.accessTokenHttpMethod,this._accessUrl,E,null,null,function(r,o,u){if(r)p(r);else{var E=R.parse(o),A=E.oauth_token;delete E.oauth_token;var J=E.oauth_token_secret;delete E.oauth_token_secret,p(null,A,J,E)}})},o.OAuth.prototype.getProtectedResource=function(r,o,u,p,E){this._performSecureRequest(u,p,o,r,null,"",null,E)},o.OAuth.prototype.delete=function(r,o,u,p){return this._performSecureRequest(o,u,"DELETE",r,null,"",null,p)},o.OAuth.prototype.get=function(r,o,u,p){return this._performSecureRequest(o,u,"GET",r,null,"",null,p)},o.OAuth.prototype._putOrPost=function(r,o,u,p,E,A,J){var W=null;return"function"==typeof A&&(J=A,A=null),"string"==typeof E||Buffer.isBuffer(E)||(A="application/x-www-form-urlencoded",W=E,E=null),this._performSecureRequest(u,p,r,o,W,E,A,J)},o.OAuth.prototype.put=function(r,o,u,p,E,A){return this._putOrPost("PUT",r,o,u,p,E,A)},o.OAuth.prototype.post=function(r,o,u,p,E,A){return this._putOrPost("POST",r,o,u,p,E,A)},o.OAuth.prototype.getOAuthRequestToken=function(r,o){"function"==typeof r&&(o=r,r={}),this._authorize_callback&&(r.oauth_callback=this._authorize_callback),this._performSecureRequest(null,null,this._clientOptions.requestTokenHttpMethod,this._requestUrl,r,null,null,function(r,u,p){if(r)o(r);else{var E=R.parse(u),A=E.oauth_token,J=E.oauth_token_secret;delete E.oauth_token,delete E.oauth_token_secret,o(null,A,J,E)}})},o.OAuth.prototype.signUrl=function(r,o,u,p){if(void 0===p)var p="GET";for(var E=this._prepareParameters(o,u,p,r,{}),A=W.parse(r,!1),J="",R=0;R<E.length;R++)J+=E[R][0]+"="+this._encodeData(E[R][1])+"&";return J=J.substring(0,J.length-1),A.protocol+"//"+A.host+A.pathname+"?"+J},o.OAuth.prototype.authHeader=function(r,o,u,p){if(void 0===p)var p="GET";var E=this._prepareParameters(o,u,p,r,{});return this._buildAuthorizationHeaders(E)}},21679:(r,o,u)=>{var p=u(63477),E=(u(6113),u(95687)),A=u(13685),J=u(57310),W=u(70495);o.OAuth2=function(r,o,u,p,E,A){this._clientId=r,this._clientSecret=o,this._baseSite=u,this._authorizeUrl=p||"/oauth/authorize",this._accessTokenUrl=E||"/oauth/access_token",this._accessTokenName="access_token",this._authMethod="Bearer",this._customHeaders=A||{},this._useAuthorizationHeaderForGET=!1,this._agent=void 0},o.OAuth2.prototype.setAgent=function(r){this._agent=r},o.OAuth2.prototype.setAccessTokenName=function(r){this._accessTokenName=r},o.OAuth2.prototype.setAuthMethod=function(r){this._authMethod=r},o.OAuth2.prototype.useAuthorizationHeaderforGET=function(r){this._useAuthorizationHeaderForGET=r},o.OAuth2.prototype._getAccessTokenUrl=function(){return this._baseSite+this._accessTokenUrl},o.OAuth2.prototype.buildAuthHeader=function(r){return this._authMethod+" "+r},o.OAuth2.prototype._chooseHttpLibrary=function(r){var o=E;return"https:"!=r.protocol&&(o=A),o},o.OAuth2.prototype._request=function(r,o,u,E,A,W){var R=J.parse(o,!0);"https:"!=R.protocol||R.port||(R.port=443);var I=this._chooseHttpLibrary(R),K={};for(var U in this._customHeaders)K[U]=this._customHeaders[U];if(u)for(var U in u)K[U]=u[U];K.Host=R.host,K["User-Agent"]||(K["User-Agent"]="Node-oauth"),E?Buffer.isBuffer(E)?K["Content-Length"]=E.length:K["Content-Length"]=Buffer.byteLength(E):K["Content-length"]=0,!A||"Authorization"in K||(R.query||(R.query={}),R.query[this._accessTokenName]=A);var D=p.stringify(R.query);D&&(D="?"+D);var z={host:R.hostname,port:R.port,path:R.pathname+D,method:r,headers:K};this._executeRequest(I,z,E,W)},o.OAuth2.prototype._executeRequest=function(r,o,u,p){var E=W.isAnEarlyCloseHost(o.host),A=!1;function passBackControl(r,o){A||(A=!0,r.statusCode>=200&&r.statusCode<=299||301==r.statusCode||302==r.statusCode?p(null,o,r):p({statusCode:r.statusCode,data:o}))}var J="";this._agent&&(o.agent=this._agent);var R=r.request(o);R.on("response",function(r){r.on("data",function(r){J+=r}),r.on("close",function(o){E&&passBackControl(r,J)}),r.addListener("end",function(){passBackControl(r,J)})}),R.on("error",function(r){A=!0,p(r)}),("POST"==o.method||"PUT"==o.method)&&u&&R.write(u),R.end()},o.OAuth2.prototype.getAuthorizeUrl=function(r){var r=r||{};return r.client_id=this._clientId,this._baseSite+this._authorizeUrl+"?"+p.stringify(r)},o.OAuth2.prototype.getOAuthAccessToken=function(r,o,u){var o=o||{};o.client_id=this._clientId,o.client_secret=this._clientSecret;var E="refresh_token"===o.grant_type?"refresh_token":"code";o[E]=r;var A=p.stringify(o);this._request("POST",this._getAccessTokenUrl(),{"Content-Type":"application/x-www-form-urlencoded"},A,null,function(r,o,E){if(r)u(r);else{try{A=JSON.parse(o)}catch(r){A=p.parse(o)}var A,J=A.access_token,W=A.refresh_token;delete A.refresh_token,u(null,J,W,A)}})},o.OAuth2.prototype.getProtectedResource=function(r,o,u){this._request("GET",r,{},"",o,u)},o.OAuth2.prototype.get=function(r,o,u){if(this._useAuthorizationHeaderForGET){var p={Authorization:this.buildAuthHeader(o)};o=null}else p={};this._request("GET",r,p,"",o,u)}},33835:(r,o)=>{function str2rstr_utf8(r){for(var o,u,p="",E=-1;++E<r.length;)o=r.charCodeAt(E),u=E+1<r.length?r.charCodeAt(E+1):0,55296<=o&&o<=56319&&56320<=u&&u<=57343&&(o=65536+((1023&o)<<10)+(1023&u),E++),o<=127?p+=String.fromCharCode(o):o<=2047?p+=String.fromCharCode(192|o>>>6&31,128|63&o):o<=65535?p+=String.fromCharCode(224|o>>>12&15,128|o>>>6&63,128|63&o):o<=2097151&&(p+=String.fromCharCode(240|o>>>18&7,128|o>>>12&63,128|o>>>6&63,128|63&o));return p}function rstr2binb(r){for(var o=Array(r.length>>2),u=0;u<o.length;u++)o[u]=0;for(var u=0;u<8*r.length;u+=8)o[u>>5]|=(255&r.charCodeAt(u/8))<<24-u%32;return o}function binb_sha1(r,o){r[o>>5]|=128<<24-o%32,r[(o+64>>9<<4)+15]=o;for(var u=Array(80),p=1732584193,E=-271733879,A=-1732584194,J=271733878,W=-1009589776,R=0;R<r.length;R+=16){for(var I=p,K=E,U=A,D=J,z=W,G=0;G<80;G++){G<16?u[G]=r[R+G]:u[G]=bit_rol(u[G-3]^u[G-8]^u[G-14]^u[G-16],1);var Y,X,Z,Q,ee,et=safe_add(safe_add(bit_rol(p,5),(Y=G,X=E,Z=A,Q=J,Y<20?X&Z|~X&Q:Y<40?X^Z^Q:Y<60?X&Z|X&Q|Z&Q:X^Z^Q)),safe_add(safe_add(W,u[G]),(ee=G)<20?1518500249:ee<40?1859775393:ee<60?-1894007588:-899497514));W=J,J=A,A=bit_rol(E,30),E=p,p=et}p=safe_add(p,I),E=safe_add(E,K),A=safe_add(A,U),J=safe_add(J,D),W=safe_add(W,z)}return[p,E,A,J,W]}function safe_add(r,o){var u=(65535&r)+(65535&o);return(r>>16)+(o>>16)+(u>>16)<<16|65535&u}function bit_rol(r,o){return r<<o|r>>>32-o}o.HMACSHA1=function(r,o){return function(r){for(var o="",u=r.length,p=0;p<u;p+=3)for(var E=r.charCodeAt(p)<<16|(p+1<u?r.charCodeAt(p+1)<<8:0)|(p+2<u?r.charCodeAt(p+2):0),A=0;A<4;A++)8*p+6*A>8*r.length?o+="=":o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(E>>>6*(3-A)&63);return o}(function(r,o){var u=rstr2binb(r);u.length>16&&(u=binb_sha1(u,8*r.length));for(var p=Array(16),E=Array(16),A=0;A<16;A++)p[A]=909522486^u[A],E[A]=1549556828^u[A];var J=binb_sha1(p.concat(rstr2binb(o)),512+8*o.length);return function(r){for(var o="",u=0;u<32*r.length;u+=8)o+=String.fromCharCode(r[u>>5]>>>24-u%32&255);return o}(binb_sha1(E.concat(J),672))}(str2rstr_utf8(r),str2rstr_utf8(o)))}},29173:(r,o,u)=>{"use strict";var p=u(6113);function objectHash(r,o){return o=applyDefaults(r,o),function(r,o){if(void 0===(u="passthrough"!==o.algorithm?p.createHash(o.algorithm):new PassThrough).write&&(u.write=u.update,u.end=u.update),typeHasher(o,u).dispatch(r),u.update||u.end(""),u.digest)return u.digest("buffer"===o.encoding?void 0:o.encoding);var u,E=u.read();return"buffer"===o.encoding?E:E.toString(o.encoding)}(r,o)}(o=r.exports=objectHash).sha1=function(r){return objectHash(r)},o.keys=function(r){return objectHash(r,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},o.MD5=function(r){return objectHash(r,{algorithm:"md5",encoding:"hex"})},o.keysMD5=function(r){return objectHash(r,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var E=p.getHashes?p.getHashes().slice():["sha1","md5"];E.push("passthrough");var A=["buffer","hex","binary","base64"];function applyDefaults(r,o){o=o||{};var u={};if(u.algorithm=o.algorithm||"sha1",u.encoding=o.encoding||"hex",u.excludeValues=!!o.excludeValues,u.algorithm=u.algorithm.toLowerCase(),u.encoding=u.encoding.toLowerCase(),u.ignoreUnknown=!0===o.ignoreUnknown,u.respectType=!1!==o.respectType,u.respectFunctionNames=!1!==o.respectFunctionNames,u.respectFunctionProperties=!1!==o.respectFunctionProperties,u.unorderedArrays=!0===o.unorderedArrays,u.unorderedSets=!1!==o.unorderedSets,u.unorderedObjects=!1!==o.unorderedObjects,u.replacer=o.replacer||void 0,u.excludeKeys=o.excludeKeys||void 0,void 0===r)throw Error("Object argument required.");for(var p=0;p<E.length;++p)E[p].toLowerCase()===u.algorithm.toLowerCase()&&(u.algorithm=E[p]);if(-1===E.indexOf(u.algorithm))throw Error('Algorithm "'+u.algorithm+'"  not supported. supported values: '+E.join(", "));if(-1===A.indexOf(u.encoding)&&"passthrough"!==u.algorithm)throw Error('Encoding "'+u.encoding+'"  not supported. supported values: '+A.join(", "));return u}function isNativeFunction(r){return"function"==typeof r&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(r))}function typeHasher(r,o,u){u=u||[];var write=function(r){return o.update?o.update(r,"utf8"):o.write(r,"utf8")};return{dispatch:function(o){r.replacer&&(o=r.replacer(o));var u=typeof o;return null===o&&(u="null"),this["_"+u](o)},_object:function(o){var p=Object.prototype.toString.call(o),E=/\[object (.*)\]/i.exec(p);E=(E=E?E[1]:"unknown:["+p+"]").toLowerCase();var A=null;if((A=u.indexOf(o))>=0)return this.dispatch("[CIRCULAR:"+A+"]");if(u.push(o),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(o))return write("buffer:"),write(o);if("object"!==E&&"function"!==E&&"asyncfunction"!==E){if(this["_"+E])this["_"+E](o);else if(r.ignoreUnknown)return write("["+E+"]");else throw Error('Unknown object type "'+E+'"')}else{var J=Object.keys(o);r.unorderedObjects&&(J=J.sort()),!1===r.respectType||isNativeFunction(o)||J.splice(0,0,"prototype","__proto__","constructor"),r.excludeKeys&&(J=J.filter(function(o){return!r.excludeKeys(o)})),write("object:"+J.length+":");var W=this;return J.forEach(function(u){W.dispatch(u),write(":"),r.excludeValues||W.dispatch(o[u]),write(",")})}},_array:function(o,p){p=void 0!==p?p:!1!==r.unorderedArrays;var E=this;if(write("array:"+o.length+":"),!p||o.length<=1)return o.forEach(function(r){return E.dispatch(r)});var A=[],J=o.map(function(o){var p=new PassThrough,E=u.slice();return typeHasher(r,p,E).dispatch(o),A=A.concat(E.slice(u.length)),p.read().toString()});return u=u.concat(A),J.sort(),this._array(J,!1)},_date:function(r){return write("date:"+r.toJSON())},_symbol:function(r){return write("symbol:"+r.toString())},_error:function(r){return write("error:"+r.toString())},_boolean:function(r){return write("bool:"+r.toString())},_string:function(r){write("string:"+r.length+":"),write(r.toString())},_function:function(o){write("fn:"),isNativeFunction(o)?this.dispatch("[native]"):this.dispatch(o.toString()),!1!==r.respectFunctionNames&&this.dispatch("function-name:"+String(o.name)),r.respectFunctionProperties&&this._object(o)},_number:function(r){return write("number:"+r.toString())},_xml:function(r){return write("xml:"+r.toString())},_null:function(){return write("Null")},_undefined:function(){return write("Undefined")},_regexp:function(r){return write("regex:"+r.toString())},_uint8array:function(r){return write("uint8array:"),this.dispatch(Array.prototype.slice.call(r))},_uint8clampedarray:function(r){return write("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(r))},_int8array:function(r){return write("uint8array:"),this.dispatch(Array.prototype.slice.call(r))},_uint16array:function(r){return write("uint16array:"),this.dispatch(Array.prototype.slice.call(r))},_int16array:function(r){return write("uint16array:"),this.dispatch(Array.prototype.slice.call(r))},_uint32array:function(r){return write("uint32array:"),this.dispatch(Array.prototype.slice.call(r))},_int32array:function(r){return write("uint32array:"),this.dispatch(Array.prototype.slice.call(r))},_float32array:function(r){return write("float32array:"),this.dispatch(Array.prototype.slice.call(r))},_float64array:function(r){return write("float64array:"),this.dispatch(Array.prototype.slice.call(r))},_arraybuffer:function(r){return write("arraybuffer:"),this.dispatch(new Uint8Array(r))},_url:function(r){return write("url:"+r.toString(),"utf8")},_map:function(o){write("map:");var u=Array.from(o);return this._array(u,!1!==r.unorderedSets)},_set:function(o){write("set:");var u=Array.from(o);return this._array(u,!1!==r.unorderedSets)},_file:function(r){return write("file:"),this.dispatch([r.name,r.size,r.type,r.lastModfied])},_blob:function(){if(r.ignoreUnknown)return write("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return write("domwindow")},_bigint:function(r){return write("bigint:"+r.toString())},_process:function(){return write("process")},_timer:function(){return write("timer")},_pipe:function(){return write("pipe")},_tcp:function(){return write("tcp")},_udp:function(){return write("udp")},_tty:function(){return write("tty")},_statwatcher:function(){return write("statwatcher")},_securecontext:function(){return write("securecontext")},_connection:function(){return write("connection")},_zlib:function(){return write("zlib")},_context:function(){return write("context")},_nodescript:function(){return write("nodescript")},_httpparser:function(){return write("httpparser")},_dataview:function(){return write("dataview")},_signal:function(){return write("signal")},_fsevent:function(){return write("fsevent")},_tlswrap:function(){return write("tlswrap")}}}function PassThrough(){return{buf:"",write:function(r){this.buf+=r},end:function(r){this.buf+=r},read:function(){return this.buf}}}o.writeToStream=function(r,o,u){return void 0===u&&(u=o,o={}),typeHasher(o=applyDefaults(r,o),u).dispatch(r)}},50939:(r,o,u)=>{"use strict";let p;let{strict:E}=u(39491),{createHash:A}=u(6113),{format:J}=u(73837),W=u(25903);if(Buffer.isEncoding("base64url"))p=r=>r.toString("base64url");else{let fromBase64=r=>r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");p=r=>fromBase64(r.toString("base64"))}function generate(r,o,u){let E=(function(r,o){switch(r){case"HS256":case"RS256":case"PS256":case"ES256":case"ES256K":return A("sha256");case"HS384":case"RS384":case"PS384":case"ES384":return A("sha384");case"HS512":case"RS512":case"PS512":case"ES512":case"Ed25519":return A("sha512");case"Ed448":if(!W)throw TypeError("Ed448 *_hash calculation is not supported in your Node.js runtime version");return A("shake256",{outputLength:114});case"EdDSA":switch(o){case"Ed25519":return A("sha512");case"Ed448":if(!W)throw TypeError("Ed448 *_hash calculation is not supported in your Node.js runtime version");return A("shake256",{outputLength:114});default:throw TypeError("unrecognized or invalid EdDSA curve provided")}default:throw TypeError("unrecognized or invalid JWS algorithm provided")}})(o,u).update(r).digest();return p(E.slice(0,E.length/2))}r.exports={validate:function(r,o,u,p,A){let W,R;if("string"!=typeof r.claim||!r.claim)throw TypeError("names.claim must be a non-empty string");if("string"!=typeof r.source||!r.source)throw TypeError("names.source must be a non-empty string");E("string"==typeof o&&o,`${r.claim} must be a non-empty string`),E("string"==typeof u&&u,`${r.source} must be a non-empty string`);try{W=generate(u,p,A)}catch(o){R=J("%s could not be validated (%s)",r.claim,o.message)}R=R||J("%s mismatch, expected %s, got: %s",r.claim,W,o),E.equal(W,o,R)},generate}},25903:(r,o,u)=>{"use strict";let p=u(6113),[E,A]=process.version.substring(1).split(".").map(r=>parseInt(r,10)),J=(E>12||12===E&&A>=8)&&p.getHashes().includes("shake256");r.exports=J},76398:(r,o,u)=>{"use strict";let p;let{inspect:E}=u(73837),A=u(13685),J=u(6113),{strict:W}=u(39491),R=u(63477),I=u(57310),{URL:K,URLSearchParams:U}=u(57310),D=u(92473),z=u(50939),G=u(68060),Y=u(44759),X=u(26597),Z=u(81772),Q=u(92102),{assertSigningAlgValuesSupport:ee,assertIssuerConfiguration:et}=u(36245),er=u(52542),en=u(13641),ei=u(7889),eo=u(8164),{OPError:ea,RPError:es}=u(10574),ec=u(91624),{random:el}=u(29766),eu=u(3135),{CLOCK_TOLERANCE:ed}=u(60577),{keystores:ep}=u(18763),eh=u(73640),ef=u(68979),{authenticatedPost:ey,resolveResponseType:e_,resolveRedirectUri:eg}=u(98522),{queryKeyStore:em}=u(37875),ev=u(67688),[ew,eb]=process.version.slice(1).split(".").map(r=>parseInt(r,10)),ek=ew>=17||16===ew&&eb>=9,eS=Symbol(),eE=Symbol(),eA=Symbol();function pickCb(r){return er(r,"access_token","code","error_description","error_uri","error","expires_in","id_token","iss","response","session_state","state","token_type")}function authorizationHeaderValue(r,o="Bearer"){return`${o} ${r}`}function getSearchParams(r){let o=I.parse(r);return o.search?R.parse(o.search.substring(1)):{}}function verifyPresence(r,o,u){if(void 0===r[u])throw new es({message:`missing required JWT property ${u}`,jwt:o})}function authorizationParams(r){let o={client_id:this.client_id,scope:"openid",response_type:e_.call(this),redirect_uri:eg.call(this),...r};return Object.entries(o).forEach(([r,u])=>{null==u?delete o[r]:"claims"===r&&"object"==typeof u?o[r]=JSON.stringify(u):"resource"===r&&Array.isArray(u)?o[r]=u:"string"!=typeof u&&(o[r]=String(u))}),o}function getKeystore(r){if(!en(r)||!Array.isArray(r.keys)||r.keys.some(r=>!en(r)||!("kty"in r)))throw TypeError("jwks must be a JSON Web Key Set formatted object");return eh.fromJWKS(r,{onlyPrivate:!0})}let BaseClient=class BaseClient{#e;#t;#r;#n;constructor(r,o,u={},p,E){if(this.#e=new Map,this.#t=r,this.#r=o,"string"!=typeof u.client_id||!u.client_id)throw TypeError("client_id is required");let A={grant_types:["authorization_code"],id_token_signed_response_alg:"RS256",authorization_signed_response_alg:"RS256",response_types:["code"],token_endpoint_auth_method:"client_secret_basic",...this.fapi1()?{grant_types:["authorization_code","implicit"],id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",response_types:["code id_token"],tls_client_certificate_bound_access_tokens:!0,token_endpoint_auth_method:void 0}:void 0,...this.fapi2()?{id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",token_endpoint_auth_method:void 0}:void 0,...u};if(this.fapi())switch(A.token_endpoint_auth_method){case"self_signed_tls_client_auth":case"tls_client_auth":break;case"private_key_jwt":if(!p)throw TypeError("jwks is required");break;case void 0:throw TypeError("token_endpoint_auth_method is required");default:throw TypeError("invalid or unsupported token_endpoint_auth_method")}if(this.fapi2()&&(A.tls_client_certificate_bound_access_tokens&&A.dpop_bound_access_tokens||!A.tls_client_certificate_bound_access_tokens&&!A.dpop_bound_access_tokens))throw TypeError("either tls_client_certificate_bound_access_tokens or dpop_bound_access_tokens must be set to true");if(function(r,o,u){if(o.token_endpoint_auth_method||function(r,o){try{let u=r.issuer.token_endpoint_auth_methods_supported;!u.includes(o.token_endpoint_auth_method)&&u.includes("client_secret_post")&&(o.token_endpoint_auth_method="client_secret_post")}catch(r){}}(r,u),o.redirect_uri){if(o.redirect_uris)throw TypeError("provide a redirect_uri or redirect_uris, not both");u.redirect_uris=[o.redirect_uri],delete u.redirect_uri}if(o.response_type){if(o.response_types)throw TypeError("provide a response_type or response_types, not both");u.response_types=[o.response_type],delete u.response_type}}(this,u,A),ee("token",this.issuer,A),["introspection","revocation"].forEach(r=>{(function(r,o,u){if(!o[`${r}_endpoint`])return;let p=u.token_endpoint_auth_method,E=u.token_endpoint_auth_signing_alg,A=`${r}_endpoint_auth_method`,J=`${r}_endpoint_auth_signing_alg`;void 0===u[A]&&void 0===u[J]&&(void 0!==p&&(u[A]=p),void 0!==E&&(u[J]=E))})(r,this.issuer,A),ee(r,this.issuer,A)}),Object.entries(A).forEach(([r,o])=>{this.#e.set(r,o),this[r]||Object.defineProperty(this,r,{get(){return this.#e.get(r)},enumerable:!0})}),void 0!==p){let r=getKeystore.call(this,p);ep.set(this,r)}null!=E&&E.additionalAuthorizedParties&&(this.#n=ef(E.additionalAuthorizedParties)),this[ed]=0}authorizationUrl(r={}){if(!en(r))throw TypeError("params must be a plain object");et(this.issuer,"authorization_endpoint");let o=new K(this.issuer.authorization_endpoint);for(let[u,p]of Object.entries(authorizationParams.call(this,r)))if(Array.isArray(p))for(let r of(o.searchParams.delete(u),p))o.searchParams.append(u,r);else o.searchParams.set(u,p);return o.href.replace(/\+/g,"%20")}authorizationPost(r={}){if(!en(r))throw TypeError("params must be a plain object");let o=authorizationParams.call(this,r),u=Object.keys(o).map(r=>`<input type="hidden" name="${r}" value="${o[r]}"/>`).join("\n");return`<!DOCTYPE html>
<head>
<title>Requesting Authorization</title>
</head>
<body onload="javascript:document.forms[0].submit()">
<form method="post" action="${this.issuer.authorization_endpoint}">
  ${u}
</form>
</body>
</html>`}endSessionUrl(r={}){let o;et(this.issuer,"end_session_endpoint");let{0:u,length:p}=this.post_logout_redirect_uris||[],{post_logout_redirect_uri:E=1===p?u:void 0}=r;if({id_token_hint:o,...r}=r,o instanceof eo){if(!o.id_token)throw TypeError("id_token not present in TokenSet");o=o.id_token}let A=I.parse(this.issuer.end_session_endpoint),J=Z(getSearchParams(this.issuer.end_session_endpoint),r,{post_logout_redirect_uri:E,client_id:this.client_id},{id_token_hint:o});return Object.entries(J).forEach(([r,o])=>{null==o&&delete J[r]}),A.search=null,A.query=J,I.format(A)}callbackParams(r){let o=r instanceof A.IncomingMessage||r&&r.method&&r.url,u="string"==typeof r;if(!u&&!o)throw TypeError("#callbackParams only accepts string urls, http.IncomingMessage or a lookalike");if(!o)return pickCb(getSearchParams(r));switch(r.method){case"GET":return pickCb(getSearchParams(r.url));case"POST":if(void 0===r.body)throw TypeError("incoming message body missing, include a body parser prior to this method call");switch(typeof r.body){case"object":case"string":if(Buffer.isBuffer(r.body))return pickCb(R.parse(r.body.toString("utf-8")));if("string"==typeof r.body)return pickCb(R.parse(r.body));return pickCb(r.body);default:throw TypeError("invalid IncomingMessage body object")}default:throw TypeError("invalid IncomingMessage method")}}async callback(r,o,u={},{exchangeBody:p,clientAssertionPayload:E,DPoP:A}={}){let J=pickCb(o);if(!u.jarm||"response"in o){if("response"in o){let r=await this.decryptJARM(J.response);J=await this.validateJARM(r)}}else throw new es({message:"expected a JARM response",checks:u,params:J});if(this.default_max_age&&!u.max_age&&(u.max_age=this.default_max_age),J.state&&!u.state)throw TypeError("checks.state argument is missing");if(!J.state&&u.state)throw new es({message:"state missing from the response",checks:u,params:J});if(u.state!==J.state)throw new es({printf:["state mismatch, expected %s, got: %s",u.state,J.state],checks:u,params:J});if("iss"in J){if(et(this.issuer,"issuer"),J.iss!==this.issuer.issuer)throw new es({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,J.iss],params:J})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in J)&&!("response"in o))throw new es({message:"iss missing from the response",params:J});if(J.error)throw new ea(J);let W={code:["code"],id_token:["id_token"],token:["access_token","token_type"]};if(u.response_type){for(let r of u.response_type.split(" "))if("none"===r){if(J.code||J.id_token||J.access_token)throw new es({message:'unexpected params encountered for "none" response',checks:u,params:J})}else for(let o of W[r])if(!J[o])throw new es({message:`${o} missing from response`,checks:u,params:J})}if(J.id_token){let r=new eo(J);if(await this.decryptIdToken(r),await this.validateIdToken(r,u.nonce,"authorization",u.max_age,u.state),!J.code)return r}if(J.code){let o=await this.grant({...p,grant_type:"authorization_code",code:J.code,redirect_uri:r,code_verifier:u.code_verifier},{clientAssertionPayload:E,DPoP:A});return await this.decryptIdToken(o),await this.validateIdToken(o,u.nonce,"token",u.max_age),J.session_state&&(o.session_state=J.session_state),o}return new eo(J)}async oauthCallback(r,o,u={},{exchangeBody:p,clientAssertionPayload:E,DPoP:A}={}){let J=pickCb(o);if(!u.jarm||"response"in o){if("response"in o){let r=await this.decryptJARM(J.response);J=await this.validateJARM(r)}}else throw new es({message:"expected a JARM response",checks:u,params:J});if(J.state&&!u.state)throw TypeError("checks.state argument is missing");if(!J.state&&u.state)throw new es({message:"state missing from the response",checks:u,params:J});if(u.state!==J.state)throw new es({printf:["state mismatch, expected %s, got: %s",u.state,J.state],checks:u,params:J});if("iss"in J){if(et(this.issuer,"issuer"),J.iss!==this.issuer.issuer)throw new es({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,J.iss],params:J})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in J)&&!("response"in o))throw new es({message:"iss missing from the response",params:J});if(J.error)throw new ea(J);if("string"==typeof J.id_token&&J.id_token.length)throw new es({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:J});delete J.id_token;let W={code:["code"],token:["access_token","token_type"]};if(u.response_type)for(let r of u.response_type.split(" ")){if("none"===r&&(J.code||J.id_token||J.access_token))throw new es({message:'unexpected params encountered for "none" response',checks:u,params:J});if(W[r]){for(let o of W[r])if(!J[o])throw new es({message:`${o} missing from response`,checks:u,params:J})}}if(J.code){let o=await this.grant({...p,grant_type:"authorization_code",code:J.code,redirect_uri:r,code_verifier:u.code_verifier},{clientAssertionPayload:E,DPoP:A});if("string"==typeof o.id_token&&o.id_token.length)throw new es({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:J});return delete o.id_token,o}return new eo(J)}async decryptIdToken(r){if(!this.id_token_encrypted_response_alg)return r;let o=r;if(o instanceof eo){if(!o.id_token)throw TypeError("id_token not present in TokenSet");o=o.id_token}let u=this.id_token_encrypted_response_alg,p=this.id_token_encrypted_response_enc,E=await this.decryptJWE(o,u,p);return r instanceof eo?(r.id_token=E,r):E}async validateJWTUserinfo(r){let o=this.userinfo_signed_response_alg;return this.validateJWT(r,o,[])}async decryptJARM(r){if(!this.authorization_encrypted_response_alg)return r;let o=this.authorization_encrypted_response_alg,u=this.authorization_encrypted_response_enc;return this.decryptJWE(r,o,u)}async decryptJWTUserinfo(r){if(!this.userinfo_encrypted_response_alg)return r;let o=this.userinfo_encrypted_response_alg,u=this.userinfo_encrypted_response_enc;return this.decryptJWE(r,o,u)}async decryptJWE(r,o,u="A128CBC-HS256"){let p;let E=JSON.parse(X.decode(r.split(".")[0]));if(E.alg!==o)throw new es({printf:["unexpected JWE alg received, expected %s, got: %s",o,E.alg],jwt:r});if(E.enc!==u)throw new es({printf:["unexpected JWE enc received, expected %s, got: %s",u,E.enc],jwt:r});let getPlaintext=r=>new TextDecoder().decode(r.plaintext);if(o.match(/^(?:RSA|ECDH)/)){let o=await ep.get(this),u=D.decodeProtectedHeader(r);for(let E of o.all({...u,use:"enc"}))if(p=await D.compactDecrypt(r,await E.keyObject(u.alg)).then(getPlaintext,()=>{}))break}else p=await D.compactDecrypt(r,this.secretForAlg("dir"===o?u:o)).then(getPlaintext,()=>{});if(!p)throw new es({message:"failed to decrypt JWE",jwt:r});return p}async validateIdToken(r,o,u,p,E){let A=r,J=this.id_token_signed_response_alg,W=A instanceof eo;if(W){if(!A.id_token)throw TypeError("id_token not present in TokenSet");A=A.id_token}A=String(A);let R=ec(),{protected:I,payload:K,key:U}=await this.validateJWT(A,J);if("number"==typeof p||p!==eA&&this.require_auth_time){if(!K.auth_time)throw new es({message:"missing required JWT property auth_time",jwt:A});if("number"!=typeof K.auth_time)throw new es({message:"JWT auth_time claim must be a JSON numeric value",jwt:A})}if("number"==typeof p&&K.auth_time+p<R-this[ed])throw new es({printf:["too much time has elapsed since the last End-User authentication, max_age %i, auth_time: %i, now %i",p,K.auth_time,R-this[ed]],now:R,tolerance:this[ed],auth_time:K.auth_time,jwt:A});if(o!==eE&&(K.nonce||void 0!==o)&&K.nonce!==o)throw new es({printf:["nonce mismatch, expected %s, got: %s",o,K.nonce],jwt:A});if("authorization"===u){if(!K.at_hash&&r.access_token)throw new es({message:"missing required property at_hash",jwt:A});if(!K.c_hash&&r.code)throw new es({message:"missing required property c_hash",jwt:A});if(this.fapi1()&&!K.s_hash&&(r.state||E))throw new es({message:"missing required property s_hash",jwt:A});if(K.s_hash){if(!E)throw TypeError('cannot verify s_hash, "checks.state" property not provided');try{z.validate({claim:"s_hash",source:"state"},K.s_hash,E,I.alg,U.jwk&&U.jwk.crv)}catch(r){throw new es({message:r.message,jwt:A})}}}if(this.fapi()&&K.iat<R-3600)throw new es({printf:["JWT issued too far in the past, now %i, iat %i",R,K.iat],now:R,tolerance:this[ed],iat:K.iat,jwt:A});if(r.access_token&&void 0!==K.at_hash)try{z.validate({claim:"at_hash",source:"access_token"},K.at_hash,r.access_token,I.alg,U.jwk&&U.jwk.crv)}catch(r){throw new es({message:r.message,jwt:A})}if(r.code&&void 0!==K.c_hash)try{z.validate({claim:"c_hash",source:"code"},K.c_hash,r.code,I.alg,U.jwk&&U.jwk.crv)}catch(r){throw new es({message:r.message,jwt:A})}return r}async validateJWT(r,o,u=["iss","sub","aud","exp","iat"]){let p,E,A;let J="https://self-issued.me"===this.issuer.issuer,R=ec();try{({header:p,payload:E}=Y(r,{complete:!0}))}catch(o){throw new es({printf:["failed to decode JWT (%s: %s)",o.name,o.message],jwt:r})}if(p.alg!==o)throw new es({printf:["unexpected JWT alg received, expected %s, got: %s",o,p.alg],jwt:r});if(J&&(u=[...u,"sub_jwk"]),u.forEach(verifyPresence.bind(void 0,E,r)),void 0!==E.iss){let o=this.issuer.issuer;if(this.#r&&(o=this.issuer.issuer.replace("{tenantid}",E.tid)),E.iss!==o)throw new es({printf:["unexpected iss value, expected %s, got: %s",o,E.iss],jwt:r})}if(void 0!==E.iat&&"number"!=typeof E.iat)throw new es({message:"JWT iat claim must be a JSON numeric value",jwt:r});if(void 0!==E.nbf){if("number"!=typeof E.nbf)throw new es({message:"JWT nbf claim must be a JSON numeric value",jwt:r});if(E.nbf>R+this[ed])throw new es({printf:["JWT not active yet, now %i, nbf %i",R+this[ed],E.nbf],now:R,tolerance:this[ed],nbf:E.nbf,jwt:r})}if(void 0!==E.exp){if("number"!=typeof E.exp)throw new es({message:"JWT exp claim must be a JSON numeric value",jwt:r});if(R-this[ed]>=E.exp)throw new es({printf:["JWT expired, now %i, exp %i",R-this[ed],E.exp],now:R,tolerance:this[ed],exp:E.exp,jwt:r})}if(void 0!==E.aud){if(Array.isArray(E.aud)){if(E.aud.length>1&&!E.azp)throw new es({message:"missing required JWT property azp",jwt:r});if(!E.aud.includes(this.client_id))throw new es({printf:["aud is missing the client_id, expected %s to be included in %j",this.client_id,E.aud],jwt:r})}else if(E.aud!==this.client_id)throw new es({printf:["aud mismatch, expected %s, got: %s",this.client_id,E.aud],jwt:r})}if(void 0!==E.azp){let o=this.#n;if(!(o="string"==typeof o?[this.client_id,o]:Array.isArray(o)?[this.client_id,...o]:[this.client_id]).includes(E.azp))throw new es({printf:["azp mismatch, got: %s",E.azp],jwt:r})}if(J){try{W(en(E.sub_jwk));let r=await D.importJWK(E.sub_jwk,p.alg);W.equal(r.type,"public"),A=[{keyObject:()=>r}]}catch(o){throw new es({message:"failed to use sub_jwk claim as an asymmetric JSON Web Key",jwt:r})}if(await D.calculateJwkThumbprint(E.sub_jwk)!==E.sub)throw new es({message:"failed to match the subject with sub_jwk",jwt:r})}else p.alg.startsWith("HS")?A=[this.secretForAlg(p.alg)]:"none"!==p.alg&&(A=await em.call(this.issuer,{...p,use:"sig"}));if(!A&&"none"===p.alg)return{protected:p,payload:E};for(let o of A){let u=await D.compactVerify(r,o instanceof Uint8Array?o:await o.keyObject(p.alg)).catch(()=>{});if(u)return{payload:E,protected:u.protectedHeader,key:o}}throw new es({message:"failed to validate JWT signature",jwt:r})}async refresh(r,{exchangeBody:o,clientAssertionPayload:u,DPoP:p}={}){let E=r;if(E instanceof eo){if(!E.refresh_token)throw TypeError("refresh_token not present in TokenSet");E=E.refresh_token}let A=await this.grant({...o,grant_type:"refresh_token",refresh_token:String(E)},{clientAssertionPayload:u,DPoP:p});if(A.id_token&&(await this.decryptIdToken(A),await this.validateIdToken(A,eE,"token",eA),r instanceof eo&&r.id_token)){let o=r.claims().sub,u=A.claims().sub;if(u!==o)throw new es({printf:["sub mismatch, expected %s, got: %s",o,u],jwt:A.id_token})}return A}async requestResource(r,o,{method:u,headers:p,body:E,DPoP:A,tokenType:J=A?"DPoP":o instanceof eo?o.token_type:"Bearer"}={},W){if(o instanceof eo){if(!o.access_token)throw TypeError("access_token not present in TokenSet");o=o.access_token}if(o){if("string"!=typeof o)throw TypeError("invalid access token provided")}else throw TypeError("no access token provided");let R={headers:{Authorization:authorizationHeaderValue(o,J),...p},body:E},I=!!this.tls_client_certificate_bound_access_tokens,K=await eu.call(this,{...R,responseType:"buffer",method:u,url:r},{accessToken:o,mTLS:I,DPoP:A}),U=K.headers["www-authenticate"];return W!==eS&&U&&U.toLowerCase().startsWith("dpop ")&&"use_dpop_nonce"===Q(U).error?this.requestResource(r,o,{method:u,headers:p,body:E,DPoP:A,tokenType:J}):K}async userinfo(r,{method:o="GET",via:u="header",tokenType:p,params:E,DPoP:A}={}){let J;et(this.issuer,"userinfo_endpoint");let R={tokenType:p,method:String(o).toUpperCase(),DPoP:A};if("GET"!==R.method&&"POST"!==R.method)throw TypeError("#userinfo() method can only be POST or a GET");if("body"===u&&"POST"!==R.method)throw TypeError("can only send body on POST");let I=!!(this.userinfo_signed_response_alg||this.userinfo_encrypted_response_alg);I?R.headers={Accept:"application/jwt"}:R.headers={Accept:"application/json"};let D=!!this.tls_client_certificate_bound_access_tokens;D&&this.issuer.mtls_endpoint_aliases&&(J=this.issuer.mtls_endpoint_aliases.userinfo_endpoint),J=new K(J||this.issuer.userinfo_endpoint),"body"===u&&(R.headers.Authorization=void 0,R.headers["Content-Type"]="application/x-www-form-urlencoded",R.body=new U,R.body.append("access_token",r instanceof eo?r.access_token:r)),E&&("GET"===R.method?Object.entries(E).forEach(([r,o])=>{J.searchParams.append(r,o)}):R.body?Object.entries(E).forEach(([r,o])=>{R.body.append(r,o)}):(R.body=new U,R.headers["Content-Type"]="application/x-www-form-urlencoded",Object.entries(E).forEach(([r,o])=>{R.body.append(r,o)}))),R.body&&(R.body=R.body.toString());let z=await this.requestResource(J,r,R),G=ei(z,{bearer:!0});if(I){if(!/^application\/jwt/.test(z.headers["content-type"]))throw new es({message:"expected application/jwt response from the userinfo_endpoint",response:z});let r=z.body.toString(),o=await this.decryptJWTUserinfo(r);if(this.userinfo_signed_response_alg)({payload:G}=await this.validateJWTUserinfo(o));else try{G=JSON.parse(o),W(en(G))}catch(r){throw new es({message:"failed to parse userinfo JWE payload as JSON",jwt:o})}}else try{G=JSON.parse(z.body)}catch(r){throw Object.defineProperty(r,"response",{value:z}),r}if(r instanceof eo&&r.id_token){let o=r.claims().sub;if(G.sub!==o)throw new es({printf:["userinfo sub mismatch, expected %s, got: %s",o,G.sub],body:G,jwt:r.id_token})}return G}encryptionSecret(r){let o=r<=256?"sha256":r<=384?"sha384":r<=512&&"sha512";if(!o)throw Error("unsupported symmetric encryption key derivation");return J.createHash(o).update(this.client_secret).digest().slice(0,r/8)}secretForAlg(r){if(!this.client_secret)throw TypeError("client_secret is required");return/^A(\d{3})(?:GCM)?KW$/.test(r)?this.encryptionSecret(parseInt(RegExp.$1,10)):/^A(\d{3})(?:GCM|CBC-HS(\d{3}))$/.test(r)?this.encryptionSecret(parseInt(RegExp.$2||RegExp.$1,10)):new TextEncoder().encode(this.client_secret)}async grant(r,{clientAssertionPayload:o,DPoP:u}={},p){let E;et(this.issuer,"token_endpoint");let A=await ey.call(this,"token",{form:r,responseType:"json"},{clientAssertionPayload:o,DPoP:u});try{E=ei(A)}catch(E){if(p!==eS&&E instanceof ea&&"use_dpop_nonce"===E.error)return this.grant(r,{clientAssertionPayload:o,DPoP:u},eS);throw E}return new eo(E)}async deviceAuthorization(r={},{exchangeBody:o,clientAssertionPayload:u,DPoP:p}={}){et(this.issuer,"device_authorization_endpoint"),et(this.issuer,"token_endpoint");let E=authorizationParams.call(this,{client_id:this.client_id,redirect_uri:null,response_type:null,...r}),A=await ey.call(this,"device_authorization",{responseType:"json",form:E},{clientAssertionPayload:u,endpointAuthMethod:"token"}),J=ei(A);return new ev({client:this,exchangeBody:o,clientAssertionPayload:u,response:J,maxAge:r.max_age,DPoP:p})}async revoke(r,o,{revokeBody:u,clientAssertionPayload:p}={}){if(et(this.issuer,"revocation_endpoint"),void 0!==o&&"string"!=typeof o)throw TypeError("hint must be a string");let E={...u,token:r};o&&(E.token_type_hint=o);let A=await ey.call(this,"revocation",{form:E},{clientAssertionPayload:p});ei(A,{body:!1})}async introspect(r,o,{introspectBody:u,clientAssertionPayload:p}={}){if(et(this.issuer,"introspection_endpoint"),void 0!==o&&"string"!=typeof o)throw TypeError("hint must be a string");let E={...u,token:r};o&&(E.token_type_hint=o);let A=await ey.call(this,"introspection",{form:E,responseType:"json"},{clientAssertionPayload:p}),J=ei(A);return J}static async register(r,o={}){let{initialAccessToken:u,jwks:p,...E}=o;if(et(this.issuer,"registration_endpoint"),void 0!==p&&!(r.jwks||r.jwks_uri)){let o=await getKeystore.call(this,p);r.jwks=o.toJWKS()}let A=await eu.call(this,{headers:{Accept:"application/json",...u?{Authorization:authorizationHeaderValue(u)}:void 0},responseType:"json",json:r,url:this.issuer.registration_endpoint,method:"POST"}),J=ei(A,{statusCode:201,bearer:!0});return new this(J,p,E)}get metadata(){return ef(Object.fromEntries(this.#e.entries()))}static async fromUri(r,o,u,p){let E=await eu.call(this,{method:"GET",url:r,responseType:"json",headers:{Authorization:authorizationHeaderValue(o),Accept:"application/json"}}),A=ei(E,{bearer:!0});return new this(A,u,p)}async requestObject(r={},{sign:o=this.request_object_signing_alg||"none",encrypt:{alg:u=this.request_object_encryption_alg,enc:p=this.request_object_encryption_enc||"A128CBC-HS256"}={}}={}){let E,A;if(!en(r))throw TypeError("requestObject must be a plain object");let J=ec(),W={alg:o,typ:"oauth-authz-req+jwt"},R=JSON.stringify(Z({},r,{iss:this.client_id,aud:this.issuer.issuer,client_id:this.client_id,jti:el(),iat:J,exp:J+300,...this.fapi()?{nbf:J}:void 0}));if("none"===o)E=[X.encode(JSON.stringify(W)),X.encode(R),""].join(".");else{let r=o.startsWith("HS");if(r)A=this.secretForAlg(o);else{let r=await ep.get(this);if(!r)throw TypeError(`no keystore present for client, cannot sign using alg ${o}`);if(!(A=r.get({alg:o,use:"sig"})))throw TypeError(`no key to sign with found for alg ${o}`)}E=await new D.CompactSign(new TextEncoder().encode(R)).setProtectedHeader({...W,kid:r?void 0:A.jwk.kid}).sign(r?A:await A.keyObject(o))}if(!u)return E;let I={alg:u,enc:p,cty:"oauth-authz-req+jwt"};return I.alg.match(/^(RSA|ECDH)/)?[A]=await em.call(this.issuer,{alg:I.alg,use:"enc"},{allowMulti:!0}):A=this.secretForAlg("dir"===I.alg?I.enc:I.alg),new D.CompactEncrypt(new TextEncoder().encode(E)).setProtectedHeader({...I,kid:A instanceof Uint8Array?void 0:A.jwk.kid}).encrypt(A instanceof Uint8Array?A:await A.keyObject(I.alg))}async pushedAuthorizationRequest(r={},{clientAssertionPayload:o}={}){et(this.issuer,"pushed_authorization_request_endpoint");let u={..."request"in r?r:authorizationParams.call(this,r),client_id:this.client_id},p=await ey.call(this,"pushed_authorization_request",{responseType:"json",form:u},{clientAssertionPayload:o,endpointAuthMethod:"token"}),E=ei(p,{statusCode:201});if(!("expires_in"in E))throw new es({message:"expected expires_in in Pushed Authorization Successful Response",response:p});if("number"!=typeof E.expires_in)throw new es({message:"invalid expires_in value in Pushed Authorization Successful Response",response:p});if(!("request_uri"in E))throw new es({message:"expected request_uri in Pushed Authorization Successful Response",response:p});if("string"!=typeof E.request_uri)throw new es({message:"invalid request_uri value in Pushed Authorization Successful Response",response:p});return E}get issuer(){return this.#t}[E.custom](){return`${this.constructor.name} ${E(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}fapi(){return this.fapi1()||this.fapi2()}fapi1(){return"FAPI1Client"===this.constructor.name}fapi2(){return"FAPI2Client"===this.constructor.name}async validateJARM(r){let o=this.authorization_signed_response_alg,{payload:u}=await this.validateJWT(r,o,["iss","exp","aud"]);return pickCb(u)}async dpopProof(r,o,u){let E;if(!en(r))throw TypeError("payload must be a plain object");if(G(o))E=o;else if("CryptoKey"===o[Symbol.toStringTag])E=o;else if("node:crypto"===D.cryptoRuntime)E=J.createPrivateKey(o);else throw TypeError("unrecognized crypto runtime");if("private"!==E.type)throw TypeError('"DPoP" option must be a private key');let A=p.call(this,E,o);if(!A)throw TypeError("could not determine DPoP JWS Algorithm");return new D.SignJWT({ath:u?X.encode(J.createHash("sha256").update(u).digest()):void 0,...r}).setProtectedHeader({alg:A,typ:"dpop+jwt",jwk:await getJwk(E,o)}).setIssuedAt().setJti(el()).sign(E)}};function determineDPoPAlgorithmFromCryptoKey(r){switch(r.algorithm.name){case"Ed25519":case"Ed448":return"EdDSA";case"ECDSA":switch(r.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512"}break;case"RSASSA-PKCS1-v1_5":return`RS${r.algorithm.hash.name.slice(4)}`;case"RSA-PSS":return`PS${r.algorithm.hash.name.slice(4)}`;default:throw TypeError("unsupported DPoP private key")}}if("node:crypto"===D.cryptoRuntime){p=function(p,J){if("CryptoKey"===J[Symbol.toStringTag])return determineDPoPAlgorithmFromCryptoKey(p);switch(p.asymmetricKeyType){case"ed25519":case"ed448":return"EdDSA";case"ec":return function(r,p){switch("object"==typeof p&&"object"==typeof p.key&&p.key.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-512":return"ES512"}let J=r.export({format:"der",type:"pkcs8"}),W=J[1]<128?17:18,R=J[W],I=J.slice(W+1,W+1+R);if(I.equals(o))return"ES256";if(I.equals(u))return"ES384";if(I.equals(E))return"ES512";if(I.equals(A))return"ES256K";throw TypeError("unsupported DPoP private key curve")}(p,J);case"rsa":case ek&&"rsa-pss":return function(o,u,p){if("object"==typeof u&&"jwk"===u.format&&u.key&&u.key.alg)return u.key.alg;if(Array.isArray(p)){let u=p.filter(RegExp.prototype.test.bind(r));return"rsa-pss"===o.asymmetricKeyType&&(u=u.filter(r=>r.startsWith("PS"))),["PS256","PS384","PS512","RS256","RS384","RS384"].find(r=>u.includes(r))}return"PS256"}(p,J,this.issuer.dpop_signing_alg_values_supported);default:throw TypeError("unsupported DPoP private key")}};let r=/^(?:RS|PS)(?:256|384|512)$/,o=Buffer.from([42,134,72,206,61,3,1,7]),u=Buffer.from([43,129,4,0,34]),E=Buffer.from([43,129,4,0,35]),A=Buffer.from([43,129,4,0,10])}else p=determineDPoPAlgorithmFromCryptoKey;let eP=new WeakMap;async function getJwk(r,o){if("node:crypto"===D.cryptoRuntime&&"object"==typeof o&&"object"==typeof o.key&&"jwk"===o.format)return er(o.key,"kty","crv","x","y","e","n");if(eP.has(o))return eP.get(o);let u=er(await D.exportJWK(r),"kty","crv","x","y","e","n");return(G(o)||"WebCryptoAPI"===D.cryptoRuntime)&&eP.set(o,u),u}r.exports=(r,o=!1)=>class extends BaseClient{constructor(...u){super(r,o,...u)}static get issuer(){return r}},r.exports.BaseClient=BaseClient},67688:(r,o,u)=>{"use strict";let{inspect:p}=u(73837),{RPError:E,OPError:A}=u(10574),J=u(91624);let DeviceFlowHandle=class DeviceFlowHandle{#i;#o;#a;#s;#c;#l;#u;#d;#p;constructor({client:r,exchangeBody:o,clientAssertionPayload:u,response:p,maxAge:A,DPoP:W}){if(["verification_uri","user_code","device_code"].forEach(r=>{if("string"!=typeof p[r]||!p[r])throw new E(`expected ${r} string to be returned by Device Authorization Response, got %j`,p[r])}),!Number.isSafeInteger(p.expires_in))throw new E("expected expires_in number to be returned by Device Authorization Response, got %j",p.expires_in);this.#l=J()+p.expires_in,this.#o=r,this.#s=W,this.#d=A,this.#c=o,this.#a=u,this.#p=p,this.#u=1e3*p.interval||5e3}abort(){this.#i=!0}async poll({signal:r}={}){let o;if(r&&r.aborted||this.#i)throw new E("polling aborted");if(this.expired())throw new E("the device code %j has expired and the device authorization session has concluded",this.device_code);await new Promise(r=>setTimeout(r,this.#u));try{o=await this.#o.grant({...this.#c,grant_type:"urn:ietf:params:oauth:grant-type:device_code",device_code:this.device_code},{clientAssertionPayload:this.#a,DPoP:this.#s})}catch(o){switch(o instanceof A&&o.error){case"slow_down":this.#u+=5e3;case"authorization_pending":return this.poll({signal:r});default:throw o}}return"id_token"in o&&(await this.#o.decryptIdToken(o),await this.#o.validateIdToken(o,void 0,"token",this.#d)),o}get device_code(){return this.#p.device_code}get user_code(){return this.#p.user_code}get verification_uri(){return this.#p.verification_uri}get verification_uri_complete(){return this.#p.verification_uri_complete}get expires_in(){return Math.max.apply(null,[this.#l-J(),0])}expired(){return 0===this.expires_in}[p.custom](){return`${this.constructor.name} ${p(this.#p,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}};r.exports=DeviceFlowHandle},10574:(r,o,u)=>{"use strict";let{format:p}=u(73837);r.exports={OPError:class extends Error{constructor({error_description:r,error:o,error_uri:u,session_state:p,state:E,scope:A},J){super(r?`${o} (${r})`:o),Object.assign(this,{error:o},r&&{error_description:r},u&&{error_uri:u},E&&{state:E},A&&{scope:A},p&&{session_state:p}),J&&Object.defineProperty(this,"response",{value:J}),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}},RPError:class extends Error{constructor(...r){if("string"==typeof r[0])super(p(...r));else{let{message:o,printf:u,response:E,...A}=r[0];u?super(p(...u)):super(o),Object.assign(this,A),E&&Object.defineProperty(this,"response",{value:E})}this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}}},36245:r=>{"use strict";r.exports={assertSigningAlgValuesSupport:function(r,o,u){if(!o[`${r}_endpoint`])return;let p=`${r}_endpoint_auth_method`,E=`${r}_endpoint_auth_signing_alg`,A=`${r}_endpoint_auth_signing_alg_values_supported`;if(u[p]&&u[p].endsWith("_jwt")&&!u[E]&&!o[A])throw TypeError(`${A} must be configured on the issuer if ${E} is not defined on a client`)},assertIssuerConfiguration:function(r,o){if(!r[o])throw TypeError(`${o} must be configured on the issuer`)}}},26597:r=>{"use strict";let o;if(Buffer.isEncoding("base64url"))o=(r,o="utf8")=>Buffer.from(r,o).toString("base64url");else{let fromBase64=r=>r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");o=(r,o="utf8")=>fromBase64(Buffer.from(r,o).toString("base64"))}r.exports.decode=r=>Buffer.from(r,"base64"),r.exports.encode=o},98522:(r,o,u)=>{"use strict";let p=u(92473),{RPError:E}=u(10574),{assertIssuerConfiguration:A}=u(36245),{random:J}=u(29766),W=u(91624),R=u(3135),{keystores:I}=u(18763),K=u(18038),formUrlEncode=r=>encodeURIComponent(r).replace(/%20/g,"+");async function clientAssertion(r,o){let u=this[`${r}_endpoint_auth_signing_alg`];if(u||A(this.issuer,`${r}_endpoint_auth_signing_alg_values_supported`),"client_secret_jwt"===this[`${r}_endpoint_auth_method`]){if(!u){let o=this.issuer[`${r}_endpoint_auth_signing_alg_values_supported`];u=Array.isArray(o)&&o.find(r=>/^HS(?:256|384|512)/.test(r))}if(!u)throw new E(`failed to determine a JWS Algorithm to use for ${this[`${r}_endpoint_auth_method`]} Client Assertion`);return new p.CompactSign(Buffer.from(JSON.stringify(o))).setProtectedHeader({alg:u}).sign(this.secretForAlg(u))}let J=await I.get(this);if(!J)throw TypeError("no client jwks provided for signing a client assertion with");if(!u){let o=this.issuer[`${r}_endpoint_auth_signing_alg_values_supported`];u=Array.isArray(o)&&o.find(r=>J.get({alg:r,use:"sig"}))}if(!u)throw new E(`failed to determine a JWS Algorithm to use for ${this[`${r}_endpoint_auth_method`]} Client Assertion`);let W=J.get({alg:u,use:"sig"});if(!W)throw new E(`no key found in client jwks to sign a client assertion with using alg ${u}`);return new p.CompactSign(Buffer.from(JSON.stringify(o))).setProtectedHeader({alg:u,kid:W.jwk&&W.jwk.kid}).sign(await W.keyObject(u))}async function authFor(r,{clientAssertionPayload:o}={}){let u=this[`${r}_endpoint_auth_method`];switch(u){case"self_signed_tls_client_auth":case"tls_client_auth":case"none":return{form:{client_id:this.client_id}};case"client_secret_post":if("string"!=typeof this.client_secret)throw TypeError("client_secret_post client authentication method requires a client_secret");return{form:{client_id:this.client_id,client_secret:this.client_secret}};case"private_key_jwt":case"client_secret_jwt":{let u=W(),p=await clientAssertion.call(this,r,{iat:u,exp:u+60,jti:J(),iss:this.client_id,sub:this.client_id,aud:this.issuer.issuer,...o});return{form:{client_id:this.client_id,client_assertion:p,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"}}}case"client_secret_basic":{if("string"!=typeof this.client_secret)throw TypeError("client_secret_basic client authentication method requires a client_secret");let r=`${formUrlEncode(this.client_id)}:${formUrlEncode(this.client_secret)}`,o=Buffer.from(r).toString("base64");return{headers:{Authorization:`Basic ${o}`}}}default:throw TypeError(`missing, or unsupported, ${r}_endpoint_auth_method`)}}async function authenticatedPost(r,o,{clientAssertionPayload:u,endpointAuthMethod:p=r,DPoP:E}={}){let A;let J=await authFor.call(this,p,{clientAssertionPayload:u}),W=K(o,J),I=this[`${p}_endpoint_auth_method`].includes("tls_client_auth")||"token"===r&&this.tls_client_certificate_bound_access_tokens;if(I&&this.issuer.mtls_endpoint_aliases&&(A=this.issuer.mtls_endpoint_aliases[`${r}_endpoint`]),A=A||this.issuer[`${r}_endpoint`],"form"in W)for(let[r,o]of Object.entries(W.form))void 0===o&&delete W.form[r];return R.call(this,{...W,method:"POST",url:A,headers:{..."revocation"!==r?{Accept:"application/json"}:void 0,...W.headers}},{mTLS:I,DPoP:E})}r.exports={resolveResponseType:function(){let{length:r,0:o}=this.response_types;if(1===r)return o},resolveRedirectUri:function(){let{length:r,0:o}=this.redirect_uris||[];if(1===r)return o},authFor,authenticatedPost}},60577:r=>{"use strict";let o=Symbol(),u=Symbol();r.exports={CLOCK_TOLERANCE:u,HTTP_OPTIONS:o}},44759:(r,o,u)=>{"use strict";let p=u(26597);r.exports=r=>{if("string"!=typeof r||!r)throw TypeError("JWT must be a string");let{0:o,1:u,2:E,length:A}=r.split(".");if(5===A)throw TypeError("encrypted JWTs cannot be decoded");if(3!==A)throw Error("JWTs must have three components");try{return{header:JSON.parse(p.decode(o)),payload:JSON.parse(p.decode(u)),signature:E}}catch(r){throw Error("JWT is malformed")}}},68979:r=>{"use strict";r.exports=globalThis.structuredClone||(r=>JSON.parse(JSON.stringify(r)))},81772:(r,o,u)=>{"use strict";let p=u(13641);function defaults(r,o,...u){for(let E of u)if(p(E))for(let[u,A]of Object.entries(E))"__proto__"!==u&&"constructor"!==u&&(void 0===o[u]&&void 0!==A&&(o[u]=A),r&&p(o[u])&&p(A)&&defaults(!0,o[u],A));return o}r.exports=defaults.bind(void 0,!1),r.exports.deep=defaults.bind(void 0,!0)},29766:(r,o,u)=>{"use strict";let{createHash:p,randomBytes:E}=u(6113),A=u(26597),random=(r=32)=>A.encode(E(r));r.exports={random,state:random,nonce:random,codeVerifier:random,codeChallenge:r=>A.encode(p("sha256").update(r).digest())}},68060:(r,o,u)=>{"use strict";let p=u(73837),E=u(6113);r.exports=p.types.isKeyObject||(r=>r&&r instanceof E.KeyObject)},13641:r=>{"use strict";r.exports=r=>!!r&&r.constructor===Object},37875:(r,o,u)=>{"use strict";let p=u(29173),E=u(27523),{RPError:A}=u(10574),{assertIssuerConfiguration:J}=u(36245),W=u(73640),{keystores:R}=u(18763),I=u(7889),K=u(3135),U=new WeakMap,D=new WeakMap,lrus=r=>(D.has(r)||D.set(r,new E({max:100})),D.get(r));async function getKeyStore(r=!1){J(this,"jwks_uri");let o=R.get(this),u=lrus(this);return r||!o?(U.has(this)||(u.reset(),U.set(this,(async()=>{let r=await K.call(this,{method:"GET",responseType:"json",url:this.jwks_uri,headers:{Accept:"application/json, application/jwk-set+json"}}).finally(()=>{U.delete(this)}),o=I(r),p=W.fromJWKS(o,{onlyPublic:!0});return u.set("throttle",!0,6e4),R.set(this,p),p})())),U.get(this)):o}async function queryKeyStore({kid:r,kty:o,alg:u,use:E},{allowMulti:J=!1}={}){let W=lrus(this),R={kid:r,kty:o,alg:u,use:E},I=p(R,{algorithm:"sha256",ignoreUnknown:!0,unorderedArrays:!0,unorderedSets:!0,respectType:!1}),K=W.get(I)||W.get("throttle"),U=await getKeyStore.call(this,!K),D=U.all(R);if(delete R.use,0===D.length)throw new A({printf:["no valid key found in issuer's jwks_uri for key parameters %j",R],jwks:U});if(!J&&D.length>1&&!r)throw new A({printf:["multiple matching keys found in issuer's jwks_uri for key parameters %j, kid must be provided in this case",R],jwks:U});return W.set(I,!0),D}r.exports.queryKeyStore=queryKeyStore,r.exports.keystore=getKeyStore},73640:(r,o,u)=>{"use strict";let p=u(92473),E=u(68979),A=u(13641),J=Symbol(),keyscore=(r,{alg:o,use:u})=>{let p=0;return o&&r.alg&&p++,u&&r.use&&p++,p};r.exports=class{#h;constructor(r,o){if(r!==J)throw Error("invalid constructor call");this.#h=o}toJWKS(){return{keys:this.map(({jwk:{d:r,p:o,q:u,dp:p,dq:E,qi:A,...J}})=>J)}}all({alg:r,kid:o,use:u}={}){if(!u||!r)throw Error();let p=function(r){switch("string"==typeof r&&r.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:return}}(r),E={alg:r,use:u};return this.filter(E=>{let A=!0;return void 0!==p&&E.jwk.kty!==p&&(A=!1),A&&void 0!==o&&E.jwk.kid!==o&&(A=!1),A&&void 0!==u&&void 0!==E.jwk.use&&E.jwk.use!==u&&(A=!1),A&&E.jwk.alg&&E.jwk.alg!==r?A=!1:E.algorithms.has(r)||(A=!1),A}).sort((r,o)=>keyscore(o,E)-keyscore(r,E))}get(...r){return this.all(...r)[0]}static async fromJWKS(r,{onlyPublic:o=!1,onlyPrivate:u=!1}={}){if(!A(r)||!Array.isArray(r.keys)||r.keys.some(r=>!A(r)||!("kty"in r)))throw TypeError("jwks must be a JSON Web Key Set formatted object");let W=[];for(let A of r.keys){A=E(A);let{kty:r,kid:J,crv:R}=A,{alg:I,use:K}=A;if("string"==typeof r&&r&&(void 0===K||"sig"===K||"enc"===K)&&("string"==typeof I||void 0===I)&&("string"==typeof J||void 0===J)){if("EC"===r&&"sig"===K)switch(R){case"P-256":I="ES256";break;case"P-384":I="ES384";break;case"P-521":I="ES512"}if("secp256k1"===R&&(K="sig",I="ES256K"),"OKP"===r)switch(R){case"Ed25519":case"Ed448":K="sig",I="EdDSA";break;case"X25519":case"X448":K="enc"}if(I&&!K)switch(!0){case I.startsWith("ECDH"):case I.startsWith("RSA"):K="enc"}if(u&&("oct"===A.kty||!A.d))throw Error("jwks must only contain private keys");o&&(A.d||A.k)||W.push({jwk:{...A,alg:I,use:K},async keyObject(r){if(this[r])return this[r];let o=await p.importJWK(this.jwk,r);return this[r]=o,o},get algorithms(){return Object.defineProperty(this,"algorithms",{value:function(r,o,u,E){if(o)return new Set([o]);switch(u){case"EC":{let o=[];if(("enc"===r||void 0===r)&&(o=o.concat(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"])),"sig"===r||void 0===r)switch(E){case"P-256":case"P-384":o=o.concat([`ES${E.slice(-3)}`]);break;case"P-521":o=o.concat(["ES512"]);break;case"secp256k1":"node:crypto"===p.cryptoRuntime&&(o=o.concat(["ES256K"]))}return new Set(o)}case"OKP":return new Set(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"]);case"RSA":{let o=[];return("enc"===r||void 0===r)&&(o=o.concat(["RSA-OAEP","RSA-OAEP-256","RSA-OAEP-384","RSA-OAEP-512"]),"node:crypto"===p.cryptoRuntime&&(o=o.concat(["RSA1_5"]))),("sig"===r||void 0===r)&&(o=o.concat(["PS256","PS384","PS512","RS256","RS384","RS512"])),new Set(o)}default:throw Error("unreachable")}}(this.jwk.use,this.jwk.alg,this.jwk.kty,this.jwk.crv),enumerable:!0,configurable:!1}),this.algorithms}})}}return new this(J,W)}filter(...r){return this.#h.filter(...r)}find(...r){return this.#h.find(...r)}every(...r){return this.#h.every(...r)}some(...r){return this.#h.some(...r)}map(...r){return this.#h.map(...r)}forEach(...r){return this.#h.forEach(...r)}reduce(...r){return this.#h.reduce(...r)}sort(...r){return this.#h.sort(...r)}*[Symbol.iterator](){for(let r of this.#h)yield r}}},18038:(r,o,u)=>{"use strict";let p=u(13641);r.exports=function merge(r,...o){for(let u of o)if(p(u))for(let[o,E]of Object.entries(u))"__proto__"!==o&&"constructor"!==o&&(p(r[o])&&p(E)?r[o]=merge(r[o],E):void 0!==E&&(r[o]=E));return r}},52542:r=>{"use strict";r.exports=function(r,...o){let u={};for(let p of o)void 0!==r[p]&&(u[p]=r[p]);return u}},7889:(r,o,u)=>{"use strict";let{STATUS_CODES:p}=u(13685),{format:E}=u(73837),{OPError:A}=u(10574),J=u(92102),throwAuthenticateErrors=r=>{let o=J(r.headers["www-authenticate"]);if(o.error)throw new A(o,r)},isStandardBodyError=r=>{let o=!1;try{let u;u="object"!=typeof r.body||Buffer.isBuffer(r.body)?JSON.parse(r.body):r.body,(o="string"==typeof u.error&&u.error.length)&&Object.defineProperty(r,"body",{value:u,configurable:!0})}catch(r){}return o};r.exports=function(r,{statusCode:o=200,body:u=!0,bearer:J=!1}={}){if(r.statusCode!==o){if(J&&throwAuthenticateErrors(r),isStandardBodyError(r))throw new A(r.body,r);throw new A({error:E("expected %i %s, got: %i %s",o,p[o],r.statusCode,p[r.statusCode])},r)}if(u&&!r.body)throw new A({error:E("expected %i %s with body but no body was returned",o,p[o])},r);return r.body}},3135:(r,o,u)=>{"use strict";let p;let E=u(39491),A=u(63477),J=u(13685),W=u(95687),{once:R}=u(82361),{URL:I}=u(57310),K=u(27523),U=u(87658),{RPError:D}=u(10574),z=u(52542),{deep:G}=u(81772),{HTTP_OPTIONS:Y}=u(60577),X=/^[\x21\x23-\x5B\x5D-\x7E]+$/,Z=["agent","ca","cert","crl","headers","key","lookup","passphrase","pfx","timeout"],setDefaults=(r,o)=>{p=G({},r.length?z(o,...r):o,p)};function send(r,o,u){u&&(r.removeHeader("content-type"),r.setHeader("content-type",u)),o&&(r.removeHeader("content-length"),r.setHeader("content-length",Buffer.byteLength(o)),r.write(o)),r.end()}setDefaults([],{headers:{"User-Agent":`${U.name}/${U.version} (${U.homepage})`,"Accept-Encoding":"identity"},timeout:3500});let Q=new K({max:100});r.exports=async function(r,{accessToken:o,mTLS:u=!1,DPoP:K}={}){let U,ee,et,er,en,ei,eo;try{U=new I(r.url),delete r.url,E(/^(https?:)$/.test(U.protocol))}catch(r){throw TypeError("only valid absolute URLs can be requested")}let ea=this[Y],es=r,ec=`${U.origin}${U.pathname}`;if(K&&"dpopProof"in this&&(es.headers=es.headers||{},es.headers.DPoP=await this.dpopProof({htu:`${U.origin}${U.pathname}`,htm:r.method||"GET",nonce:Q.get(ec)},K,o)),ea&&(ee=z(ea.call(this,U,G({},es,p)),...Z)),es=G({},ee,es,p),u&&!es.pfx&&!(es.key&&es.cert))throw TypeError("mutual-TLS certificate and key not set");if(es.searchParams)for(let[r,o]of Object.entries(es.searchParams))U.searchParams.delete(r),U.searchParams.set(r,o);for(let[r,o]of({form:er,responseType:et,json:en,body:ei,...es}=es,Object.entries(es.headers||{})))void 0===o&&delete es.headers[r];let el=("https:"===U.protocol?W.request:J.request)(U.href,es);return(async()=>{if(en?send(el,JSON.stringify(en),"application/json"):er?send(el,A.stringify(er),"application/x-www-form-urlencoded"):ei?send(el,ei):send(el),[eo]=await Promise.race([R(el,"response"),R(el,"timeout")]),!eo)throw el.destroy(),new D(`outgoing request timed out after ${es.timeout}ms`);let r=[];for await(let o of eo)r.push(o);if(r.length)switch(et){case"json":Object.defineProperty(eo,"body",{get(){let o=Buffer.concat(r);try{o=JSON.parse(o)}catch(r){throw Object.defineProperty(r,"response",{value:eo}),r}finally{Object.defineProperty(eo,"body",{value:o,configurable:!0})}return o},configurable:!0});break;case void 0:case"buffer":Object.defineProperty(eo,"body",{get(){let o=Buffer.concat(r);return Object.defineProperty(eo,"body",{value:o,configurable:!0}),o},configurable:!0});break;default:throw TypeError("unsupported responseType request option")}return eo})().catch(r=>{throw eo&&Object.defineProperty(r,"response",{value:eo}),r}).finally(()=>{let r=eo&&eo.headers["dpop-nonce"];r&&X.test(r)&&Q.set(ec,r)})},r.exports.setDefaults=setDefaults.bind(void 0,Z)},91624:r=>{"use strict";r.exports=()=>Math.floor(Date.now()/1e3)},18763:r=>{"use strict";r.exports.keystores=new WeakMap},31122:r=>{"use strict";let o=/^\d+$/;r.exports=function(r){if("string"!=typeof r)throw TypeError("input must be a string");return(!function(r){if(r.includes("://"))return!0;let u=r.replace(/(\/|\?)/g,"#").split("#")[0];if(u.includes(":")){let r=u.indexOf(":"),p=u.slice(r+1);if(!o.test(p))return!0}return!1}(r)?!function(r){if(!r.includes("@"))return!1;let o=r.split("@"),u=o[o.length-1];return!(u.includes(":")||u.includes("/")||u.includes("?"))}(r)?`https://${r}`:`acct:${r}`:r).split("#")[0]}},92102:r=>{"use strict";let o=/(\w+)=("[^"]*")/g;r.exports=r=>{let u={};try{for(;null!==o.exec(r);)RegExp.$1&&RegExp.$2&&(u[RegExp.$1]=RegExp.$2.slice(1,-1))}catch(r){}return u}},78165:(r,o,u)=>{"use strict";let p=u(3144),{OPError:E,RPError:A}=u(10574),J=u(21307),W=u(8164),{CLOCK_TOLERANCE:R,HTTP_OPTIONS:I}=u(60577),K=u(29766),{setDefaults:U}=u(3135);r.exports={Issuer:p,Strategy:J,TokenSet:W,errors:{OPError:E,RPError:A},custom:{setHttpOptionsDefaults:U,http_options:I,clock_tolerance:R},generators:K}},3144:(r,o,u)=>{"use strict";let{inspect:p}=u(73837),E=u(57310),{RPError:A}=u(10574),J=u(76398),W=u(31567),R=u(7889),I=u(31122),K=u(3135),U=u(68979),{keystore:D}=u(37875),z=["https://login.microsoftonline.com/common/.well-known/openid-configuration","https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration"],G=Symbol(),Y={claim_types_supported:["normal"],claims_parameter_supported:!1,grant_types_supported:["authorization_code","implicit"],request_parameter_supported:!1,request_uri_parameter_supported:!0,require_request_uri_registration:!1,response_modes_supported:["query","fragment"],token_endpoint_auth_methods_supported:["client_secret_basic"]};let Issuer=class Issuer{#e;constructor(r={}){let o=r[G];delete r[G],["introspection","revocation"].forEach(o=>{r[`${o}_endpoint`]&&void 0===r[`${o}_endpoint_auth_methods_supported`]&&void 0===r[`${o}_endpoint_auth_signing_alg_values_supported`]&&(r.token_endpoint_auth_methods_supported&&(r[`${o}_endpoint_auth_methods_supported`]=r.token_endpoint_auth_methods_supported),r.token_endpoint_auth_signing_alg_values_supported&&(r[`${o}_endpoint_auth_signing_alg_values_supported`]=r.token_endpoint_auth_signing_alg_values_supported))}),this.#e=new Map,Object.entries(r).forEach(([r,o])=>{this.#e.set(r,o),this[r]||Object.defineProperty(this,r,{get(){return this.#e.get(r)},enumerable:!0})}),W.set(this.issuer,this);let u=J(this,o);Object.defineProperties(this,{Client:{value:u,enumerable:!0},FAPI1Client:{value:class extends u{},enumerable:!0},FAPI2Client:{value:class extends u{},enumerable:!0}})}get metadata(){return U(Object.fromEntries(this.#e.entries()))}static async webfinger(r){let o=I(r),{host:u}=E.parse(o),p=`https://${u}/.well-known/webfinger`,J=await K.call(this,{method:"GET",url:p,responseType:"json",searchParams:{resource:o,rel:"http://openid.net/specs/connect/1.0/issuer"},headers:{Accept:"application/json"}}),U=R(J),D=Array.isArray(U.links)&&U.links.find(r=>"object"==typeof r&&"http://openid.net/specs/connect/1.0/issuer"===r.rel&&r.href);if(!D)throw new A({message:"no issuer found in webfinger response",body:U});if("string"!=typeof D.href||!D.href.startsWith("https://"))throw new A({printf:["invalid issuer location %s",D.href],body:U});let z=D.href;if(W.has(z))return W.get(z);let G=await this.discover(z);if(G.issuer!==z)throw W.del(G.issuer),new A("discovered issuer mismatch, expected %s, got: %s",z,G.issuer);return G}static async discover(r){let o=function(r){let o=E.parse(r);if(o.pathname.includes("/.well-known/"))return r;{let r;return r=o.pathname.endsWith("/")?`${o.pathname}.well-known/openid-configuration`:`${o.pathname}/.well-known/openid-configuration`,E.format({...o,pathname:r})}}(r),u=await K.call(this,{method:"GET",responseType:"json",url:o,headers:{Accept:"application/json"}}),p=R(u);return new Issuer({...Y,...p,[G]:!!z.find(r=>o.startsWith(r))})}async reloadJwksUri(){await D.call(this,!0)}[p.custom](){return`${this.constructor.name} ${p(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}};r.exports=Issuer},31567:(r,o,u)=>{"use strict";let p=u(27523);r.exports=new p({max:100})},21307:(r,o,u)=>{"use strict";let p=u(57310),{format:E}=u(73837),A=u(68979),{RPError:J,OPError:W}=u(10574),{BaseClient:R}=u(76398),{random:I,codeChallenge:K}=u(29766),U=u(52542),{resolveResponseType:D,resolveRedirectUri:z}=u(98522);function verified(r,o,u={}){r?this.error(r):o?this.success(o,u):this.fail(u)}function OpenIDConnectStrategy({client:r,params:o={},passReqToCallback:u=!1,sessionKey:E,usePKCE:J=!0,extras:W={}}={},I){if(!(r instanceof R))throw TypeError("client must be an instance of openid-client Client");if("function"!=typeof I)throw TypeError("verify callback must be a function");if(!r.issuer||!r.issuer.issuer)throw TypeError("client must have an issuer with an identifier");if(this._client=r,this._issuer=r.issuer,this._verify=I,this._passReqToCallback=u,this._usePKCE=J,this._key=E||`oidc:${p.parse(this._issuer.issuer).hostname}`,this._params=A(o),delete this._params.state,delete this._params.nonce,this._extras=A(W),this._params.response_type||(this._params.response_type=D.call(r)),this._params.redirect_uri||(this._params.redirect_uri=z.call(r)),this._params.scope||(this._params.scope="openid"),!0===this._usePKCE){let r=!!Array.isArray(this._issuer.code_challenge_methods_supported)&&this._issuer.code_challenge_methods_supported;if(r&&r.includes("S256"))this._usePKCE="S256";else if(r&&r.includes("plain"))this._usePKCE="plain";else if(r)throw TypeError("neither code_challenge_method supported by the client is supported by the issuer");else this._usePKCE="S256"}else if("string"==typeof this._usePKCE&&!["plain","S256"].includes(this._usePKCE))throw TypeError(`${this._usePKCE} is not valid/implemented PKCE code_challenge_method`);this.name=p.parse(r.issuer.issuer).hostname}OpenIDConnectStrategy.prototype.authenticate=function(r,o){(async()=>{let u=this._client;if(!r.session)throw TypeError("authentication requires session support");let p=u.callbackParams(r),A=this._key,{0:W,length:R}=Object.keys(p);if(0===R||1===R&&"iss"===W){let p={state:I(),...this._params,...o};if(!p.nonce&&p.response_type.includes("id_token")&&(p.nonce=I()),r.session[A]=U(p,"nonce","state","max_age","response_type"),this._usePKCE&&p.response_type.includes("code")){let o=I();switch(r.session[A].code_verifier=o,this._usePKCE){case"S256":p.code_challenge=K(o),p.code_challenge_method="S256";break;case"plain":p.code_challenge=o}}this.redirect(u.authorizationUrl(p));return}let D=r.session[A];if(0===Object.keys(D||{}).length)throw Error(E('did not find expected authorization request details in session, req.session["%s"] is %j',A,D));let{state:z,nonce:G,max_age:Y,code_verifier:X,response_type:Z}=D;try{delete r.session[A]}catch(r){}let Q={redirect_uri:this._params.redirect_uri,...o},ee=await u.callback(Q.redirect_uri,p,{state:z,nonce:G,max_age:Y,code_verifier:X,response_type:Z},this._extras),et=this._passReqToCallback,er=this._verify.length>(et?3:2)&&u.issuer.userinfo_endpoint,en=[ee,verified.bind(this)];if(er){if(!ee.access_token)throw new J({message:"expected access_token to be returned when asking for userinfo in verify callback",tokenset:ee});let r=await u.userinfo(ee);en.splice(1,0,r)}et&&en.unshift(r),this._verify(...en)})().catch(r=>{r instanceof W&&"server_error"!==r.error&&!r.error.startsWith("invalid")||r instanceof J?this.fail(r):this.error(r)})},r.exports=OpenIDConnectStrategy},8164:(r,o,u)=>{"use strict";let p=u(26597),E=u(91624);r.exports=class{constructor(r){Object.assign(this,r);let{constructor:o,...u}=Object.getOwnPropertyDescriptors(this.constructor.prototype);Object.defineProperties(this,u)}set expires_in(r){this.expires_at=E()+Number(r)}get expires_in(){return Math.max.apply(null,[this.expires_at-E(),0])}expired(){return 0===this.expires_in}claims(){if(!this.id_token)throw TypeError("id_token not present in TokenSet");return JSON.parse(p.decode(this.id_token.split(".")[1]))}}},32302:function(r,o,u){(function(r,o){var u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,p=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,E=/[\s\n\\/='"\0<>]/,A=/^xlink:?./,J=/["&<]/;function a(r){if(!1===J.test(r+=""))return r;for(var o=0,u=0,p="",E="";u<r.length;u++){switch(r.charCodeAt(u)){case 34:E="&quot;";break;case 38:E="&amp;";break;case 60:E="&lt;";break;default:continue}u!==o&&(p+=r.slice(o,u)),p+=E,o=u+1}return u!==o&&(p+=r.slice(o,u)),p}var l=function(r,o){return String(r).replace(/(\n+)/g,"$1"+(o||"	"))},f=function(r,o,u){return String(r).length>(o||40)||!u&&-1!==String(r).indexOf("\n")||-1!==String(r).indexOf("<")},W={},R=/([A-Z])/g;function c(r){var o="";for(var p in r){var E=r[p];null!=E&&""!==E&&(o&&(o+=" "),o+="-"==p[0]?p:W[p]||(W[p]=p.replace(R,"-$1").toLowerCase()),o="number"==typeof E&&!1===u.test(p)?o+": "+E+"px;":o+": "+E+";")}return o||void 0}function _(r,o){return Array.isArray(o)?o.reduce(_,r):null!=o&&!1!==o&&r.push(o),r}function d(){this.__d=!0}function v(r,o){return{__v:r,context:o,props:r.props,setState:d,forceUpdate:d,__d:!0,__h:[]}}function g(r,o){var u=r.contextType,p=u&&o[u.__c];return null!=u?p?p.props.value:u.__:o}var I=[],K={shallow:!0};k.render=k;var b=function(r,o){return k(r,o,K)},U=[];function k(r,u,J){u=u||{};var W=o.options.__s;o.options.__s=!0;var R,K=o.h(o.Fragment,null);return K.__k=[r],R=J&&(J.pretty||J.voidElements||J.sortAttributes||J.shallow||J.allAttributes||J.xml||J.attributeHook)?function y(r,u,J,W,R,K){if(null==r||"boolean"==typeof r)return"";if("object"!=typeof r)return"function"==typeof r?"":a(r);var U=J.pretty,D=U&&"string"==typeof U?U:"	";if(Array.isArray(r)){for(var z="",G=0;G<r.length;G++)U&&G>0&&(z+="\n"),z+=y(r[G],u,J,W,R,K);return z}if(void 0!==r.constructor)return"";var Y,X=r.type,Z=r.props,Q=!1;if("function"==typeof X){if(Q=!0,!J.shallow||!W&&!1!==J.renderRootComponent){if(X===o.Fragment){var ee=[];return _(ee,r.props.children),y(ee,u,J,!1!==J.shallowHighOrder,R,K)}var et,er=r.__c=v(r,u);o.options.__b&&o.options.__b(r);var en=o.options.__r;if(X.prototype&&"function"==typeof X.prototype.render){var ei=g(X,u);(er=r.__c=new X(Z,ei)).__v=r,er._dirty=er.__d=!0,er.props=Z,null==er.state&&(er.state={}),null==er._nextState&&null==er.__s&&(er._nextState=er.__s=er.state),er.context=ei,X.getDerivedStateFromProps?er.state=Object.assign({},er.state,X.getDerivedStateFromProps(er.props,er.state)):er.componentWillMount&&(er.componentWillMount(),er.state=er._nextState!==er.state?er._nextState:er.__s!==er.state?er.__s:er.state),en&&en(r),et=er.render(er.props,er.state,er.context)}else for(var eo=g(X,u),ea=0;er.__d&&ea++<25;)er.__d=!1,en&&en(r),et=X.call(r.__c,Z,eo);return er.getChildContext&&(u=Object.assign({},u,er.getChildContext())),o.options.diffed&&o.options.diffed(r),y(et,u,J,!1!==J.shallowHighOrder,R,K)}X=(Y=X).displayName||Y!==Function&&Y.name||function(r){var o=(Function.prototype.toString.call(r).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!o){for(var u=-1,p=I.length;p--;)if(I[p]===r){u=p;break}u<0&&(u=I.push(r)-1),o="UnnamedComponent"+u}return o}(Y)}var es,ec,el="<"+X;if(Z){var eu=Object.keys(Z);J&&!0===J.sortAttributes&&eu.sort();for(var ed=0;ed<eu.length;ed++){var ep=eu[ed],eh=Z[ep];if("children"!==ep){if(!E.test(ep)&&(J&&J.allAttributes||"key"!==ep&&"ref"!==ep&&"__self"!==ep&&"__source"!==ep)){if("defaultValue"===ep)ep="value";else if("defaultChecked"===ep)ep="checked";else if("defaultSelected"===ep)ep="selected";else if("className"===ep){if(void 0!==Z.class)continue;ep="class"}else R&&A.test(ep)&&(ep=ep.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===ep){if(Z.for)continue;ep="for"}"style"===ep&&eh&&"object"==typeof eh&&(eh=c(eh)),"a"===ep[0]&&"r"===ep[1]&&"boolean"==typeof eh&&(eh=String(eh));var ef=J.attributeHook&&J.attributeHook(ep,eh,u,J,Q);if(ef||""===ef)el+=ef;else if("dangerouslySetInnerHTML"===ep)ec=eh&&eh.__html;else if("textarea"===X&&"value"===ep)es=eh;else if((eh||0===eh||""===eh)&&"function"!=typeof eh){if(!(!0!==eh&&""!==eh||(eh=ep,J&&J.xml))){el=el+" "+ep;continue}if("value"===ep){if("select"===X){K=eh;continue}"option"===X&&K==eh&&void 0===Z.selected&&(el+=" selected")}el=el+" "+ep+'="'+a(eh)+'"'}}}else es=eh}}if(U){var ey=el.replace(/\n\s*/," ");ey===el||~ey.indexOf("\n")?U&&~el.indexOf("\n")&&(el+="\n"):el=ey}if(el+=">",E.test(X))throw Error(X+" is not a valid HTML tag name in "+el);var e_,eg=p.test(X)||J.voidElements&&J.voidElements.test(X),em=[];if(ec)U&&f(ec)&&(ec="\n"+D+l(ec,D)),el+=ec;else if(null!=es&&_(e_=[],es).length){for(var ev=U&&~el.indexOf("\n"),ew=!1,eb=0;eb<e_.length;eb++){var ek=e_[eb];if(null!=ek&&!1!==ek){var eS=y(ek,u,J,!0,"svg"===X||"foreignObject"!==X&&R,K);if(U&&!ev&&f(eS)&&(ev=!0),eS){if(U){var eE=eS.length>0&&"<"!=eS[0];ew&&eE?em[em.length-1]+=eS:em.push(eS),ew=eE}else em.push(eS)}}}if(U&&ev)for(var eA=em.length;eA--;)em[eA]="\n"+D+l(em[eA],D)}if(em.length||ec)el+=em.join("");else if(J&&J.xml)return el.substring(0,el.length-1)+" />";return!eg||e_||ec?(U&&~el.indexOf("\n")&&(el+="\n"),el=el+"</"+X+">"):el=el.replace(/>$/," />"),el}(r,u,J):function F(r,u,J,W,R){if(null==r||!0===r||!1===r||""===r)return"";if("object"!=typeof r)return"function"==typeof r?"":a(r);if(D(r)){var I="";R.__k=r;for(var K=0;K<r.length;K++)I+=F(r[K],u,J,W,R),r[K]=S(r[K]);return I}if(void 0!==r.constructor)return"";r.__=R,o.options.__b&&o.options.__b(r);var U=r.type,G=r.props;if("function"==typeof U){if(U===o.Fragment)et=G.children;else{et=U.prototype&&"function"==typeof U.prototype.render?(Y=u,Z=g(X=r.type,Y),Q=new X(r.props,Z),r.__c=Q,Q.__v=r,Q.__d=!0,Q.props=r.props,null==Q.state&&(Q.state={}),null==Q.__s&&(Q.__s=Q.state),Q.context=Z,X.getDerivedStateFromProps?Q.state=z({},Q.state,X.getDerivedStateFromProps(Q.props,Q.state)):Q.componentWillMount&&(Q.componentWillMount(),Q.state=Q.__s!==Q.state?Q.__s:Q.state),(ee=o.options.__r)&&ee(r),Q.render(Q.props,Q.state,Q.context)):function(r,u){var p,E=v(r,u),A=g(r.type,u);r.__c=E;for(var J=o.options.__r,W=0;E.__d&&W++<25;)E.__d=!1,J&&J(r),p=r.type.call(E,r.props,A);return p}(r,u);var Y,X,Z,Q,ee,et,er=r.__c;er.getChildContext&&(u=z({},u,er.getChildContext()))}var en=F(et=null!=et&&et.type===o.Fragment&&null==et.key?et.props.children:et,u,J,W,r);return o.options.diffed&&o.options.diffed(r),r.__=void 0,o.options.unmount&&o.options.unmount(r),en}var ei,eo,ea="<";if(ea+=U,G)for(var es in ei=G.children,G){var ec,el,eu,ed=G[es];if(!("key"===es||"ref"===es||"__self"===es||"__source"===es||"children"===es||"className"===es&&"class"in G||"htmlFor"===es&&"for"in G||E.test(es))){if(el=es="className"===(ec=es)?"class":"htmlFor"===ec?"for":"defaultValue"===ec?"value":"defaultChecked"===ec?"checked":"defaultSelected"===ec?"selected":J&&A.test(ec)?ec.toLowerCase().replace(/^xlink:?/,"xlink:"):ec,eu=ed,ed="style"===el&&null!=eu&&"object"==typeof eu?c(eu):"a"===el[0]&&"r"===el[1]&&"boolean"==typeof eu?String(eu):eu,"dangerouslySetInnerHTML"===es)eo=ed&&ed.__html;else if("textarea"===U&&"value"===es)ei=ed;else if((ed||0===ed||""===ed)&&"function"!=typeof ed){if(!0===ed||""===ed){ed=es,ea=ea+" "+es;continue}if("value"===es){if("select"===U){W=ed;continue}"option"!==U||W!=ed||"selected"in G||(ea+=" selected")}ea=ea+" "+es+'="'+a(ed)+'"'}}}var ep=ea;if(ea+=">",E.test(U))throw Error(U+" is not a valid HTML tag name in "+ea);var eh="",ef=!1;if(eo)eh+=eo,ef=!0;else if("string"==typeof ei)eh+=a(ei),ef=!0;else if(D(ei)){r.__k=ei;for(var ey=0;ey<ei.length;ey++){var e_=ei[ey];if(ei[ey]=S(e_),null!=e_&&!1!==e_){var eg=F(e_,u,"svg"===U||"foreignObject"!==U&&J,W,r);eg&&(eh+=eg,ef=!0)}}}else if(null!=ei&&!1!==ei&&!0!==ei){r.__k=[S(ei)];var em=F(ei,u,"svg"===U||"foreignObject"!==U&&J,W,r);em&&(eh+=em,ef=!0)}if(o.options.diffed&&o.options.diffed(r),r.__=void 0,o.options.unmount&&o.options.unmount(r),ef)ea+=eh;else if(p.test(U))return ep+" />";return ea+"</"+U+">"}(r,u,!1,void 0,K),o.options.__c&&o.options.__c(r,U),o.options.__s=W,U.length=0,R}function S(r){return null==r||"boolean"==typeof r?null:"string"==typeof r||"number"==typeof r||"bigint"==typeof r?o.h(null,null,r):r}var D=Array.isArray,z=Object.assign;k.shallowRender=b,r.default=k,r.render=k,r.renderToStaticMarkup=k,r.renderToString=k,r.shallowRender=b})(o,u(22838))},54412:(r,o,u)=>{"use strict";r.exports=u(32302).default},22838:(r,o)=>{var u,p,E,A,J,W,R,I,K,U,D,z,G={},Y=[],X=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Z=Array.isArray;function d(r,o){for(var u in o)r[u]=o[u];return r}function g(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function _(r,o,p){var E,A,J,W={};for(J in o)"key"==J?E=o[J]:"ref"==J?A=o[J]:W[J]=o[J];if(arguments.length>2&&(W.children=arguments.length>3?u.call(arguments,2):p),"function"==typeof r&&null!=r.defaultProps)for(J in r.defaultProps)null==W[J]&&(W[J]=r.defaultProps[J]);return x(r,W,E,A,null)}function x(r,o,u,A,J){var W={type:r,props:o,key:u,ref:A,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==J?++E:J,__i:-1,__u:0};return null==J&&null!=p.vnode&&p.vnode(W),W}function m(r){return r.children}function b(r,o){this.props=r,this.context=o}function k(r,o){if(null==o)return r.__?k(r.__,r.__i+1):null;for(var u;o<r.__k.length;o++)if(null!=(u=r.__k[o])&&null!=u.__e)return u.__e;return"function"==typeof r.type?k(r):null}function M(r){(!r.__d&&(r.__d=!0)&&A.push(r)&&!$.__r++||J!=p.debounceRendering)&&((J=p.debounceRendering)||W)($)}function $(){for(var r,o,u,E,J,W,I=1;A.length;)A.length>I&&A.sort(R),r=A.shift(),I=A.length,r.__d&&(o=void 0,E=(u=r.__v).__e,J=[],W=[],r.__P&&((o=d({},u)).__v=u.__v+1,p.vnode&&p.vnode(o),j(r.__P,o,u,r.__n,r.__P.namespaceURI,32&u.__u?[E]:null,J,null==E?k(u):E,!!(32&u.__u),W),o.__v=u.__v,o.__.__k[o.__i]=o,F(J,o,W),o.__e!=E&&function S(r){var o,u;if(null!=(r=r.__)&&null!=r.__c){for(r.__e=r.__c.base=null,o=0;o<r.__k.length;o++)if(null!=(u=r.__k[o])&&null!=u.__e){r.__e=r.__c.base=u.__e;break}return S(r)}}(o)));$.__r=0}function C(r,o,u,E,A,J,W,R,I,K,U){var D,z,X,Q,ee,et,er=E&&E.__k||Y,en=o.length;for(I=function(r,o,u,E,A){var J,W,R,I,K,U=u.length,D=U,z=0;for(r.__k=Array(A),J=0;J<A;J++)null!=(W=o[J])&&"boolean"!=typeof W&&"function"!=typeof W?(I=J+z,(W=r.__k[J]="string"==typeof W||"number"==typeof W||"bigint"==typeof W||W.constructor==String?x(null,W,null,null,null):Z(W)?x(m,{children:W},null,null,null):null==W.constructor&&W.__b>0?x(W.type,W.props,W.key,W.ref?W.ref:null,W.__v):W).__=r,W.__b=r.__b+1,R=null,-1!=(K=W.__i=function(r,o,u,p){var E,A,J=r.key,W=r.type,R=o[u];if(null===R&&null==r.key||R&&J==R.key&&W==R.type&&0==(2&R.__u))return u;if(p>(null!=R&&0==(2&R.__u)?1:0))for(E=u-1,A=u+1;E>=0||A<o.length;){if(E>=0){if((R=o[E])&&0==(2&R.__u)&&J==R.key&&W==R.type)return E;E--}if(A<o.length){if((R=o[A])&&0==(2&R.__u)&&J==R.key&&W==R.type)return A;A++}}return -1}(W,u,I,D))&&(D--,(R=u[K])&&(R.__u|=2)),null==R||null==R.__v?(-1==K&&(A>U?z--:A<U&&z++),"function"!=typeof W.type&&(W.__u|=4)):K!=I&&(K==I-1?z--:K==I+1?z++:(K>I?z--:z++,W.__u|=4))):r.__k[J]=null;if(D)for(J=0;J<U;J++)null!=(R=u[J])&&0==(2&R.__u)&&(R.__e==E&&(E=k(R)),function V(r,o,u){var E,A;if(p.unmount&&p.unmount(r),(E=r.ref)&&(E.current&&E.current!=r.__e||N(E,null,o)),null!=(E=r.__c)){if(E.componentWillUnmount)try{E.componentWillUnmount()}catch(r){p.__e(r,o)}E.base=E.__P=null}if(E=r.__k)for(A=0;A<E.length;A++)E[A]&&V(E[A],o,u||"function"!=typeof r.type);u||g(r.__e),r.__c=r.__=r.__e=void 0}(R,R));return E}(u,o,er,I,en),D=0;D<en;D++)null!=(X=u.__k[D])&&(z=-1==X.__i?G:er[X.__i]||G,X.__i=D,et=j(r,X,z,A,J,W,R,I,K,U),Q=X.__e,X.ref&&z.ref!=X.ref&&(z.ref&&N(z.ref,null,X),U.push(X.ref,X.__c||Q,X)),null==ee&&null!=Q&&(ee=Q),4&X.__u||z.__k===X.__k?I=function P(r,o,u){var p,E;if("function"==typeof r.type){for(p=r.__k,E=0;p&&E<p.length;E++)p[E]&&(p[E].__=r,o=P(p[E],o,u));return o}r.__e!=o&&(o&&r.type&&!u.contains(o)&&(o=k(r)),u.insertBefore(r.__e,o||null),o=r.__e);do o=o&&o.nextSibling;while(null!=o&&8==o.nodeType);return o}(X,I,r):"function"==typeof X.type&&void 0!==et?I=et:Q&&(I=Q.nextSibling),X.__u&=-7);return u.__e=ee,I}function H(r,o,u){"-"==o[0]?r.setProperty(o,null==u?"":u):r[o]=null==u?"":"number"!=typeof u||X.test(o)?u:u+"px"}function L(r,o,u,p,E){var A;e:if("style"==o){if("string"==typeof u)r.style.cssText=u;else{if("string"==typeof p&&(r.style.cssText=p=""),p)for(o in p)u&&o in u||H(r.style,o,"");if(u)for(o in u)p&&u[o]==p[o]||H(r.style,o,u[o])}}else if("o"==o[0]&&"n"==o[1])A=o!=(o=o.replace(I,"$1")),o=o.toLowerCase() in r||"onFocusOut"==o||"onFocusIn"==o?o.toLowerCase().slice(2):o.slice(2),r.l||(r.l={}),r.l[o+A]=u,u?p?u.t=p.t:(u.t=K,r.addEventListener(o,A?D:U,A)):r.removeEventListener(o,A?D:U,A);else{if("http://www.w3.org/2000/svg"==E)o=o.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=o&&"height"!=o&&"href"!=o&&"list"!=o&&"form"!=o&&"tabIndex"!=o&&"download"!=o&&"rowSpan"!=o&&"colSpan"!=o&&"role"!=o&&"popover"!=o&&o in r)try{r[o]=null==u?"":u;break e}catch(r){}"function"==typeof u||(null==u||!1===u&&"-"!=o[4]?r.removeAttribute(o):r.setAttribute(o,"popover"==o&&1==u?"":u))}}function T(r){return function(o){if(this.l){var u=this.l[o.type+r];if(null==o.u)o.u=K++;else if(o.u<u.t)return;return u(p.event?p.event(o):o)}}}function j(r,o,E,A,J,W,R,I,K,U){var D,z,Y,X,Q,ee,et,er,en,ei,eo,ea,es,ec,el,eu,ed,ep=o.type;if(null!=o.constructor)return null;128&E.__u&&(K=!!(32&E.__u),W=[I=o.__e=E.__e]),(D=p.__b)&&D(o);e:if("function"==typeof ep)try{if(er=o.props,en="prototype"in ep&&ep.prototype.render,ei=(D=ep.contextType)&&A[D.__c],eo=D?ei?ei.props.value:D.__:A,E.__c?et=(z=o.__c=E.__c).__=z.__E:(en?o.__c=z=new ep(er,eo):(o.__c=z=new b(er,eo),z.constructor=ep,z.render=q),ei&&ei.sub(z),z.props=er,z.state||(z.state={}),z.context=eo,z.__n=A,Y=z.__d=!0,z.__h=[],z._sb=[]),en&&null==z.__s&&(z.__s=z.state),en&&null!=ep.getDerivedStateFromProps&&(z.__s==z.state&&(z.__s=d({},z.__s)),d(z.__s,ep.getDerivedStateFromProps(er,z.__s))),X=z.props,Q=z.state,z.__v=o,Y)en&&null==ep.getDerivedStateFromProps&&null!=z.componentWillMount&&z.componentWillMount(),en&&null!=z.componentDidMount&&z.__h.push(z.componentDidMount);else{if(en&&null==ep.getDerivedStateFromProps&&er!==X&&null!=z.componentWillReceiveProps&&z.componentWillReceiveProps(er,eo),!z.__e&&null!=z.shouldComponentUpdate&&!1===z.shouldComponentUpdate(er,z.__s,eo)||o.__v==E.__v){for(o.__v!=E.__v&&(z.props=er,z.state=z.__s,z.__d=!1),o.__e=E.__e,o.__k=E.__k,o.__k.some(function(r){r&&(r.__=o)}),ea=0;ea<z._sb.length;ea++)z.__h.push(z._sb[ea]);z._sb=[],z.__h.length&&R.push(z);break e}null!=z.componentWillUpdate&&z.componentWillUpdate(er,z.__s,eo),en&&null!=z.componentDidUpdate&&z.__h.push(function(){z.componentDidUpdate(X,Q,ee)})}if(z.context=eo,z.props=er,z.__P=r,z.__e=!1,es=p.__r,ec=0,en){for(z.state=z.__s,z.__d=!1,es&&es(o),D=z.render(z.props,z.state,z.context),el=0;el<z._sb.length;el++)z.__h.push(z._sb[el]);z._sb=[]}else do z.__d=!1,es&&es(o),D=z.render(z.props,z.state,z.context),z.state=z.__s;while(z.__d&&++ec<25);z.state=z.__s,null!=z.getChildContext&&(A=d(d({},A),z.getChildContext())),en&&!Y&&null!=z.getSnapshotBeforeUpdate&&(ee=z.getSnapshotBeforeUpdate(X,Q)),eu=D,null!=D&&D.type===m&&null==D.key&&(eu=function O(r){return"object"!=typeof r||null==r||r.__b&&r.__b>0?r:Z(r)?r.map(O):d({},r)}(D.props.children)),I=C(r,Z(eu)?eu:[eu],o,E,A,J,W,R,I,K,U),z.base=o.__e,o.__u&=-161,z.__h.length&&R.push(z),et&&(z.__E=z.__=null)}catch(r){if(o.__v=null,K||null!=W){if(r.then){for(o.__u|=K?160:128;I&&8==I.nodeType&&I.nextSibling;)I=I.nextSibling;W[W.indexOf(I)]=null,o.__e=I}else for(ed=W.length;ed--;)g(W[ed])}else o.__e=E.__e,o.__k=E.__k;p.__e(r,o,E)}else null==W&&o.__v==E.__v?(o.__k=E.__k,o.__e=E.__e):I=o.__e=function(r,o,E,A,J,W,R,I,K){var U,D,z,Y,X,Q,ee,et=E.props,er=o.props,en=o.type;if("svg"==en?J="http://www.w3.org/2000/svg":"math"==en?J="http://www.w3.org/1998/Math/MathML":J||(J="http://www.w3.org/1999/xhtml"),null!=W){for(U=0;U<W.length;U++)if((X=W[U])&&"setAttribute"in X==!!en&&(en?X.localName==en:3==X.nodeType)){r=X,W[U]=null;break}}if(null==r){if(null==en)return document.createTextNode(er);r=document.createElementNS(J,en,er.is&&er),I&&(p.__m&&p.__m(o,W),I=!1),W=null}if(null==en)et===er||I&&r.data==er||(r.data=er);else{if(W=W&&u.call(r.childNodes),et=E.props||G,!I&&null!=W)for(et={},U=0;U<r.attributes.length;U++)et[(X=r.attributes[U]).name]=X.value;for(U in et)if(X=et[U],"children"==U);else if("dangerouslySetInnerHTML"==U)z=X;else if(!(U in er)){if("value"==U&&"defaultValue"in er||"checked"==U&&"defaultChecked"in er)continue;L(r,U,null,X,J)}for(U in er)X=er[U],"children"==U?Y=X:"dangerouslySetInnerHTML"==U?D=X:"value"==U?Q=X:"checked"==U?ee=X:I&&"function"!=typeof X||et[U]===X||L(r,U,X,et[U],J);if(D)I||z&&(D.__html==z.__html||D.__html==r.innerHTML)||(r.innerHTML=D.__html),o.__k=[];else if(z&&(r.innerHTML=""),C("template"==o.type?r.content:r,Z(Y)?Y:[Y],o,E,A,"foreignObject"==en?"http://www.w3.org/1999/xhtml":J,W,R,W?W[0]:E.__k&&k(E,0),I,K),null!=W)for(U=W.length;U--;)g(W[U]);I||(U="value","progress"==en&&null==Q?r.removeAttribute("value"):null==Q||Q===r[U]&&("progress"!=en||Q)&&("option"!=en||Q==et[U])||L(r,U,Q,et[U],J),U="checked",null!=ee&&ee!=r[U]&&L(r,U,ee,et[U],J))}return r}(E.__e,o,E,A,J,W,R,K,U);return(D=p.diffed)&&D(o),128&o.__u?void 0:I}function F(r,o,u){for(var E=0;E<u.length;E++)N(u[E],u[++E],u[++E]);p.__c&&p.__c(o,r),r.some(function(o){try{r=o.__h,o.__h=[],r.some(function(r){r.call(o)})}catch(r){p.__e(r,o.__v)}})}function N(r,o,u){try{if("function"==typeof r){var E="function"==typeof r.__u;E&&r.__u(),E&&null==o||(r.__u=r(o))}else r.current=o}catch(r){p.__e(r,u)}}function q(r,o,u){return this.constructor(r,u)}function B(r,o,E){var A,J,W,R;o==document&&(o=document.documentElement),p.__&&p.__(r,o),J=(A="function"==typeof E)?null:E&&E.__k||o.__k,W=[],R=[],j(o,r=(!A&&E||o).__k=_(m,null,[r]),J||G,G,o.namespaceURI,!A&&E?[E]:J?null:o.firstChild?u.call(o.childNodes):null,W,!A&&E?E:J?J.__e:o.firstChild,A,R),F(W,r,R)}u=Y.slice,p={__e:function(r,o,u,p){for(var E,A,J;o=o.__;)if((E=o.__c)&&!E.__)try{if((A=E.constructor)&&null!=A.getDerivedStateFromError&&(E.setState(A.getDerivedStateFromError(r)),J=E.__d),null!=E.componentDidCatch&&(E.componentDidCatch(r,p||{}),J=E.__d),J)return E.__E=E}catch(o){r=o}throw r}},E=0,b.prototype.setState=function(r,o){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),"function"==typeof r&&(r=r(d({},u),this.props)),r&&d(u,r),null!=r&&this.__v&&(o&&this._sb.push(o),M(this))},b.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),M(this))},b.prototype.render=m,A=[],W="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,R=function(r,o){return r.__v.__b-o.__v.__b},$.__r=0,I=/(PointerCapture)$|Capture$/i,K=0,U=T(!1),D=T(!0),z=0,o.Component=b,o.Fragment=m,o.cloneElement=function(r,o,p){var E,A,J,W,R=d({},r.props);for(J in r.type&&r.type.defaultProps&&(W=r.type.defaultProps),o)"key"==J?E=o[J]:"ref"==J?A=o[J]:R[J]=null==o[J]&&null!=W?W[J]:o[J];return arguments.length>2&&(R.children=arguments.length>3?u.call(arguments,2):p),x(r.type,R,E||r.key,A||r.ref,null)},o.createContext=function(r){function l(r){var o,u;return this.getChildContext||(o=new Set,(u={})[l.__c]=this,this.getChildContext=function(){return u},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(r){this.props.value!=r.value&&o.forEach(function(r){r.__e=!0,M(r)})},this.sub=function(r){o.add(r);var u=r.componentWillUnmount;r.componentWillUnmount=function(){o&&o.delete(r),u&&u.call(r)}}),r.children}return l.__c="__cC"+z++,l.__=r,l.Provider=l.__l=(l.Consumer=function(r,o){return r.children(o)}).contextType=l,l},o.createElement=_,o.createRef=function(){return{current:null}},o.h=_,o.hydrate=function n(r,o){B(r,o,n)},o.isValidElement=function(r){return null!=r&&null==r.constructor},o.options=p,o.render=B,o.toChildArray=function n(r,o){return o=o||[],null==r||"boolean"==typeof r||(Z(r)?r.some(function(r){n(r,o)}):o.push(r)),o}},62903:(r,o,u)=>{"use strict";let p,E;u.r(o),u.d(o,{NIL:()=>Z,parse:()=>esm_node_parse,stringify:()=>esm_node_stringify,v1:()=>esm_node_v1,v3:()=>G,v4:()=>esm_node_v4,v5:()=>X,validate:()=>esm_node_validate,version:()=>esm_node_version});var A=u(6113),J=u.n(A);let W=new Uint8Array(256),R=W.length;function rng(){return R>W.length-16&&(J().randomFillSync(W),R=0),W.slice(R,R+=16)}let I=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,esm_node_validate=function(r){return"string"==typeof r&&I.test(r)},K=[];for(let r=0;r<256;++r)K.push((r+256).toString(16).substr(1));let esm_node_stringify=function(r,o=0){let u=(K[r[o+0]]+K[r[o+1]]+K[r[o+2]]+K[r[o+3]]+"-"+K[r[o+4]]+K[r[o+5]]+"-"+K[r[o+6]]+K[r[o+7]]+"-"+K[r[o+8]]+K[r[o+9]]+"-"+K[r[o+10]]+K[r[o+11]]+K[r[o+12]]+K[r[o+13]]+K[r[o+14]]+K[r[o+15]]).toLowerCase();if(!esm_node_validate(u))throw TypeError("Stringified UUID is invalid");return u},U=0,D=0,esm_node_v1=function(r,o,u){let A=o&&u||0,J=o||Array(16),W=(r=r||{}).node||p,R=void 0!==r.clockseq?r.clockseq:E;if(null==W||null==R){let o=r.random||(r.rng||rng)();null==W&&(W=p=[1|o[0],o[1],o[2],o[3],o[4],o[5]]),null==R&&(R=E=(o[6]<<8|o[7])&16383)}let I=void 0!==r.msecs?r.msecs:Date.now(),K=void 0!==r.nsecs?r.nsecs:D+1,z=I-U+(K-D)/1e4;if(z<0&&void 0===r.clockseq&&(R=R+1&16383),(z<0||I>U)&&void 0===r.nsecs&&(K=0),K>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");U=I,D=K,E=R,I+=122192928e5;let G=((268435455&I)*1e4+K)%4294967296;J[A++]=G>>>24&255,J[A++]=G>>>16&255,J[A++]=G>>>8&255,J[A++]=255&G;let Y=I/4294967296*1e4&268435455;J[A++]=Y>>>8&255,J[A++]=255&Y,J[A++]=Y>>>24&15|16,J[A++]=Y>>>16&255,J[A++]=R>>>8|128,J[A++]=255&R;for(let r=0;r<6;++r)J[A+r]=W[r];return o||esm_node_stringify(J)},esm_node_parse=function(r){let o;if(!esm_node_validate(r))throw TypeError("Invalid UUID");let u=new Uint8Array(16);return u[0]=(o=parseInt(r.slice(0,8),16))>>>24,u[1]=o>>>16&255,u[2]=o>>>8&255,u[3]=255&o,u[4]=(o=parseInt(r.slice(9,13),16))>>>8,u[5]=255&o,u[6]=(o=parseInt(r.slice(14,18),16))>>>8,u[7]=255&o,u[8]=(o=parseInt(r.slice(19,23),16))>>>8,u[9]=255&o,u[10]=(o=parseInt(r.slice(24,36),16))/1099511627776&255,u[11]=o/4294967296&255,u[12]=o>>>24&255,u[13]=o>>>16&255,u[14]=o>>>8&255,u[15]=255&o,u};function v35(r,o,u){function generateUUID(r,p,E,A){if("string"==typeof r&&(r=function(r){r=unescape(encodeURIComponent(r));let o=[];for(let u=0;u<r.length;++u)o.push(r.charCodeAt(u));return o}(r)),"string"==typeof p&&(p=esm_node_parse(p)),16!==p.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let J=new Uint8Array(16+r.length);if(J.set(p),J.set(r,p.length),(J=u(J))[6]=15&J[6]|o,J[8]=63&J[8]|128,E){A=A||0;for(let r=0;r<16;++r)E[A+r]=J[r];return E}return esm_node_stringify(J)}try{generateUUID.name=r}catch(r){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID}let z=v35("v3",48,function(r){return Array.isArray(r)?r=Buffer.from(r):"string"==typeof r&&(r=Buffer.from(r,"utf8")),J().createHash("md5").update(r).digest()}),G=z,esm_node_v4=function(r,o,u){r=r||{};let p=r.random||(r.rng||rng)();if(p[6]=15&p[6]|64,p[8]=63&p[8]|128,o){u=u||0;for(let r=0;r<16;++r)o[u+r]=p[r];return o}return esm_node_stringify(p)},Y=v35("v5",80,function(r){return Array.isArray(r)?r=Buffer.from(r):"string"==typeof r&&(r=Buffer.from(r,"utf8")),J().createHash("sha1").update(r).digest()}),X=Y,Z="00000000-0000-0000-0000-000000000000",esm_node_version=function(r){if(!esm_node_validate(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}},7281:r=>{"use strict";r.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let r=this.head;r;r=r.next)yield r.value}}},57242:(r,o,u)=>{"use strict";function Yallist(r){var o=this;if(o instanceof Yallist||(o=new Yallist),o.tail=null,o.head=null,o.length=0,r&&"function"==typeof r.forEach)r.forEach(function(r){o.push(r)});else if(arguments.length>0)for(var u=0,p=arguments.length;u<p;u++)o.push(arguments[u]);return o}function Node(r,o,u,p){if(!(this instanceof Node))return new Node(r,o,u,p);this.list=p,this.value=r,o?(o.next=this,this.prev=o):this.prev=null,u?(u.prev=this,this.next=u):this.next=null}r.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(r){if(r.list!==this)throw Error("removing node which does not belong to this list");var o=r.next,u=r.prev;return o&&(o.prev=u),u&&(u.next=o),r===this.head&&(this.head=o),r===this.tail&&(this.tail=u),r.list.length--,r.next=null,r.prev=null,r.list=null,o},Yallist.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var o=this.head;r.list=this,r.next=o,o&&(o.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}},Yallist.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var o=this.tail;r.list=this,r.prev=o,o&&(o.next=r),this.tail=r,this.head||(this.head=r),this.length++}},Yallist.prototype.push=function(){for(var r,o=0,u=arguments.length;o<u;o++)r=arguments[o],this.tail=new Node(r,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},Yallist.prototype.unshift=function(){for(var r,o=0,u=arguments.length;o<u;o++)r=arguments[o],this.head=new Node(r,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},Yallist.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}},Yallist.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}},Yallist.prototype.forEach=function(r,o){o=o||this;for(var u=this.head,p=0;null!==u;p++)r.call(o,u.value,p,this),u=u.next},Yallist.prototype.forEachReverse=function(r,o){o=o||this;for(var u=this.tail,p=this.length-1;null!==u;p--)r.call(o,u.value,p,this),u=u.prev},Yallist.prototype.get=function(r){for(var o=0,u=this.head;null!==u&&o<r;o++)u=u.next;if(o===r&&null!==u)return u.value},Yallist.prototype.getReverse=function(r){for(var o=0,u=this.tail;null!==u&&o<r;o++)u=u.prev;if(o===r&&null!==u)return u.value},Yallist.prototype.map=function(r,o){o=o||this;for(var u=new Yallist,p=this.head;null!==p;)u.push(r.call(o,p.value,this)),p=p.next;return u},Yallist.prototype.mapReverse=function(r,o){o=o||this;for(var u=new Yallist,p=this.tail;null!==p;)u.push(r.call(o,p.value,this)),p=p.prev;return u},Yallist.prototype.reduce=function(r,o){var u,p=this.head;if(arguments.length>1)u=o;else if(this.head)p=this.head.next,u=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var E=0;null!==p;E++)u=r(u,p.value,E),p=p.next;return u},Yallist.prototype.reduceReverse=function(r,o){var u,p=this.tail;if(arguments.length>1)u=o;else if(this.tail)p=this.tail.prev,u=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var E=this.length-1;null!==p;E--)u=r(u,p.value,E),p=p.prev;return u},Yallist.prototype.toArray=function(){for(var r=Array(this.length),o=0,u=this.head;null!==u;o++)r[o]=u.value,u=u.next;return r},Yallist.prototype.toArrayReverse=function(){for(var r=Array(this.length),o=0,u=this.tail;null!==u;o++)r[o]=u.value,u=u.prev;return r},Yallist.prototype.slice=function(r,o){(o=o||this.length)<0&&(o+=this.length),(r=r||0)<0&&(r+=this.length);var u=new Yallist;if(o<r||o<0)return u;r<0&&(r=0),o>this.length&&(o=this.length);for(var p=0,E=this.head;null!==E&&p<r;p++)E=E.next;for(;null!==E&&p<o;p++,E=E.next)u.push(E.value);return u},Yallist.prototype.sliceReverse=function(r,o){(o=o||this.length)<0&&(o+=this.length),(r=r||0)<0&&(r+=this.length);var u=new Yallist;if(o<r||o<0)return u;r<0&&(r=0),o>this.length&&(o=this.length);for(var p=this.length,E=this.tail;null!==E&&p>o;p--)E=E.prev;for(;null!==E&&p>r;p--,E=E.prev)u.push(E.value);return u},Yallist.prototype.splice=function(r,o,...u){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var p=0,E=this.head;null!==E&&p<r;p++)E=E.next;for(var A=[],p=0;E&&p<o;p++)A.push(E.value),E=this.removeNode(E);null===E&&(E=this.tail),E!==this.head&&E!==this.tail&&(E=E.prev);for(var p=0;p<u.length;p++)E=function(r,o,u){var p=o===r.head?new Node(u,null,o,r):new Node(u,o,o.next,r);return null===p.next&&(r.tail=p),null===p.prev&&(r.head=p),r.length++,p}(this,E,u[p]);return A},Yallist.prototype.reverse=function(){for(var r=this.head,o=this.tail,u=r;null!==u;u=u.prev){var p=u.prev;u.prev=u.next,u.next=p}return this.head=o,this.tail=r,this};try{u(7281)(Yallist)}catch(r){}},57384:r=>{"use strict";r.exports=function(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r},r.exports.__esModule=!0,r.exports.default=r.exports},48824:r=>{"use strict";function asyncGeneratorStep(r,o,u,p,E,A,J){try{var W=r[A](J),R=W.value}catch(r){return void u(r)}W.done?o(R):Promise.resolve(R).then(p,E)}r.exports=function(r){return function(){var o=this,u=arguments;return new Promise(function(p,E){var A=r.apply(o,u);function _next(r){asyncGeneratorStep(A,p,E,_next,_throw,"next",r)}function _throw(r){asyncGeneratorStep(A,p,E,_next,_throw,"throw",r)}_next(void 0)})}},r.exports.__esModule=!0,r.exports.default=r.exports},36707:r=>{"use strict";r.exports=function(r,o){if(!(r instanceof o))throw TypeError("Cannot call a class as a function")},r.exports.__esModule=!0,r.exports.default=r.exports},89250:(r,o,u)=>{"use strict";var p=u(15501),E=u(4474);r.exports=function(r,o,u){if(p())return Reflect.construct.apply(null,arguments);var A=[null];A.push.apply(A,o);var J=new(r.bind.apply(r,A));return u&&E(J,u.prototype),J},r.exports.__esModule=!0,r.exports.default=r.exports},91390:(r,o,u)=>{"use strict";var p=u(54987);function _defineProperties(r,o){for(var u=0;u<o.length;u++){var E=o[u];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(r,p(E.key),E)}}r.exports=function(r,o,u){return o&&_defineProperties(r.prototype,o),u&&_defineProperties(r,u),Object.defineProperty(r,"prototype",{writable:!1}),r},r.exports.__esModule=!0,r.exports.default=r.exports},92174:(r,o,u)=>{"use strict";var p=u(54987);r.exports=function(r,o,u){return(o=p(o))in r?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,r},r.exports.__esModule=!0,r.exports.default=r.exports},14432:r=>{"use strict";function _extends(){return r.exports=_extends=Object.assign?Object.assign.bind():function(r){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var p in u)({}).hasOwnProperty.call(u,p)&&(r[p]=u[p])}return r},r.exports.__esModule=!0,r.exports.default=r.exports,_extends.apply(null,arguments)}r.exports=_extends,r.exports.__esModule=!0,r.exports.default=r.exports},51327:r=>{"use strict";function _getPrototypeOf(o){return r.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r.exports.__esModule=!0,r.exports.default=r.exports,_getPrototypeOf(o)}r.exports=_getPrototypeOf,r.exports.__esModule=!0,r.exports.default=r.exports},52603:(r,o,u)=>{"use strict";var p=u(4474);r.exports=function(r,o){if("function"!=typeof o&&null!==o)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),o&&p(r,o)},r.exports.__esModule=!0,r.exports.default=r.exports},2049:r=>{"use strict";r.exports=function(r){return r&&r.__esModule?r:{default:r}},r.exports.__esModule=!0,r.exports.default=r.exports},55357:r=>{"use strict";r.exports=function(r){try{return -1!==Function.toString.call(r).indexOf("[native code]")}catch(o){return"function"==typeof r}},r.exports.__esModule=!0,r.exports.default=r.exports},15501:r=>{"use strict";function _isNativeReflectConstruct(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(r){}return(r.exports=_isNativeReflectConstruct=function(){return!!o},r.exports.__esModule=!0,r.exports.default=r.exports)()}r.exports=_isNativeReflectConstruct,r.exports.__esModule=!0,r.exports.default=r.exports},17257:(r,o,u)=>{"use strict";var p=u(44493).default,E=u(57384);r.exports=function(r,o){if(o&&("object"==p(o)||"function"==typeof o))return o;if(void 0!==o)throw TypeError("Derived constructors may only return object or undefined");return E(r)},r.exports.__esModule=!0,r.exports.default=r.exports},86601:(r,o,u)=>{"use strict";var p=u(44493).default;function _regeneratorRuntime(){r.exports=_regeneratorRuntime=function(){return u},r.exports.__esModule=!0,r.exports.default=r.exports;var o,u={},E=Object.prototype,A=E.hasOwnProperty,J="function"==typeof Symbol?Symbol:{},W=J.iterator||"@@iterator",R=J.asyncIterator||"@@asyncIterator",I=J.toStringTag||"@@toStringTag";function c(r,o,u,p){return Object.defineProperty(r,o,{value:u,enumerable:!p,configurable:!p,writable:!p})}try{c({},"")}catch(r){c=function(r,o,u){return r[o]=u}}function h(r,u,p,E){var A,J,W=Object.create((u&&u.prototype instanceof Generator?u:Generator).prototype);return c(W,"_invoke",(A=new Context(E||[]),J=1,function(u,E){if(3===J)throw Error("Generator is already running");if(4===J){if("throw"===u)throw E;return{value:o,done:!0}}for(A.method=u,A.arg=E;;){var W=A.delegate;if(W){var R=function d(r,u){var p=u.method,E=r.i[p];if(E===o)return u.delegate=null,"throw"===p&&r.i.return&&(u.method="return",u.arg=o,d(r,u),"throw"===u.method)||"return"!==p&&(u.method="throw",u.arg=TypeError("The iterator does not provide a '"+p+"' method")),K;var A=s(E,r.i,u.arg);if("throw"===A.type)return u.method="throw",u.arg=A.arg,u.delegate=null,K;var J=A.arg;return J?J.done?(u[r.r]=J.value,u.next=r.n,"return"!==u.method&&(u.method="next",u.arg=o),u.delegate=null,K):J:(u.method="throw",u.arg=TypeError("iterator result is not an object"),u.delegate=null,K)}(W,A);if(R){if(R===K)continue;return R}}if("next"===A.method)A.sent=A._sent=A.arg;else if("throw"===A.method){if(1===J)throw J=4,A.arg;A.dispatchException(A.arg)}else"return"===A.method&&A.abrupt("return",A.arg);J=3;var I=s(r,p,A);if("normal"===I.type){if(J=A.done?4:2,I.arg===K)continue;return{value:I.arg,done:A.done}}"throw"===I.type&&(J=4,A.method="throw",A.arg=I.arg)}}),!0),W}function s(r,o,u){try{return{type:"normal",arg:r.call(o,u)}}catch(r){return{type:"throw",arg:r}}}u.wrap=h;var K={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var U={};c(U,W,function(){return this});var D=Object.getPrototypeOf,z=D&&D(D(x([])));z&&z!==E&&A.call(z,W)&&(U=z);var G=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(U);function g(r){["next","throw","return"].forEach(function(o){c(r,o,function(r){return this._invoke(o,r)})})}function AsyncIterator(r,o){var u;c(this,"_invoke",function(E,J){function i(){return new o(function(u,W){!function e(u,E,J,W){var R=s(r[u],r,E);if("throw"!==R.type){var I=R.arg,K=I.value;return K&&"object"==p(K)&&A.call(K,"__await")?o.resolve(K.__await).then(function(r){e("next",r,J,W)},function(r){e("throw",r,J,W)}):o.resolve(K).then(function(r){I.value=r,J(I)},function(r){return e("throw",r,J,W)})}W(R.arg)}(E,J,u,W)})}return u=u?u.then(i,i):i()},!0)}function w(r){this.tryEntries.push(r)}function m(r){var u=r[4]||{};u.type="normal",u.arg=o,r[4]=u}function Context(r){this.tryEntries=[[-1]],r.forEach(w,this),this.reset(!0)}function x(r){if(null!=r){var u=r[W];if(u)return u.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var E=-1,a=function e(){for(;++E<r.length;)if(A.call(r,E))return e.value=r[E],e.done=!1,e;return e.value=o,e.done=!0,e};return a.next=a}}throw TypeError(p(r)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,c(G,"constructor",GeneratorFunctionPrototype),c(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=c(GeneratorFunctionPrototype,I,"GeneratorFunction"),u.isGeneratorFunction=function(r){var o="function"==typeof r&&r.constructor;return!!o&&(o===GeneratorFunction||"GeneratorFunction"===(o.displayName||o.name))},u.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,GeneratorFunctionPrototype):(r.__proto__=GeneratorFunctionPrototype,c(r,I,"GeneratorFunction")),r.prototype=Object.create(G),r},u.awrap=function(r){return{__await:r}},g(AsyncIterator.prototype),c(AsyncIterator.prototype,R,function(){return this}),u.AsyncIterator=AsyncIterator,u.async=function(r,o,p,E,A){void 0===A&&(A=Promise);var J=new AsyncIterator(h(r,o,p,E),A);return u.isGeneratorFunction(o)?J:J.next().then(function(r){return r.done?r.value:J.next()})},g(G),c(G,I,"Generator"),c(G,W,function(){return this}),c(G,"toString",function(){return"[object Generator]"}),u.keys=function(r){var o=Object(r),u=[];for(var p in o)u.unshift(p);return function t(){for(;u.length;)if((p=u.pop())in o)return t.value=p,t.done=!1,t;return t.done=!0,t}},u.values=x,Context.prototype={constructor:Context,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(m),!r)for(var u in this)"t"===u.charAt(0)&&A.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=o)},stop:function(){this.done=!0;var r=this.tryEntries[0][4];if("throw"===r.type)throw r.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var u=this;function n(o){A.type="throw",A.arg=r,u.next=o}for(var p=u.tryEntries.length-1;p>=0;--p){var E=this.tryEntries[p],A=E[4],J=this.prev,W=E[1],R=E[2];if(-1===E[0])return n("end"),!1;if(!W&&!R)throw Error("try statement without catch or finally");if(null!=E[0]&&E[0]<=J){if(J<W)return this.method="next",this.arg=o,n(W),!0;if(J<R)return n(R),!1}}},abrupt:function(r,o){for(var u=this.tryEntries.length-1;u>=0;--u){var p=this.tryEntries[u];if(p[0]>-1&&p[0]<=this.prev&&this.prev<p[2]){var E=p;break}}E&&("break"===r||"continue"===r)&&E[0]<=o&&o<=E[2]&&(E=null);var A=E?E[4]:{};return A.type=r,A.arg=o,E?(this.method="next",this.next=E[2],K):this.complete(A)},complete:function(r,o){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&o&&(this.next=o),K},finish:function(r){for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o];if(u[2]===r)return this.complete(u[4],u[3]),m(u),K}},catch:function(r){for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o];if(u[0]===r){var p=u[4];if("throw"===p.type){var E=p.arg;m(u)}return E}}throw Error("illegal catch attempt")},delegateYield:function(r,u,p){return this.delegate={i:x(r),r:u,n:p},"next"===this.method&&(this.arg=o),K}},u}r.exports=_regeneratorRuntime,r.exports.__esModule=!0,r.exports.default=r.exports},4474:r=>{"use strict";function _setPrototypeOf(o,u){return r.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},r.exports.__esModule=!0,r.exports.default=r.exports,_setPrototypeOf(o,u)}r.exports=_setPrototypeOf,r.exports.__esModule=!0,r.exports.default=r.exports},14171:(r,o,u)=>{"use strict";var p=u(44493).default;r.exports=function(r,o){if("object"!=p(r)||!r)return r;var u=r[Symbol.toPrimitive];if(void 0!==u){var E=u.call(r,o||"default");if("object"!=p(E))return E;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(r)},r.exports.__esModule=!0,r.exports.default=r.exports},54987:(r,o,u)=>{"use strict";var p=u(44493).default,E=u(14171);r.exports=function(r){var o=E(r,"string");return"symbol"==p(o)?o:o+""},r.exports.__esModule=!0,r.exports.default=r.exports},44493:r=>{"use strict";function _typeof(o){return r.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},r.exports.__esModule=!0,r.exports.default=r.exports,_typeof(o)}r.exports=_typeof,r.exports.__esModule=!0,r.exports.default=r.exports},49903:(r,o,u)=>{"use strict";var p=u(51327),E=u(4474),A=u(55357),J=u(89250);function _wrapNativeSuper(o){var u="function"==typeof Map?new Map:void 0;return r.exports=_wrapNativeSuper=function(r){if(null===r||!A(r))return r;if("function"!=typeof r)throw TypeError("Super expression must either be null or a function");if(void 0!==u){if(u.has(r))return u.get(r);u.set(r,Wrapper)}function Wrapper(){return J(r,arguments,p(this).constructor)}return Wrapper.prototype=Object.create(r.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),E(Wrapper,r)},r.exports.__esModule=!0,r.exports.default=r.exports,_wrapNativeSuper(o)}r.exports=_wrapNativeSuper,r.exports.__esModule=!0,r.exports.default=r.exports},21264:(r,o,u)=>{"use strict";var p=u(86601)();r.exports=p;try{regeneratorRuntime=p}catch(r){"object"==typeof globalThis?globalThis.regeneratorRuntime=p:Function("r","regeneratorRuntime = r")(p)}},87658:r=>{"use strict";r.exports=JSON.parse('{"name":"openid-client","version":"5.7.1","description":"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs","keywords":["auth","authentication","basic","certified","client","connect","dynamic","electron","hybrid","identity","implicit","oauth","oauth2","oidc","openid","passport","relying party","strategy"],"homepage":"https://github.com/panva/openid-client","repository":"panva/openid-client","funding":{"url":"https://github.com/sponsors/panva"},"license":"MIT","author":"Filip Skokan <panva.ip@gmail.com>","exports":{"types":"./types/index.d.ts","import":"./lib/index.mjs","require":"./lib/index.js"},"main":"./lib/index.js","types":"./types/index.d.ts","files":["lib","types/index.d.ts"],"scripts":{"format":"npx prettier --loglevel silent --write ./lib ./test ./certification ./types","test":"mocha test/**/*.test.js"},"dependencies":{"jose":"^4.15.9","lru-cache":"^6.0.0","object-hash":"^2.2.0","oidc-token-hash":"^5.0.3"},"devDependencies":{"@types/node":"^16.18.106","@types/passport":"^1.0.16","base64url":"^3.0.1","chai":"^4.5.0","mocha":"^10.7.3","nock":"^13.5.5","prettier":"^2.8.8","readable-mock-req":"^0.2.2","sinon":"^9.2.4","timekeeper":"^2.3.1"},"standard-version":{"scripts":{"postchangelog":"sed -i \'\' -e \'s/### \\\\[/## [/g\' CHANGELOG.md"},"types":[{"type":"feat","section":"Features"},{"type":"fix","section":"Fixes"},{"type":"chore","hidden":true},{"type":"docs","hidden":true},{"type":"style","hidden":true},{"type":"refactor","section":"Refactor","hidden":false},{"type":"perf","section":"Performance","hidden":false},{"type":"test","hidden":true}]}}')}};